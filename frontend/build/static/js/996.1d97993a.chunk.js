"use strict";(self.webpackChunktailtown_frontend=self.webpackChunktailtown_frontend||[]).push([[996],{996:(e,s,t)=>{t.r(s),t.d(s,{default:()=>S});var i=t(89379),n=t(80045),r=t(9950),a=t(28429),c=t(78317),o=t(46639),l=t(62999),u=t(10226),d=t(82053),m=t(2235),p=t(60899),h=t(8145),x=t(23266),y=t(16497),A=t(37324),j=t(98785),v=t(65429),f=t(63189),g=t(25389),b=t(50569),w=t(44414);const C=["maintenanceSchedule"],k={name:"",type:g.vt.OTHER,description:"",capacity:1,location:"",attributes:{},isActive:!0,notes:""},S=()=>{const{id:e}=(0,a.g)(),s=(0,a.Zp)(),[t,S]=(0,r.useState)(k),[E,R]=(0,r.useState)(!0),[T,W]=(0,r.useState)(!1),[F,D]=(0,r.useState)({open:!1,message:"",severity:"success"}),I=(0,r.useCallback)(async()=>{if(e&&"new"!==e)try{const s=await b.$E(e);if(!s)throw new Error("Resource not found");S(s)}catch(t){console.error("Failed to load resource:",t),D({open:!0,message:"Failed to load resource",severity:"error"}),s("/resources")}},[e,s]);(0,r.useEffect)(()=>{(async()=>{try{if(!e)return void s("/resources");if("new"===e)return S(k),void R(!1);await I()}catch(t){console.error("Error initializing resource:",t),D({open:!0,message:"Failed to initialize resource",severity:"error"}),s("/resources")}finally{R(!1)}})()},[e,s,I]);const q=e=>{const{name:s,value:t,type:n,checked:r}=e.target;S(e=>(0,i.A)((0,i.A)({},e),{},{[s]:"checkbox"===n?r:t}))},z=()=>{D(e=>(0,i.A)((0,i.A)({},e),{},{open:!1}))};return E?(0,w.jsx)(c.A,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,w.jsx)(o.A,{})}):(0,w.jsxs)(l.A,{children:[(0,w.jsxs)(c.A,{sx:{mt:4,mb:4},children:[(0,w.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,w.jsx)(u.A,{startIcon:(0,w.jsx)(f.A,{}),onClick:()=>s("/resources"),sx:{mr:2},children:"Back"}),(0,w.jsx)(d.A,{variant:"h4",children:"new"===e?"New Resource":"Edit Resource"})]}),(0,w.jsx)(m.A,{sx:{p:3},children:(0,w.jsx)("form",{onSubmit:async r=>{r.preventDefault(),W(!0);try{if(!e)throw new Error("Resource ID is required");if("new"===e){const{maintenanceSchedule:e}=t,r=(0,n.A)(t,C),a=(0,i.A)((0,i.A)({},r),{},{capacity:"string"===typeof r.capacity?parseInt(r.capacity,10):r.capacity,isActive:!0,type:t.type||g.vt.OTHER,attributes:t.attributes||{}});await b.Zg(a);D({open:!0,message:"Resource created successfully",severity:"success"}),setTimeout(()=>s("/resources"),1500)}else console.log("Updating resource:",e),await b.Uh(e,{name:t.name,type:t.type,description:t.description,capacity:t.capacity,location:t.location,maintenanceSchedule:t.maintenanceSchedule,attributes:t.attributes,isActive:t.isActive,notes:t.notes});D({open:!0,message:"Resource ".concat("new"===e?"created":"updated"," successfully"),severity:"success"}),setTimeout(()=>s("/resources"),1500)}catch(o){var a,c;console.error("Error submitting resource:",o);const s=(null===(a=o.response)||void 0===a||null===(c=a.data)||void 0===c?void 0:c.message)||o.message||"Failed to ".concat("new"===e?"create":"update"," resource");D({open:!0,message:s,severity:"error"})}finally{W(!1)}},children:(0,w.jsxs)(p.Ay,{container:!0,spacing:3,children:[(0,w.jsx)(p.Ay,{item:!0,xs:12,sm:6,children:(0,w.jsx)(h.A,{fullWidth:!0,required:!0,label:"Name",name:"name",value:t.name,onChange:q})}),(0,w.jsx)(p.Ay,{item:!0,xs:12,sm:6,children:(0,w.jsx)(h.A,{fullWidth:!0,required:!0,select:!0,label:"Type",name:"type",value:t.type,onChange:q,children:Object.entries(g.vt).map(e=>{let[s,t]=e;return(0,w.jsx)(x.A,{value:t,children:s.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")},s)})})}),(0,w.jsx)(p.Ay,{item:!0,xs:12,children:(0,w.jsx)(h.A,{fullWidth:!0,multiline:!0,rows:3,label:"Description",name:"description",value:t.description||"",onChange:q})}),(0,w.jsx)(p.Ay,{item:!0,xs:12,sm:6,children:(0,w.jsx)(h.A,{fullWidth:!0,label:"Location",name:"location",value:t.location||"",onChange:q})}),(0,w.jsx)(p.Ay,{item:!0,xs:12,sm:6,children:(0,w.jsx)(h.A,{fullWidth:!0,type:"number",label:"Capacity",name:"capacity",value:t.capacity||"",onChange:q,inputProps:{min:1,max:10},helperText:"Maximum number of pets (1-10). For multi-pet suites, set to 2 or more."})}),(0,w.jsx)(p.Ay,{item:!0,xs:12,children:(0,w.jsx)(h.A,{fullWidth:!0,multiline:!0,rows:3,label:"Notes",name:"notes",value:t.notes||"",onChange:q})}),(0,w.jsx)(p.Ay,{item:!0,xs:12,children:(0,w.jsx)(y.A,{control:(0,w.jsx)(A.A,{checked:t.isActive,onChange:q,name:"isActive"}),label:"Active"})}),(0,w.jsx)(p.Ay,{item:!0,xs:12,children:(0,w.jsxs)(c.A,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,w.jsx)(u.A,{variant:"outlined",onClick:()=>s("/resources"),children:"Cancel"}),(0,w.jsx)(u.A,{type:"submit",variant:"contained",disabled:T,children:T?(0,w.jsx)(o.A,{size:24}):"new"===e?"Create Resource":"Save Changes"})]})})]})})})]}),(0,w.jsx)(j.A,{open:F.open,autoHideDuration:6e3,onClose:z,children:(0,w.jsx)(v.A,{onClose:z,severity:F.severity,sx:{width:"100%"},children:F.message})})]})}}}]);