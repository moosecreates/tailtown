"use strict";(self.webpackChunktailtown_frontend=self.webpackChunktailtown_frontend||[]).push([[1601],{31601:(e,s,r)=>{r.r(s),r.d(s,{default:()=>F});var t=r(89379),n=r(9950),l=r(95491),o=r.n(l),c=r(28429),i=r(62999),a=r(78317),d=r(82053),u=r(10226),h=r(60899),A=r(8145),x=r(23266),j=r(1320),p=r(2235),y=r(15769),m=r(69780),g=r(9213),v=r(21671),f=r(34075),C=r(25277),w=r(25333),b=r(98785),k=r(65429),S=r(99532),E=r(7999),L=r(57988),z=r(50569),I=r(25389),R=r(44414);const F=()=>{const e=(0,c.Zp)(),[s,r]=(0,n.useState)([]),[l,F]=(0,n.useState)(!0),[_,D]=(0,n.useState)({open:!1,message:"",severity:"success"}),[T,W]=(0,n.useState)("all"),[H,M]=(0,n.useState)(""),N=(0,n.useMemo)(()=>o()((e,r)=>{try{if(0===s.length)return void G([]);const t=s.filter(s=>{var t,n,l;let o;try{o=(0,I.rc)(s.type)}catch(a){console.warn("Error getting category for resource type ".concat(s.type,":"),a),o="other"}const c="all"===r||o===r,i=(null===(t=s.name)||void 0===t?void 0:t.toLowerCase().includes(e.toLowerCase()))||((null===(n=s.description)||void 0===n?void 0:n.toLowerCase())||"").includes(e.toLowerCase())||((null===(l=s.location)||void 0===l?void 0:l.toLowerCase())||"").includes(e.toLowerCase());return c&&i});G(t)}catch(t){console.error("Error filtering resources:",t),G([])}},300),[s]);(0,n.useEffect)(()=>(N(H,T),()=>{N.cancel()}),[H,T,N,s.length]);const U=(0,n.useCallback)(async()=>{try{const e=await z.dD();Array.isArray(e)?r(e):(console.error("Invalid resources response format:",e),r([])),F(!1)}catch(e){console.error("Error loading resources:",e),e.response&&console.error("Response error:",e.response.data),D({open:!0,message:"Failed to load resources",severity:"error"}),r([]),F(!1)}},[]);(0,n.useEffect)(()=>{U()},[U]);const Z=(0,n.useCallback)(async e=>{if(window.confirm("Are you sure you want to delete this resource?"))try{await z.o8(e),D({open:!0,message:"Resource deleted successfully",severity:"success"}),U()}catch(s){D({open:!0,message:"Failed to delete resource",severity:"error"})}},[U,D]),q=(0,n.useCallback)(()=>{D(e=>(0,t.A)((0,t.A)({},e),{},{open:!1}))},[]),[B,G]=(0,n.useState)([]);(0,n.useEffect)(()=>{G(s)},[s]);return(0,R.jsxs)(i.A,{children:[(0,R.jsxs)(a.A,{sx:{mt:4,mb:4},children:[(0,R.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,R.jsx)(d.A,{variant:"h4",children:"Resources"}),(0,R.jsx)(u.A,{variant:"contained",startIcon:(0,R.jsx)(S.A,{}),onClick:()=>{e("/resources/new")},children:"Add Resource"})]}),(0,R.jsxs)(h.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,R.jsx)(h.Ay,{item:!0,xs:12,sm:6,children:(0,R.jsx)(A.A,{fullWidth:!0,label:"Search resources",value:H,onChange:e=>M(e.target.value),size:"small"})}),(0,R.jsx)(h.Ay,{item:!0,xs:12,sm:6,children:(0,R.jsx)(A.A,{fullWidth:!0,select:!0,label:"Filter by type",value:T,onChange:e=>W(e.target.value),size:"small",children:["all","housing","play areas","grooming","training","staff","other"].map(e=>(0,R.jsx)(x.A,{value:e,children:"all"===e?"All Types":e.charAt(0).toUpperCase()+e.slice(1)},e))})})]}),(0,R.jsx)(j.A,{component:p.A,children:(0,R.jsxs)(y.A,{children:[(0,R.jsx)(m.A,{children:(0,R.jsxs)(g.A,{children:[(0,R.jsx)(v.A,{children:"Name"}),(0,R.jsx)(v.A,{children:"Type"}),(0,R.jsx)(v.A,{children:"Location"}),(0,R.jsx)(v.A,{children:"Capacity"}),(0,R.jsx)(v.A,{children:"Status"}),(0,R.jsx)(v.A,{align:"right",children:"Actions"})]})}),(0,R.jsx)(f.A,{children:B.map(s=>(0,R.jsxs)(g.A,{children:[(0,R.jsx)(v.A,{children:s.name}),(0,R.jsx)(v.A,{children:(0,R.jsx)(C.A,{label:(()=>{try{return(0,I.iC)(s.type)}catch(e){return console.warn("Error getting type name for ".concat(s.type,":"),e),String(s.type).replace(/_/g," ")}})(),color:s.isActive?"primary":"default",variant:"outlined",size:"small"})}),(0,R.jsx)(v.A,{children:s.location||"-"}),(0,R.jsx)(v.A,{children:s.capacity||"-"}),(0,R.jsx)(v.A,{children:(0,R.jsx)(C.A,{label:s.isActive?"Active":"Inactive",color:s.isActive?"success":"error",size:"small"})}),(0,R.jsxs)(v.A,{align:"right",children:[(0,R.jsx)(w.A,{size:"small",onClick:()=>e("/resources/".concat(s.id)),children:(0,R.jsx)(E.A,{})}),(0,R.jsx)(w.A,{size:"small",onClick:()=>Z(s.id),children:(0,R.jsx)(L.A,{})})]})]},s.id))})]})})]}),(0,R.jsx)(b.A,{open:_.open,autoHideDuration:6e3,onClose:q,children:(0,R.jsx)(k.A,{onClose:q,severity:_.severity,sx:{width:"100%"},children:_.message})})]})}}}]);