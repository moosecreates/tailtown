"use strict";(self.webpackChunktailtown_frontend=self.webpackChunktailtown_frontend||[]).push([[5833],{65833:(t,e,a)=>{a.d(e,{A:()=>s});var n=a(82932);const s=new class{async getDashboardData(){try{const t=await n.Ay.get("/api/staff/mobile/dashboard");return console.log("Mobile dashboard endpoint returned data:",t.data),t.data}catch(e){var t;404===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)?console.log("Mobile dashboard endpoint not found (404), aggregating from individual endpoints..."):console.warn("Mobile dashboard endpoint error:",null===e||void 0===e?void 0:e.message);try{const[t,e,a,n]=await Promise.all([this.getQuickStats(),this.getTodaySchedule(),this.getPendingTasks(),this.getUnreadMessageCount()]);return console.log("Aggregated dashboard data:",{stats:t,schedule:e.length,tasks:a.length,unreadCount:n}),{stats:t,todaySchedule:e,pendingTasks:a,unreadMessages:n}}catch(a){return console.error("Error aggregating dashboard data:",a),console.log("Using mock data as final fallback"),this.getMockDashboardData()}}}async getTodaySchedule(){try{const e=(new Date).toISOString().split("T")[0];try{const t=await n.Ay.get("/api/schedules/my-schedule",{params:{date:e}});if(t.data){return(Array.isArray(t.data)?t.data:t.data.data?t.data.data:[]).map(t=>({id:t.id,time:t.startTime,title:t.role||"Shift",location:t.location||t.startingLocation||"Main Building",startTime:t.startTime,endTime:t.endTime,role:t.role,status:t.status}))}}catch(t){console.log("My-schedule endpoint not available, trying fallback")}return this.getMockSchedule()}catch(e){return console.error("Error fetching today schedule:",e),this.getMockSchedule()}}async getPendingTasks(){try{return(await n.Ay.get("/api/staff/mobile/tasks/pending")).data}catch(t){return console.error("Error fetching pending tasks:",t),this.getMockTasks()}}async getQuickStats(){try{try{return(await n.Ay.get("/api/staff/mobile/stats")).data}catch(t){const a=(new Date).toISOString().split("T")[0],s=await n.Ay.get("/api/reservations",{params:{startDate:a,endDate:a,status:"CONFIRMED,CHECKED_IN"}}),i=(s.data.data||[]).length;try{const t=(await n.Ay.get("/api/checklists")).data.data||[],e=t.reduce((t,e)=>{var a;return t+((null===(a=e.items)||void 0===a?void 0:a.length)||0)},0);return{petsInFacility:i,tasksCompleted:t.reduce((t,e)=>{var a;return t+((null===(a=e.items)||void 0===a?void 0:a.filter(t=>t.completed).length)||0)},0),totalTasks:e}}catch(e){return{petsInFacility:i,tasksCompleted:0,totalTasks:0}}}}catch(a){return console.error("Error fetching quick stats:",a),this.getMockStats()}}async getUnreadMessageCount(){try{return(await n.Ay.get("/api/messaging/unread-count")).data.unreadCount}catch(t){return console.error("Error fetching unread message count:",t),0}}getMockDashboardData(){return{stats:this.getMockStats(),todaySchedule:this.getMockSchedule(),pendingTasks:this.getMockTasks(),unreadMessages:3}}getMockStats(){return{petsInFacility:24,tasksCompleted:8,totalTasks:12}}getMockSchedule(){return[{id:"1",time:"08:00 AM",title:"Morning Shift",location:"Main Building",startTime:"08:00",endTime:"12:00",role:"Kennel Attendant",status:"SCHEDULED"},{id:"2",time:"12:00 PM",title:"Lunch Break",location:"",startTime:"12:00",endTime:"01:00",status:"SCHEDULED"},{id:"3",time:"01:00 PM",title:"Afternoon Shift",location:"Main Building",startTime:"13:00",endTime:"17:00",role:"Kennel Attendant",status:"SCHEDULED"}]}getMockTasks(){return[{id:"1",title:"Opening Checklist",completed:8,total:10,type:"checklist",dueDate:(new Date).toISOString()},{id:"2",title:"Medication Round",completed:0,total:5,type:"medication",dueDate:(new Date).toISOString()},{id:"3",title:"Feeding Schedule",completed:12,total:24,type:"feeding",dueDate:(new Date).toISOString()}]}}}}]);