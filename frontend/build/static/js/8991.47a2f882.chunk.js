"use strict";(self.webpackChunktailtown_frontend=self.webpackChunktailtown_frontend||[]).push([[8991],{68991:(e,l,t)=>{t.r(l),t.d(l,{default:()=>W});var i=t(89379),a=t(9950),s=t(78317),r=t(82053),n=t(10226),o=t(60899),d=t(48089),c=t(50704),u=t(25277),h=t(25333),p=t(96583),m=t(40033),A=t(28170),x=t(8145),C=t(25979),b=t(19647),v=t(70006),y=t(23266),j=t(16497),g=t(37324),f=t(74745),E=t(249),R=t(26050),T=t(83563),k=t(71378),I=t(65429),O=t(79739),q=t(53256),H=t(40379),N=t(49939),w=t(20760),K=t(96132),S=t(77113),X=t(3076);const B=[{order:1,label:"Verify pet identification",type:"CHECKBOX",isRequired:!0},{order:2,label:"Check vaccination records",type:"CHECKBOX",isRequired:!0},{order:3,label:"Inspect pet for injuries/health issues",type:"CHECKBOX",isRequired:!0},{order:4,label:"Take arrival photo",type:"PHOTO",isRequired:!0},{order:5,label:"Record pet weight (lbs)",type:"NUMBER",isRequired:!1,minValue:0,maxValue:300},{order:6,label:"Note special instructions",type:"TEXT",isRequired:!1},{order:7,label:"Verify emergency contact",type:"CHECKBOX",isRequired:!0},{order:8,label:"Assign kennel/suite",type:"TEXT",isRequired:!0},{order:9,label:"Customer signature",type:"SIGNATURE",isRequired:!0}],M=[{order:1,label:"Final health check",type:"CHECKBOX",isRequired:!0},{order:2,label:"Take departure photo",type:"PHOTO",isRequired:!0},{order:3,label:"Record pet weight (lbs)",type:"NUMBER",isRequired:!1,minValue:0,maxValue:300},{order:4,label:"Clean and inspect kennel",type:"CHECKBOX",isRequired:!0},{order:5,label:"Return personal items",type:"CHECKBOX",isRequired:!0},{order:6,label:"Rate pet behavior (1-5)",type:"RATING",isRequired:!1},{order:7,label:"Staff notes for owner",type:"TEXT",isRequired:!1},{order:8,label:"Customer signature",type:"SIGNATURE",isRequired:!0}],U=[{order:1,label:"Pre-groom health check",type:"CHECKBOX",isRequired:!0},{order:2,label:"Take before photo",type:"PHOTO",isRequired:!0},{order:3,label:"Bath completed",type:"CHECKBOX",isRequired:!0},{order:4,label:"Nail trim completed",type:"CHECKBOX",isRequired:!1},{order:5,label:"Ear cleaning completed",type:"CHECKBOX",isRequired:!1},{order:6,label:"Haircut/styling completed",type:"CHECKBOX",isRequired:!1},{order:7,label:"Teeth brushing completed",type:"CHECKBOX",isRequired:!1},{order:8,label:"Take after photo",type:"PHOTO",isRequired:!0},{order:9,label:"Note any issues found",type:"TEXT",isRequired:!1}],L=[{order:1,label:"Check all kennels for cleanliness",type:"CHECKBOX",isRequired:!0},{order:2,label:"Verify water bowls filled",type:"CHECKBOX",isRequired:!0},{order:3,label:"Check HVAC temperature",type:"NUMBER",isRequired:!0,minValue:60,maxValue:80},{order:4,label:"Inspect play areas",type:"CHECKBOX",isRequired:!0},{order:5,label:"Check security cameras",type:"CHECKBOX",isRequired:!0},{order:6,label:"Verify emergency exits clear",type:"CHECKBOX",isRequired:!0},{order:7,label:"Restock supplies",type:"MULTI_SELECT",isRequired:!1,options:["Food","Treats","Cleaning supplies","Towels","Toys"]},{order:8,label:"Note any maintenance issues",type:"TEXT",isRequired:!1}];var _=t(44414);const G=[{value:"KENNEL_CHECKIN",label:"Kennel Check-In"},{value:"KENNEL_CHECKOUT",label:"Kennel Check-Out"},{value:"GROOMING",label:"Grooming"},{value:"TRAINING",label:"Training"},{value:"DAILY_FACILITY",label:"Daily Facility"},{value:"CUSTOM",label:"Custom"}],V=[{value:"CHECKBOX",label:"Checkbox (Yes/No)"},{value:"TEXT",label:"Text Input"},{value:"NUMBER",label:"Number Input"},{value:"PHOTO",label:"Photo Upload"},{value:"SIGNATURE",label:"Digital Signature"},{value:"RATING",label:"Rating (1-5 stars)"},{value:"MULTI_SELECT",label:"Multiple Choice"}];function W(){const[e,l]=(0,a.useState)([]),[t,W]=(0,a.useState)(!0),[F,z]=(0,a.useState)(!1),[P,D]=(0,a.useState)(null),[Y,J]=(0,a.useState)(!1),[Q,Z]=(0,a.useState)(null),[$,ee]=(0,a.useState)(null);(0,a.useEffect)(()=>{le()},[]);const le=async()=>{try{const e="http://localhost:4004",t=await fetch("".concat(e,"/api/checklists/templates"),{headers:{"x-tenant-id":localStorage.getItem("tailtown_tenant_id")||localStorage.getItem("tenantId")||"dev"}}),i=await t.json();l(i.data||[])}catch(e){console.error("Failed to load templates:",e)}finally{W(!1)}},te=(e,l)=>{if(!P)return;const t=[...P.items||[]],a="up"===l?e-1:e+1;a<0||a>=t.length||([t[e],t[a]]=[t[a],t[e]],t.forEach((e,l)=>e.order=l+1),D((0,i.A)((0,i.A)({},P),{},{items:t})))};return(0,_.jsxs)(s.A,{sx:{p:3},children:[(0,_.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,_.jsx)(r.A,{variant:"h4",children:"Checklist Templates"}),(0,_.jsx)(n.A,{variant:"contained",startIcon:(0,_.jsx)(q.A,{}),onClick:()=>{D({name:"",description:"",area:"CUSTOM",isActive:!0,items:[],estimatedMinutes:15}),z(!0)},children:"Create Template"})]}),t?(0,_.jsx)(r.A,{children:"Loading..."}):(0,_.jsx)(o.Ay,{container:!0,spacing:3,children:e.map(e=>{var l;return(0,_.jsx)(o.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,_.jsx)(d.A,{children:(0,_.jsxs)(c.A,{children:[(0,_.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start",mb:2},children:[(0,_.jsxs)(s.A,{children:[(0,_.jsx)(r.A,{variant:"h6",children:e.name}),(0,_.jsx)(u.A,{label:null===(l=G.find(l=>l.value===e.area))||void 0===l?void 0:l.label,size:"small",sx:{mt:1}})]}),(0,_.jsxs)(s.A,{children:[(0,_.jsx)(h.A,{size:"small",onClick:()=>(e=>{D((0,i.A)({},e)),z(!0)})(e),children:(0,_.jsx)(H.A,{})}),(0,_.jsx)(h.A,{size:"small",onClick:()=>(e=>{D((0,i.A)((0,i.A)({},e),{},{id:void 0,name:"".concat(e.name," (Copy)"),items:[...e.items]})),z(!0)})(e),children:(0,_.jsx)(N.A,{})}),(0,_.jsx)(h.A,{size:"small",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this template?"))try{const l="http://localhost:4004";await fetch("".concat(l,"/api/checklists/templates/").concat(e),{method:"DELETE",headers:{"x-tenant-id":localStorage.getItem("tailtown_tenant_id")||localStorage.getItem("tenantId")||"dev"}}),le()}catch(l){console.error("Failed to delete template:",l)}})(e.id),children:(0,_.jsx)(w.A,{})})]})]}),(0,_.jsx)(r.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description}),(0,_.jsxs)(s.A,{sx:{display:"flex",gap:2},children:[(0,_.jsxs)(r.A,{variant:"body2",children:[e.items.length," items"]}),(0,_.jsxs)(r.A,{variant:"body2",children:["~",e.estimatedMinutes," min"]}),(0,_.jsx)(u.A,{label:e.isActive?"Active":"Inactive",size:"small",color:e.isActive?"success":"default"})]})]})})},e.id)})}),(0,_.jsxs)(p.A,{open:F,onClose:()=>z(!1),maxWidth:"md",fullWidth:!0,children:[(0,_.jsx)(m.A,{children:null!==P&&void 0!==P&&P.id?"Edit Template":"Create Template"}),(0,_.jsx)(A.A,{children:(0,_.jsxs)(s.A,{sx:{pt:2},children:[(0,_.jsx)(x.A,{fullWidth:!0,label:"Template Name",value:(null===P||void 0===P?void 0:P.name)||"",onChange:e=>D((0,i.A)((0,i.A)({},P),{},{name:e.target.value})),sx:{mb:2}}),(0,_.jsx)(x.A,{fullWidth:!0,label:"Description",value:(null===P||void 0===P?void 0:P.description)||"",onChange:e=>D((0,i.A)((0,i.A)({},P),{},{description:e.target.value})),multiline:!0,rows:2,sx:{mb:2}}),(0,_.jsxs)(C.A,{fullWidth:!0,sx:{mb:2},children:[(0,_.jsx)(b.A,{children:"Area"}),(0,_.jsx)(v.A,{value:(null===P||void 0===P?void 0:P.area)||"CUSTOM",onChange:e=>{const l=e.target.value;D((0,i.A)((0,i.A)({},P),{},{area:l})),window.confirm("Load default items for this area?")&&(e=>{let l=[];switch(e){case"KENNEL_CHECKIN":l=B;break;case"KENNEL_CHECKOUT":l=M;break;case"GROOMING":l=U;break;case"DAILY_FACILITY":l=L}if(l.length>0&&P){const e=l.map((e,l)=>(0,i.A)((0,i.A)({},e),{},{id:"item-".concat(l+1)}));D((0,i.A)((0,i.A)({},P),{},{items:e}))}})(l)},children:G.map(e=>(0,_.jsx)(y.A,{value:e.value,children:e.label},e.value))})]}),(0,_.jsx)(x.A,{fullWidth:!0,type:"number",label:"Estimated Minutes",value:(null===P||void 0===P?void 0:P.estimatedMinutes)||15,onChange:e=>D((0,i.A)((0,i.A)({},P),{},{estimatedMinutes:parseInt(e.target.value)})),sx:{mb:2}}),(0,_.jsx)(j.A,{control:(0,_.jsx)(g.A,{checked:!1!==(null===P||void 0===P?void 0:P.isActive),onChange:e=>D((0,i.A)((0,i.A)({},P),{},{isActive:e.target.checked}))}),label:"Active",sx:{mb:2}}),(0,_.jsx)(f.A,{sx:{my:2}}),(0,_.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,_.jsx)(r.A,{variant:"h6",children:"Checklist Items"}),(0,_.jsx)(n.A,{startIcon:(0,_.jsx)(q.A,{}),onClick:()=>{var e;Z({order:((null===P||void 0===P||null===(e=P.items)||void 0===e?void 0:e.length)||0)+1,label:"",type:"CHECKBOX",isRequired:!1}),ee(null),J(!0)},children:"Add Item"})]}),null!==P&&void 0!==P&&P.items&&P.items.length>0?(0,_.jsx)(E.A,{children:P.items.map((e,l)=>{var t;return(0,_.jsxs)(R.Ay,{divider:!0,children:[(0,_.jsx)(K.A,{sx:{mr:1,color:"text.secondary"}}),(0,_.jsx)(T.A,{primary:e.label,secondary:"".concat(null===(t=V.find(l=>l.value===e.type))||void 0===t?void 0:t.label).concat(e.isRequired?" (Required)":"")}),(0,_.jsxs)(k.A,{children:[(0,_.jsx)(h.A,{size:"small",onClick:()=>te(l,"up"),disabled:0===l,children:(0,_.jsx)(S.A,{})}),(0,_.jsx)(h.A,{size:"small",onClick:()=>te(l,"down"),disabled:l===P.items.length-1,children:(0,_.jsx)(X.A,{})}),(0,_.jsx)(h.A,{size:"small",onClick:()=>((e,l)=>{Z((0,i.A)({},e)),ee(l),J(!0)})(e,l),children:(0,_.jsx)(H.A,{})}),(0,_.jsx)(h.A,{size:"small",onClick:()=>(e=>{if(!P)return;const l=[...P.items||[]];l.splice(e,1),D((0,i.A)((0,i.A)({},P),{},{items:l}))})(l),children:(0,_.jsx)(w.A,{})})]})]},l)})}):(0,_.jsx)(I.A,{severity:"info",children:'No items added yet. Click "Add Item" to get started.'})]})}),(0,_.jsxs)(O.A,{children:[(0,_.jsx)(n.A,{onClick:()=>z(!1),children:"Cancel"}),(0,_.jsx)(n.A,{onClick:async()=>{if(P)try{const e="http://localhost:4004",l=P.id?"".concat(e,"/api/checklists/templates/").concat(P.id):"".concat(e,"/api/checklists/templates"),t=P.id?"PUT":"POST",i=await fetch(l,{method:t,headers:{"Content-Type":"application/json","x-tenant-id":localStorage.getItem("tailtown_tenant_id")||localStorage.getItem("tenantId")||"dev"},body:JSON.stringify(P)});if(!i.ok){const e=await i.json();return console.error("Server error:",e),void alert("Failed to save template: ".concat(e.message||"Unknown error"))}z(!1),D(null),le()}catch(e){console.error("Failed to save template:",e),alert("Failed to save template. Check console for details.")}},variant:"contained",children:"Save Template"})]})]}),(0,_.jsxs)(p.A,{open:Y,onClose:()=>J(!1),maxWidth:"sm",fullWidth:!0,children:[(0,_.jsx)(m.A,{children:null!==$?"Edit Item":"Add Item"}),(0,_.jsx)(A.A,{children:(0,_.jsxs)(s.A,{sx:{pt:2},children:[(0,_.jsx)(x.A,{fullWidth:!0,label:"Item Label",value:(null===Q||void 0===Q?void 0:Q.label)||"",onChange:e=>Z((0,i.A)((0,i.A)({},Q),{},{label:e.target.value})),sx:{mb:2}}),(0,_.jsx)(x.A,{fullWidth:!0,label:"Description (optional)",value:(null===Q||void 0===Q?void 0:Q.description)||"",onChange:e=>Z((0,i.A)((0,i.A)({},Q),{},{description:e.target.value})),multiline:!0,rows:2,sx:{mb:2}}),(0,_.jsxs)(C.A,{fullWidth:!0,sx:{mb:2},children:[(0,_.jsx)(b.A,{children:"Item Type"}),(0,_.jsx)(v.A,{value:(null===Q||void 0===Q?void 0:Q.type)||"CHECKBOX",onChange:e=>Z((0,i.A)((0,i.A)({},Q),{},{type:e.target.value})),children:V.map(e=>(0,_.jsx)(y.A,{value:e.value,children:e.label},e.value))})]}),(0,_.jsx)(j.A,{control:(0,_.jsx)(g.A,{checked:(null===Q||void 0===Q?void 0:Q.isRequired)||!1,onChange:e=>Z((0,i.A)((0,i.A)({},Q),{},{isRequired:e.target.checked}))}),label:"Required"})]})}),(0,_.jsxs)(O.A,{children:[(0,_.jsx)(n.A,{onClick:()=>J(!1),children:"Cancel"}),(0,_.jsx)(n.A,{onClick:()=>{if(!Q||!P)return;const e=[...P.items||[]];null!==$?e[$]=Q:e.push(Q),D((0,i.A)((0,i.A)({},P),{},{items:e})),J(!1),Z(null),ee(null)},variant:"contained",children:"Save Item"})]})]})]})}}}]);