"use strict";(self.webpackChunktailtown_frontend=self.webpackChunktailtown_frontend||[]).push([[1473],{81473:(e,s,r)=>{r.r(s),r.d(s,{default:()=>W});var t=r(9950),n=r(28429),i=r(62999),a=r(78317),c=r(82053),o=r(10226),l=r(60899),d=r(48089),x=r(50704),h=r(83337),m=r(72541),A=r(38517),j=r(28105),y=r(69207),u=r(46639),v=r(65429),g=r(25333),b=r(25277),p=r(83274),f=r(66699),w=r(11227),R=r(95699),C=r(99905),S=r(29240),T=r(99530),I=r(21584),k=r(56218),M=r(87640),U=r(82932),D=r(44414);const z=()=>{const[e,s]=(0,t.useState)(null),[r,n]=(0,t.useState)(!0),[i,o]=(0,t.useState)(null),[h,m]=(0,t.useState)(new Date),A=async()=>{try{o(null);const e=await U.Ay.get("/api/system/health");s(e.data),m(new Date)}catch(t){var e,r;o((null===(e=t.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||"Failed to fetch health metrics"),console.error("Health check error:",t)}finally{n(!1)}};(0,t.useEffect)(()=>{A();const e=setInterval(A,3e4);return()=>clearInterval(e)},[]);const j=e=>{switch(e){case"healthy":case"up":case"connected":return"success";case"degraded":return"warning";default:return"error"}},y=e=>{switch(e){case"healthy":case"up":case"connected":return(0,D.jsx)(w.A,{color:"success"});case"degraded":return(0,D.jsx)(R.A,{color:"warning"});default:return(0,D.jsx)(C.A,{color:"error"})}},z=e=>{const s=Math.floor(e/86400),r=Math.floor(e%86400/3600),t=Math.floor(e%3600/60);return s>0?"".concat(s,"d ").concat(r,"h"):r>0?"".concat(r,"h ").concat(t,"m"):"".concat(t,"m")};return r?(0,D.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400},children:(0,D.jsx)(u.A,{})}):i?(0,D.jsxs)(v.A,{severity:"error",sx:{mb:2},children:[i,(0,D.jsx)(g.A,{size:"small",onClick:A,sx:{ml:2},children:(0,D.jsx)(S.A,{})})]}):e?(0,D.jsxs)(a.A,{children:[(0,D.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,D.jsxs)(a.A,{children:[(0,D.jsx)(c.A,{variant:"h5",gutterBottom:!0,children:"System Health Dashboard"}),(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Last updated: ",h.toLocaleTimeString()]})]}),(0,D.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,D.jsx)(b.A,{icon:y(e.status||"healthy"),label:(e.status||"healthy").toUpperCase(),color:j(e.status||"healthy"),size:"medium"}),(0,D.jsx)(p.A,{title:"Refresh",children:(0,D.jsx)(g.A,{onClick:A,color:"primary",children:(0,D.jsx)(S.A,{})})})]})]}),(0,D.jsxs)(l.Ay,{container:!0,spacing:3,sx:{mb:3},children:[(0,D.jsx)(l.Ay,{item:!0,xs:12,md:6,lg:3,children:(0,D.jsx)(d.A,{children:(0,D.jsxs)(x.A,{children:[(0,D.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[y(e.services.customer.status),(0,D.jsx)(c.A,{variant:"h6",sx:{ml:1},children:"Customer Service"})]}),(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Status: ",(0,D.jsx)("strong",{children:e.services.customer.status})]}),(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Uptime: ",z(e.services.customer.uptime)]}),void 0!==e.services.customer.responseTime&&(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Response: ",e.services.customer.responseTime,"ms"]})]})})}),(0,D.jsx)(l.Ay,{item:!0,xs:12,md:6,lg:3,children:(0,D.jsx)(d.A,{children:(0,D.jsxs)(x.A,{children:[(0,D.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[y(e.services.reservation.status),(0,D.jsx)(c.A,{variant:"h6",sx:{ml:1},children:"Reservation Service"})]}),(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Status: ",(0,D.jsx)("strong",{children:e.services.reservation.status})]}),(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Uptime: ",z(e.services.reservation.uptime)]}),void 0!==e.services.reservation.responseTime&&(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Response: ",e.services.reservation.responseTime,"ms"]})]})})}),(0,D.jsx)(l.Ay,{item:!0,xs:12,md:6,lg:3,children:(0,D.jsx)(d.A,{children:(0,D.jsxs)(x.A,{children:[(0,D.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,D.jsx)(T.A,{color:j(e.services.database.status)}),(0,D.jsx)(c.A,{variant:"h6",sx:{ml:1},children:"Database"})]}),(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Status: ",(0,D.jsx)("strong",{children:e.services.database.status})]}),void 0!==e.services.database.activeConnections&&(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Connections: ",e.services.database.activeConnections]}),void 0!==e.services.database.responseTime&&(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Response: ",e.services.database.responseTime,"ms"]})]})})}),(0,D.jsx)(l.Ay,{item:!0,xs:12,md:6,lg:3,children:(0,D.jsx)(d.A,{children:(0,D.jsxs)(x.A,{children:[(0,D.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,D.jsx)(I.A,{color:j(e.services.cache.status)}),(0,D.jsx)(c.A,{variant:"h6",sx:{ml:1},children:"Redis Cache"})]}),(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Status: ",(0,D.jsx)("strong",{children:e.services.cache.status})]}),void 0!==e.services.cache.hitRate&&(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Hit Rate: ",(100*e.services.cache.hitRate).toFixed(1),"%"]}),e.services.cache.memoryUsage&&(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Memory: ",e.services.cache.memoryUsage]})]})})})]}),(0,D.jsxs)(l.Ay,{container:!0,spacing:3,sx:{mb:3},children:[(0,D.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,D.jsx)(d.A,{children:(0,D.jsxs)(x.A,{children:[(0,D.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,D.jsx)(k.A,{color:"primary"}),(0,D.jsx)(c.A,{variant:"h6",sx:{ml:1},children:"Memory Usage"})]}),(0,D.jsxs)(a.A,{sx:{mb:1},children:[(0,D.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:[e.system.memory.used," / ",e.system.memory.total]}),(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:[e.system.memory.percentage,"%"]})]}),(0,D.jsx)(f.A,{variant:"determinate",value:e.system.memory.percentage,color:e.system.memory.percentage>80?"error":e.system.memory.percentage>60?"warning":"success",sx:{height:8,borderRadius:1}})]})]})})}),(0,D.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,D.jsx)(d.A,{children:(0,D.jsxs)(x.A,{children:[(0,D.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,D.jsx)(M.A,{color:"primary"}),(0,D.jsx)(c.A,{variant:"h6",sx:{ml:1},children:"CPU Usage"})]}),(0,D.jsxs)(a.A,{sx:{mb:1},children:[(0,D.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:[e.system.cpu.cores," cores"]}),(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:[e.system.cpu.usage,"%"]})]}),(0,D.jsx)(f.A,{variant:"determinate",value:e.system.cpu.usage,color:e.system.cpu.usage>80?"error":e.system.cpu.usage>60?"warning":"success",sx:{height:8,borderRadius:1}})]}),(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["System uptime: ",z(e.system.uptime)]})]})})})]}),(0,D.jsx)(d.A,{children:(0,D.jsxs)(x.A,{children:[(0,D.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Performance Metrics"}),(0,D.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,D.jsx)(l.Ay,{item:!0,xs:12,sm:4,children:(0,D.jsxs)(a.A,{sx:{textAlign:"center",p:2,bgcolor:"primary.light",borderRadius:1},children:[(0,D.jsx)(c.A,{variant:"h4",color:"primary.main",children:e.metrics.activeTenants}),(0,D.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Active Tenants"})]})}),void 0!==e.metrics.totalRequests&&(0,D.jsx)(l.Ay,{item:!0,xs:12,sm:4,children:(0,D.jsxs)(a.A,{sx:{textAlign:"center",p:2,bgcolor:"success.light",borderRadius:1},children:[(0,D.jsx)(c.A,{variant:"h4",color:"success.main",children:e.metrics.totalRequests.toLocaleString()}),(0,D.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Total Requests"})]})}),void 0!==e.metrics.averageResponseTime&&(0,D.jsx)(l.Ay,{item:!0,xs:12,sm:4,children:(0,D.jsxs)(a.A,{sx:{textAlign:"center",p:2,bgcolor:"info.light",borderRadius:1},children:[(0,D.jsxs)(c.A,{variant:"h4",color:"info.main",children:[e.metrics.averageResponseTime,"ms"]}),(0,D.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Avg Response Time"})]})})]})]})})]}):(0,D.jsx)(v.A,{severity:"info",children:"No health data available"})},W=()=>{const e=(0,n.Zp)(),{superAdmin:s,logout:r}=(0,y.W)();return(0,D.jsxs)(i.A,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,D.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[(0,D.jsxs)(a.A,{children:[(0,D.jsx)(c.A,{variant:"h4",gutterBottom:!0,children:"Super Admin Dashboard"}),(0,D.jsxs)(c.A,{variant:"body1",color:"text.secondary",children:["Welcome back, ",(null===s||void 0===s?void 0:s.firstName)||(null===s||void 0===s?void 0:s.email)]})]}),(0,D.jsx)(o.A,{variant:"outlined",startIcon:(0,D.jsx)(h.A,{}),onClick:async()=>{await r(),e("/super-admin/login")},children:"Logout"})]}),(0,D.jsxs)(l.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,D.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,D.jsx)(d.A,{children:(0,D.jsxs)(x.A,{children:[(0,D.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,D.jsx)(m.A,{sx:{fontSize:40,color:"primary.main",mr:2}}),(0,D.jsxs)(a.A,{children:[(0,D.jsx)(c.A,{variant:"h6",children:"Tenant Management"}),(0,D.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Manage tenant accounts"})]})]}),(0,D.jsx)(o.A,{variant:"contained",onClick:()=>e("/admin/tenants"),fullWidth:!0,children:"View Tenants"})]})})}),(0,D.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,D.jsx)(d.A,{children:(0,D.jsxs)(x.A,{children:[(0,D.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,D.jsx)(A.A,{sx:{fontSize:40,color:"success.main",mr:2}}),(0,D.jsxs)(a.A,{children:[(0,D.jsx)(c.A,{variant:"h6",children:"Platform Analytics"}),(0,D.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Multi-tenant statistics & insights"})]})]}),(0,D.jsx)(o.A,{variant:"contained",fullWidth:!0,onClick:()=>{const e="".concat(window.location.origin,"/analytics");window.open(e,"_blank")},children:"View Analytics"})]})})}),(0,D.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,D.jsx)(d.A,{children:(0,D.jsxs)(x.A,{children:[(0,D.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,D.jsx)(j.A,{sx:{fontSize:40,color:"info.main",mr:2}}),(0,D.jsxs)(a.A,{children:[(0,D.jsx)(c.A,{variant:"h6",children:"System Monitoring"}),(0,D.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Real-time performance metrics"})]})]}),(0,D.jsx)(o.A,{variant:"contained",color:"info",fullWidth:!0,onClick:()=>{window.open("http://129.212.178.244:4004/monitoring/dashboard","_blank")},children:"View Dashboard"})]})})})]}),(0,D.jsx)(d.A,{children:(0,D.jsxs)(x.A,{children:[(0,D.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Your Account"}),(0,D.jsxs)(a.A,{sx:{mt:2},children:[(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Email: ",null===s||void 0===s?void 0:s.email]}),(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Role: ",null===s||void 0===s?void 0:s.role]}),(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["ID: ",null===s||void 0===s?void 0:s.id]})]})]})}),(0,D.jsx)(a.A,{sx:{mt:4},children:(0,D.jsx)(z,{})}),(0,D.jsxs)(a.A,{sx:{mt:4,p:3,bgcolor:"success.light",borderRadius:1},children:[(0,D.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"\ud83d\ude80 Multi-Tenant Management System - Fully Operational!"}),(0,D.jsx)(c.A,{variant:"body2",sx:{mb:1},children:"\u2705 Super Admin Authentication \u2022 \u2705 Tenant Management \u2022 \u2705 Tenant Cloning \u2022 \u2705 Gingr Sync (Every 8 Hours)"}),(0,D.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Create tenants, clone from templates, and manage production accounts with automated Gingr synchronization."})]})]})}}}]);