"use strict";(self.webpackChunktailtown_frontend=self.webpackChunktailtown_frontend||[]).push([[2642],{22642:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var l=n(89379),a=n(9950),s=n(62999),i=n(78317),r=n(82053),c=n(10226),o=n(65429),d=n(2235),A=n(1320),h=n(15769),u=n(69780),x=n(9213),j=n(21671),p=n(34075),y=n(25277),g=n(25333),m=n(96583),v=n(40033),f=n(28170),D=n(8145),w=n(25979),C=n(19647),b=n(70006),S=n(23266),N=n(16497),I=n(37324),k=n(79739),R=n(99532),W=n(7999),O=n(57988),T=n(68734),E=n(44414);const L=()=>{const[e,t]=(0,a.useState)([]),[n,L]=(0,a.useState)(!1),[F,G]=(0,a.useState)(null),[M,U]=(0,a.useState)(!1),[z,H]=(0,a.useState)(null),[P,q]=(0,a.useState)({title:"",message:"",priority:"NORMAL",type:"INFO",startDate:(new Date).toISOString().split("T")[0],endDate:"",isActive:!0}),_=async()=>{U(!0),H(null);try{const e=await T.Ay.getAllAnnouncements();t(e)}catch(e){H("Failed to load announcements"),console.error(e)}finally{U(!1)}};(0,a.useEffect)(()=>{_()},[]);const B=e=>{e?(G(e),q({title:e.title,message:e.message,priority:e.priority,type:e.type,startDate:e.startDate.split("T")[0],endDate:e.endDate?e.endDate.split("T")[0]:"",isActive:e.isActive})):(G(null),q({title:"",message:"",priority:"NORMAL",type:"INFO",startDate:(new Date).toISOString().split("T")[0],endDate:"",isActive:!0})),L(!0)},J=()=>{L(!1),G(null),H(null)},K=e=>{switch(e){case"URGENT":return"error";case"HIGH":return"warning";case"NORMAL":return"primary";default:return"default"}},Q=e=>{switch(e){case"WARNING":return"warning";case"SUCCESS":return"success";case"ERROR":return"error";default:return"info"}};return(0,E.jsxs)(s.A,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,E.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,E.jsx)(r.A,{variant:"h4",component:"h1",children:"Announcement Manager"}),(0,E.jsx)(c.A,{variant:"contained",startIcon:(0,E.jsx)(R.A,{}),onClick:()=>B(),children:"New Announcement"})]}),z&&(0,E.jsx)(o.A,{severity:"error",sx:{mb:2},onClose:()=>H(null),children:z}),(0,E.jsx)(d.A,{children:(0,E.jsx)(A.A,{children:(0,E.jsxs)(h.A,{children:[(0,E.jsx)(u.A,{children:(0,E.jsxs)(x.A,{children:[(0,E.jsx)(j.A,{children:"Title"}),(0,E.jsx)(j.A,{children:"Priority"}),(0,E.jsx)(j.A,{children:"Type"}),(0,E.jsx)(j.A,{children:"Start Date"}),(0,E.jsx)(j.A,{children:"End Date"}),(0,E.jsx)(j.A,{children:"Status"}),(0,E.jsx)(j.A,{align:"right",children:"Actions"})]})}),(0,E.jsx)(p.A,{children:0===e.length?(0,E.jsx)(x.A,{children:(0,E.jsx)(j.A,{colSpan:7,align:"center",sx:{py:4},children:(0,E.jsx)(r.A,{variant:"body2",color:"text.secondary",children:"No announcements yet. Create your first announcement to get started."})})}):e.map(e=>(0,E.jsxs)(x.A,{children:[(0,E.jsxs)(j.A,{children:[(0,E.jsx)(r.A,{variant:"body2",sx:{fontWeight:500},children:e.title}),(0,E.jsxs)(r.A,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:[e.message.substring(0,60),e.message.length>60&&"..."]})]}),(0,E.jsx)(j.A,{children:(0,E.jsx)(y.A,{label:e.priority,color:K(e.priority),size:"small"})}),(0,E.jsx)(j.A,{children:(0,E.jsx)(y.A,{label:e.type,color:Q(e.type),size:"small",variant:"outlined"})}),(0,E.jsx)(j.A,{children:new Date(e.startDate).toLocaleDateString()}),(0,E.jsx)(j.A,{children:e.endDate?new Date(e.endDate).toLocaleDateString():"No expiration"}),(0,E.jsx)(j.A,{children:(0,E.jsx)(y.A,{label:e.isActive?"Active":"Inactive",color:e.isActive?"success":"default",size:"small"})}),(0,E.jsxs)(j.A,{align:"right",children:[(0,E.jsx)(g.A,{size:"small",onClick:()=>B(e),color:"primary",children:(0,E.jsx)(W.A,{})}),(0,E.jsx)(g.A,{size:"small",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this announcement?")){U(!0);try{await T.Ay.deleteAnnouncement(e),await _()}catch(t){H("Failed to delete announcement"),console.error(t)}finally{U(!1)}}})(e.id),color:"error",children:(0,E.jsx)(O.A,{})})]})]},e.id))})]})})}),(0,E.jsxs)(m.A,{open:n,onClose:J,maxWidth:"sm",fullWidth:!0,children:[(0,E.jsx)(v.A,{children:F?"Edit Announcement":"New Announcement"}),(0,E.jsx)(f.A,{children:(0,E.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[(0,E.jsx)(D.A,{label:"Title",value:P.title,onChange:e=>q((0,l.A)((0,l.A)({},P),{},{title:e.target.value})),fullWidth:!0,required:!0}),(0,E.jsx)(D.A,{label:"Message",value:P.message,onChange:e=>q((0,l.A)((0,l.A)({},P),{},{message:e.target.value})),fullWidth:!0,required:!0,multiline:!0,rows:4}),(0,E.jsxs)(i.A,{sx:{display:"flex",gap:2},children:[(0,E.jsxs)(w.A,{fullWidth:!0,children:[(0,E.jsx)(C.A,{children:"Priority"}),(0,E.jsxs)(b.A,{value:P.priority,label:"Priority",onChange:e=>q((0,l.A)((0,l.A)({},P),{},{priority:e.target.value})),children:[(0,E.jsx)(S.A,{value:"LOW",children:"Low"}),(0,E.jsx)(S.A,{value:"NORMAL",children:"Normal"}),(0,E.jsx)(S.A,{value:"HIGH",children:"High"}),(0,E.jsx)(S.A,{value:"URGENT",children:"Urgent"})]})]}),(0,E.jsxs)(w.A,{fullWidth:!0,children:[(0,E.jsx)(C.A,{children:"Type"}),(0,E.jsxs)(b.A,{value:P.type,label:"Type",onChange:e=>q((0,l.A)((0,l.A)({},P),{},{type:e.target.value})),children:[(0,E.jsx)(S.A,{value:"INFO",children:"Info"}),(0,E.jsx)(S.A,{value:"WARNING",children:"Warning"}),(0,E.jsx)(S.A,{value:"SUCCESS",children:"Success"}),(0,E.jsx)(S.A,{value:"ERROR",children:"Error"})]})]})]}),(0,E.jsxs)(i.A,{sx:{display:"flex",gap:2},children:[(0,E.jsx)(D.A,{label:"Start Date",type:"date",value:P.startDate,onChange:e=>q((0,l.A)((0,l.A)({},P),{},{startDate:e.target.value})),fullWidth:!0,InputLabelProps:{shrink:!0}}),(0,E.jsx)(D.A,{label:"End Date (Optional)",type:"date",value:P.endDate,onChange:e=>q((0,l.A)((0,l.A)({},P),{},{endDate:e.target.value})),fullWidth:!0,InputLabelProps:{shrink:!0},helperText:"Leave empty for no expiration"})]}),(0,E.jsx)(N.A,{control:(0,E.jsx)(I.A,{checked:P.isActive,onChange:e=>q((0,l.A)((0,l.A)({},P),{},{isActive:e.target.checked}))}),label:"Active"})]})}),(0,E.jsxs)(k.A,{children:[(0,E.jsx)(c.A,{onClick:J,children:"Cancel"}),(0,E.jsx)(c.A,{onClick:async()=>{if(P.title&&P.message){U(!0),H(null);try{F?await T.Ay.updateAnnouncement(F.id,P):await T.Ay.createAnnouncement(P),J(),await _()}catch(e){H("Failed to save announcement"),console.error(e)}finally{U(!1)}}else H("Title and message are required")},variant:"contained",disabled:M,children:F?"Update":"Create"})]})]})]})}}}]);