"use strict";(self.webpackChunktailtown_frontend=self.webpackChunktailtown_frontend||[]).push([[9532],{69532:(e,t,n)=>{n.r(t),n.d(t,{default:()=>te});var r=n(89379),s=n(80045),a=n(9950),i=n(78317),l=n(48089),c=n(50704),d=n(82053),o=n(25277),x=n(25713),h=n(10226),j=n(25333),A=n(62999),m=n(65429),u=n(2235),g=n(60899),p=n(25979),y=n(19647),v=n(70006),b=n(23266),f=n(8145),S=n(69019),w=n(84142),C=n(74924),k=n(38517),R=n(73753),T=n(60781),D=n(59943),B=n(46639),P=n(1320),I=n(15769),z=n(69780),F=n(9213),E=n(21671),M=n(34075),W=n(76299),G=n(82932);const L=async e=>{const t=Object.keys(e.data[0]||{}),n=[t.join(","),...e.data.map(e=>t.map(t=>JSON.stringify(e[t]||"")).join(","))].join("\n"),r=new Blob([n],{type:"text/csv"}),s=window.URL.createObjectURL(r),a=document.createElement("a");a.href=s,a.download="".concat(e.reportType,"_").concat((new Date).toISOString().split("T")[0],".csv"),a.click(),window.URL.revokeObjectURL(s)},O=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e),V=e=>"".concat(e.toFixed(2),"%");var N=n(44414);const q=()=>{var e,t,n,r,s;const[x,j]=(0,a.useState)("monthly"),[A,S]=(0,a.useState)((new Date).toISOString().split("T")[0]),[w,k]=(0,a.useState)((new Date).getFullYear()),[R,T]=(0,a.useState)((new Date).getMonth()+1),[D,q]=(0,a.useState)(!1),[U,Q]=(0,a.useState)(null),[Y,H]=(0,a.useState)(null);(0,a.useEffect)(()=>{_()},[x,A,w,R]);const _=async()=>{try{var e;let t;switch(q(!0),Q(null),x){case"daily":t=await(async e=>(await G.dr.get("/api/reports/sales/daily?date=".concat(e))).data)(A);break;case"monthly":t=await(async(e,t)=>(await G.dr.get("/api/reports/sales/monthly?year=".concat(e,"&month=").concat(t))).data)(w,R);break;case"ytd":t=await(async e=>(await G.dr.get("/api/reports/sales/ytd?year=".concat(e))).data)(w);break;case"top-customers":const e=(new Date).toISOString().split("T")[0],n=new Date((new Date).setMonth((new Date).getMonth()-1)).toISOString().split("T")[0];t=await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return(await G.dr.get("/api/reports/sales/top-customers?startDate=".concat(e,"&endDate=").concat(t,"&limit=").concat(n))).data}(n,e,10)}const n=(null===(e=t)||void 0===e?void 0:e.data)||t;H(n)}catch(r){var t,n;console.error("Error loading report:",r),Q((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to load report")}finally{q(!1)}};return(0,N.jsxs)(i.A,{children:[(0,N.jsxs)(i.A,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,N.jsxs)(d.A,{variant:"h5",children:[(0,N.jsx)(W.A,{sx:{mr:1,verticalAlign:"middle"}}),"Sales Reports"]}),(0,N.jsx)(h.A,{variant:"outlined",startIcon:(0,N.jsx)(C.A,{}),onClick:()=>{Y&&L(Y)},disabled:!Y||D,children:"Export CSV"})]}),(0,N.jsx)(u.A,{sx:{p:2,mb:3},children:(0,N.jsxs)(g.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsxs)(p.A,{fullWidth:!0,size:"small",children:[(0,N.jsx)(y.A,{children:"Report Period"}),(0,N.jsxs)(v.A,{value:x,label:"Report Period",onChange:e=>j(e.target.value),children:[(0,N.jsx)(b.A,{value:"daily",children:"Daily"}),(0,N.jsx)(b.A,{value:"monthly",children:"Monthly"}),(0,N.jsx)(b.A,{value:"ytd",children:"Year-to-Date"}),(0,N.jsx)(b.A,{value:"top-customers",children:"Top Customers"})]})]})}),"daily"===x&&(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsx)(f.A,{fullWidth:!0,size:"small",type:"date",label:"Date",value:A,onChange:e=>S(e.target.value),InputLabelProps:{shrink:!0}})}),("monthly"===x||"ytd"===x)&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:2,children:(0,N.jsx)(f.A,{fullWidth:!0,size:"small",type:"number",label:"Year",value:w,onChange:e=>k(parseInt(e.target.value)),inputProps:{min:2020,max:2030}})}),"monthly"===x&&(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:2,children:(0,N.jsxs)(p.A,{fullWidth:!0,size:"small",children:[(0,N.jsx)(y.A,{children:"Month"}),(0,N.jsx)(v.A,{value:R,label:"Month",onChange:e=>T(e.target.value),children:Array.from({length:12},(e,t)=>(0,N.jsx)(b.A,{value:t+1,children:new Date(2e3,t).toLocaleDateString("en-US",{month:"long"})},t+1))})]})})]}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:2,children:(0,N.jsx)(h.A,{fullWidth:!0,variant:"contained",onClick:_,disabled:D,children:D?(0,N.jsx)(B.A,{size:24}):"Generate"})})]})}),U&&(0,N.jsx)(m.A,{severity:"error",sx:{mb:3},children:U}),D&&(0,N.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",my:4},children:(0,N.jsx)(B.A,{})}),!D&&Y&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(g.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Total Revenue"}),(0,N.jsx)(d.A,{variant:"h4",children:O((null===(e=Y.summary)||void 0===e?void 0:e.totalRevenue)||0)})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Transactions"}),(0,N.jsx)(d.A,{variant:"h4",children:(null===(t=Y.summary)||void 0===t?void 0:t.totalTransactions)||0})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Avg Transaction"}),(0,N.jsx)(d.A,{variant:"h4",children:O((null===(n=Y.summary)||void 0===n?void 0:n.averageTransaction)||0)})]})})})]}),(null===(r=Y.data)||void 0===r?void 0:r.serviceBreakdown)&&Y.data.serviceBreakdown.length>0&&(0,N.jsxs)(u.A,{sx:{p:2,mb:3},children:[(0,N.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"Sales by Service"}),(0,N.jsx)(P.A,{children:(0,N.jsxs)(I.A,{size:"small",children:[(0,N.jsx)(z.A,{children:(0,N.jsxs)(F.A,{children:[(0,N.jsx)(E.A,{children:"Service"}),(0,N.jsx)(E.A,{children:"Type"}),(0,N.jsx)(E.A,{align:"right",children:"Count"}),(0,N.jsx)(E.A,{align:"right",children:"Revenue"}),(0,N.jsx)(E.A,{align:"right",children:"% of Total"})]})}),(0,N.jsx)(M.A,{children:Y.data.serviceBreakdown.map((e,t)=>(0,N.jsxs)(F.A,{children:[(0,N.jsx)(E.A,{children:e.serviceName}),(0,N.jsx)(E.A,{children:(0,N.jsx)(o.A,{label:e.serviceType,size:"small"})}),(0,N.jsx)(E.A,{align:"right",children:e.count}),(0,N.jsx)(E.A,{align:"right",children:O(e.revenue)}),(0,N.jsx)(E.A,{align:"right",children:V(e.percentage)})]},t))})]})})]}),(null===(s=Y.data)||void 0===s?void 0:s.paymentMethodBreakdown)&&Y.data.paymentMethodBreakdown.length>0&&(0,N.jsxs)(u.A,{sx:{p:2,mb:3},children:[(0,N.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"Sales by Payment Method"}),(0,N.jsx)(P.A,{children:(0,N.jsxs)(I.A,{size:"small",children:[(0,N.jsx)(z.A,{children:(0,N.jsxs)(F.A,{children:[(0,N.jsx)(E.A,{children:"Payment Method"}),(0,N.jsx)(E.A,{align:"right",children:"Count"}),(0,N.jsx)(E.A,{align:"right",children:"Amount"}),(0,N.jsx)(E.A,{align:"right",children:"% of Total"})]})}),(0,N.jsx)(M.A,{children:Y.data.paymentMethodBreakdown.map((e,t)=>(0,N.jsxs)(F.A,{children:[(0,N.jsx)(E.A,{children:e.method}),(0,N.jsx)(E.A,{align:"right",children:e.count}),(0,N.jsx)(E.A,{align:"right",children:O(e.amount)}),(0,N.jsx)(E.A,{align:"right",children:V(e.percentage)})]},t))})]})})]}),"top-customers"===x&&Array.isArray(Y.data)&&(0,N.jsxs)(u.A,{sx:{p:2},children:[(0,N.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"Top Customers by Revenue"}),(0,N.jsx)(P.A,{children:(0,N.jsxs)(I.A,{size:"small",children:[(0,N.jsx)(z.A,{children:(0,N.jsxs)(F.A,{children:[(0,N.jsx)(E.A,{children:"Customer"}),(0,N.jsx)(E.A,{align:"right",children:"Total Spent"}),(0,N.jsx)(E.A,{align:"right",children:"Transactions"}),(0,N.jsx)(E.A,{align:"right",children:"Avg Transaction"}),(0,N.jsx)(E.A,{children:"Last Visit"})]})}),(0,N.jsx)(M.A,{children:Y.data.map((e,t)=>(0,N.jsxs)(F.A,{children:[(0,N.jsx)(E.A,{children:e.customerName}),(0,N.jsx)(E.A,{align:"right",children:O(e.totalSpent)}),(0,N.jsx)(E.A,{align:"right",children:e.transactionCount}),(0,N.jsx)(E.A,{align:"right",children:O(e.averageTransaction)}),(0,N.jsx)(E.A,{children:e.lastVisit})]},t))})]})})]})]})]})};var U=n(68515);const Q=()=>{var e,t,n,r,s,x,j,A,S;const[w,k]=(0,a.useState)("monthly"),[R,T]=(0,a.useState)((new Date).getFullYear()),[D,W]=(0,a.useState)((new Date).getMonth()+1),[q,Q]=(0,a.useState)(Math.floor((new Date).getMonth()/3)+1),[Y,H]=(0,a.useState)(!1),[_,J]=(0,a.useState)(null),[K,X]=(0,a.useState)(null);(0,a.useEffect)(()=>{Z()},[w,R,D,q]);const Z=async()=>{try{var e;let t;switch(H(!0),J(null),w){case"monthly":t=await(async(e,t)=>(await G.dr.get("/api/reports/tax/monthly?year=".concat(e,"&month=").concat(t))).data)(R,D);break;case"quarterly":t=await(async(e,t)=>(await G.dr.get("/api/reports/tax/quarterly?year=".concat(e,"&quarter=").concat(t))).data)(R,q);break;case"annual":t=await(async e=>(await G.dr.get("/api/reports/tax/annual?year=".concat(e))).data)(R)}const n=(null===(e=t)||void 0===e?void 0:e.data)||t;X(n)}catch(r){var t,n;console.error("Error loading tax report:",r),J((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to load tax report")}finally{H(!1)}};return(0,N.jsxs)(i.A,{children:[(0,N.jsxs)(i.A,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,N.jsxs)(d.A,{variant:"h5",children:[(0,N.jsx)(U.A,{sx:{mr:1,verticalAlign:"middle"}}),"Tax Reports"]}),(0,N.jsx)(h.A,{variant:"outlined",startIcon:(0,N.jsx)(C.A,{}),onClick:()=>{K&&L(K)},disabled:!K||Y,children:"Export CSV"})]}),(0,N.jsx)(u.A,{sx:{p:2,mb:3},children:(0,N.jsxs)(g.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsxs)(p.A,{fullWidth:!0,size:"small",children:[(0,N.jsx)(y.A,{children:"Report Period"}),(0,N.jsxs)(v.A,{value:w,label:"Report Period",onChange:e=>k(e.target.value),children:[(0,N.jsx)(b.A,{value:"monthly",children:"Monthly"}),(0,N.jsx)(b.A,{value:"quarterly",children:"Quarterly"}),(0,N.jsx)(b.A,{value:"annual",children:"Annual"})]})]})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:2,children:(0,N.jsx)(f.A,{fullWidth:!0,size:"small",type:"number",label:"Year",value:R,onChange:e=>T(parseInt(e.target.value)),inputProps:{min:2020,max:2030}})}),"monthly"===w&&(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsxs)(p.A,{fullWidth:!0,size:"small",children:[(0,N.jsx)(y.A,{children:"Month"}),(0,N.jsx)(v.A,{value:D,label:"Month",onChange:e=>W(e.target.value),children:Array.from({length:12},(e,t)=>(0,N.jsx)(b.A,{value:t+1,children:new Date(2e3,t).toLocaleDateString("en-US",{month:"long"})},t+1))})]})}),"quarterly"===w&&(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:2,children:(0,N.jsxs)(p.A,{fullWidth:!0,size:"small",children:[(0,N.jsx)(y.A,{children:"Quarter"}),(0,N.jsxs)(v.A,{value:q,label:"Quarter",onChange:e=>Q(e.target.value),children:[(0,N.jsx)(b.A,{value:1,children:"Q1"}),(0,N.jsx)(b.A,{value:2,children:"Q2"}),(0,N.jsx)(b.A,{value:3,children:"Q3"}),(0,N.jsx)(b.A,{value:4,children:"Q4"})]})]})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:2,children:(0,N.jsx)(h.A,{fullWidth:!0,variant:"contained",onClick:Z,disabled:Y,children:Y?(0,N.jsx)(B.A,{size:24}):"Generate"})})]})}),_&&(0,N.jsx)(m.A,{severity:"error",sx:{mb:3},children:_}),Y&&(0,N.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",my:4},children:(0,N.jsx)(B.A,{})}),!Y&&K&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(g.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Total Revenue"}),(0,N.jsx)(d.A,{variant:"h5",children:O(((null===(e=K.summary)||void 0===e?void 0:e.taxableRevenue)||0)+((null===(t=K.summary)||void 0===t?void 0:t.nonTaxableRevenue)||0))})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Taxable Revenue"}),(0,N.jsx)(d.A,{variant:"h5",children:O((null===(n=K.summary)||void 0===n?void 0:n.taxableRevenue)||0)})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Tax Collected"}),(0,N.jsx)(d.A,{variant:"h5",color:"primary",children:O((null===(r=K.summary)||void 0===r?void 0:r.taxCollected)||0)})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Tax Rate"}),(0,N.jsx)(d.A,{variant:"h5",children:V((null===(s=K.summary)||void 0===s?void 0:s.taxRate)||(null===(x=K.summary)||void 0===x?void 0:x.averageTaxRate)||0)})]})})})]}),(null===(j=K.data)||void 0===j?void 0:j.breakdown)&&K.data.breakdown.length>0&&(0,N.jsxs)(u.A,{sx:{p:2,mb:3},children:[(0,N.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"Tax Breakdown by Category"}),(0,N.jsx)(P.A,{children:(0,N.jsxs)(I.A,{size:"small",children:[(0,N.jsx)(z.A,{children:(0,N.jsxs)(F.A,{children:[(0,N.jsx)(E.A,{children:"Category"}),(0,N.jsx)(E.A,{align:"right",children:"Taxable Amount"}),(0,N.jsx)(E.A,{align:"right",children:"Non-Taxable Amount"}),(0,N.jsx)(E.A,{align:"right",children:"Tax Amount"}),(0,N.jsx)(E.A,{align:"right",children:"Tax Rate"})]})}),(0,N.jsx)(M.A,{children:K.data.breakdown.map((e,t)=>(0,N.jsxs)(F.A,{children:[(0,N.jsx)(E.A,{children:(0,N.jsx)(o.A,{label:e.category,size:"small"})}),(0,N.jsx)(E.A,{align:"right",children:O(e.taxableAmount)}),(0,N.jsx)(E.A,{align:"right",children:O(e.nonTaxableAmount)}),(0,N.jsx)(E.A,{align:"right",children:O(e.taxAmount)}),(0,N.jsx)(E.A,{align:"right",children:V(e.taxRate)})]},t))})]})})]}),(null===(A=K.data)||void 0===A?void 0:A.monthlyBreakdown)&&K.data.monthlyBreakdown.length>0&&(0,N.jsxs)(u.A,{sx:{p:2,mb:3},children:[(0,N.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"Monthly Breakdown"}),(0,N.jsx)(P.A,{children:(0,N.jsxs)(I.A,{size:"small",children:[(0,N.jsx)(z.A,{children:(0,N.jsxs)(F.A,{children:[(0,N.jsx)(E.A,{children:"Month"}),(0,N.jsx)(E.A,{align:"right",children:"Total Revenue"}),(0,N.jsx)(E.A,{align:"right",children:"Taxable Revenue"}),(0,N.jsx)(E.A,{align:"right",children:"Tax Collected"}),(0,N.jsx)(E.A,{align:"right",children:"Tax Rate"})]})}),(0,N.jsx)(M.A,{children:K.data.monthlyBreakdown.map((e,t)=>(0,N.jsxs)(F.A,{children:[(0,N.jsx)(E.A,{children:e.monthName}),(0,N.jsx)(E.A,{align:"right",children:O(e.totalRevenue)}),(0,N.jsx)(E.A,{align:"right",children:O(e.taxableRevenue)}),(0,N.jsx)(E.A,{align:"right",children:O(e.taxCollected)}),(0,N.jsx)(E.A,{align:"right",children:V(e.taxRate)})]},t))})]})})]}),(null===(S=K.data)||void 0===S?void 0:S.quarterlyBreakdown)&&K.data.quarterlyBreakdown.length>0&&(0,N.jsxs)(u.A,{sx:{p:2},children:[(0,N.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"Quarterly Breakdown"}),(0,N.jsx)(P.A,{children:(0,N.jsxs)(I.A,{size:"small",children:[(0,N.jsx)(z.A,{children:(0,N.jsxs)(F.A,{children:[(0,N.jsx)(E.A,{children:"Quarter"}),(0,N.jsx)(E.A,{align:"right",children:"Total Revenue"}),(0,N.jsx)(E.A,{align:"right",children:"Taxable Revenue"}),(0,N.jsx)(E.A,{align:"right",children:"Tax Collected"}),(0,N.jsx)(E.A,{align:"right",children:"Avg Tax Rate"})]})}),(0,N.jsx)(M.A,{children:K.data.quarterlyBreakdown.map((e,t)=>(0,N.jsxs)(F.A,{children:[(0,N.jsx)(E.A,{children:e.quarterName}),(0,N.jsx)(E.A,{align:"right",children:O(e.totalRevenue)}),(0,N.jsx)(E.A,{align:"right",children:O(e.taxableRevenue)}),(0,N.jsx)(E.A,{align:"right",children:O(e.taxCollected)}),(0,N.jsx)(E.A,{align:"right",children:V(e.averageTaxRate)})]},t))})]})})]})]})]})};var Y=n(76812);const H=()=>{var e,t,n;const[r,s]=(0,a.useState)("revenue"),[o,x]=(0,a.useState)(new Date((new Date).setMonth((new Date).getMonth()-1)).toISOString().split("T")[0]),[j,A]=(0,a.useState)((new Date).toISOString().split("T")[0]),[S,w]=(0,a.useState)(!1),[k,R]=(0,a.useState)(null),[T,D]=(0,a.useState)(null);return(0,N.jsxs)(i.A,{children:[(0,N.jsxs)(i.A,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,N.jsxs)(d.A,{variant:"h5",children:[(0,N.jsx)(Y.A,{sx:{mr:1,verticalAlign:"middle"}}),"Financial Reports"]}),(0,N.jsx)(h.A,{variant:"outlined",startIcon:(0,N.jsx)(C.A,{}),onClick:()=>{T&&L(T)},disabled:!T||S,children:"Export CSV"})]}),(0,N.jsx)(u.A,{sx:{p:2,mb:3},children:(0,N.jsxs)(g.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsxs)(p.A,{fullWidth:!0,size:"small",children:[(0,N.jsx)(y.A,{children:"Report Type"}),(0,N.jsxs)(v.A,{value:r,label:"Report Type",onChange:e=>s(e.target.value),children:[(0,N.jsx)(b.A,{value:"revenue",children:"Revenue"}),(0,N.jsx)(b.A,{value:"profit-loss",children:"Profit & Loss"}),(0,N.jsx)(b.A,{value:"outstanding",children:"Outstanding Balances"}),(0,N.jsx)(b.A,{value:"refunds",children:"Refunds"})]})]})}),"outstanding"!==r&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsx)(f.A,{fullWidth:!0,size:"small",type:"date",label:"Start Date",value:o,onChange:e=>x(e.target.value),InputLabelProps:{shrink:!0}})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsx)(f.A,{fullWidth:!0,size:"small",type:"date",label:"End Date",value:j,onChange:e=>A(e.target.value),InputLabelProps:{shrink:!0}})})]}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsx)(h.A,{fullWidth:!0,variant:"contained",onClick:async()=>{try{var e;let t;switch(w(!0),R(null),r){case"revenue":t=await(async(e,t)=>(await G.dr.get("/api/reports/financial/revenue?startDate=".concat(e,"&endDate=").concat(t))).data)(o,j);break;case"profit-loss":t=await(async(e,t)=>(await G.dr.get("/api/reports/financial/profit-loss?startDate=".concat(e,"&endDate=").concat(t))).data)(o,j);break;case"outstanding":t=await(async()=>(await G.dr.get("/api/reports/financial/outstanding")).data)();break;case"refunds":t=await(async(e,t)=>(await G.dr.get("/api/reports/financial/refunds?startDate=".concat(e,"&endDate=").concat(t))).data)(o,j)}const n=(null===(e=t)||void 0===e?void 0:e.data)||t;D(n)}catch(s){var t,n;console.error("Error loading report:",s),R((null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to load report")}finally{w(!1)}},disabled:S,children:"Generate Report"})})]})}),k&&(0,N.jsx)(m.A,{severity:"error",sx:{mb:3},children:k}),S&&(0,N.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",my:4},children:(0,N.jsx)(B.A,{})}),!S&&T&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(g.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Total Revenue"}),(0,N.jsx)(d.A,{variant:"h4",children:O((null===(e=T.summary)||void 0===e?void 0:e.totalRevenue)||0)})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Total Expenses"}),(0,N.jsx)(d.A,{variant:"h4",children:O((null===(t=T.summary)||void 0===t?void 0:t.totalExpenses)||0)})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Net Profit"}),(0,N.jsx)(d.A,{variant:"h4",children:O((null===(n=T.summary)||void 0===n?void 0:n.netProfit)||0)})]})})})]}),(0,N.jsx)(u.A,{children:(0,N.jsx)(P.A,{children:(0,N.jsxs)(I.A,{children:[(0,N.jsx)(z.A,{children:(0,N.jsxs)(F.A,{children:[(0,N.jsx)(E.A,{children:"Date"}),(0,N.jsx)(E.A,{children:"Description"}),(0,N.jsx)(E.A,{align:"right",children:"Amount"})]})}),(0,N.jsx)(M.A,{children:T.data&&T.data.length>0?T.data.map((e,t)=>(0,N.jsxs)(F.A,{children:[(0,N.jsx)(E.A,{children:e.date||"-"}),(0,N.jsx)(E.A,{children:e.description||"-"}),(0,N.jsx)(E.A,{align:"right",children:O(e.amount||0)})]},t)):(0,N.jsx)(F.A,{children:(0,N.jsx)(E.A,{colSpan:3,align:"center",children:(0,N.jsx)(d.A,{color:"textSecondary",children:"No data available for the selected period"})})})})]})})})]}),!S&&!T&&!k&&(0,N.jsxs)(u.A,{sx:{p:4,textAlign:"center"},children:[(0,N.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"Financial Reports"}),(0,N.jsx)(d.A,{color:"textSecondary",children:'Select a report type and date range, then click "Generate Report" to view financial data.'})]})]})};var _=n(67920);const J=()=>{const[e,t]=(0,a.useState)("lifetime-value"),[n,r]=(0,a.useState)(new Date((new Date).setMonth((new Date).getMonth()-1)).toISOString().split("T")[0]),[s,x]=(0,a.useState)((new Date).toISOString().split("T")[0]),[j,A]=(0,a.useState)(90),[S,w]=(0,a.useState)(50),[k,R]=(0,a.useState)(!1),[T,D]=(0,a.useState)(null),[W,q]=(0,a.useState)(null);return(0,N.jsxs)(i.A,{children:[(0,N.jsxs)(i.A,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,N.jsxs)(d.A,{variant:"h5",children:[(0,N.jsx)(_.A,{sx:{mr:1,verticalAlign:"middle"}}),"Customer Reports"]}),(0,N.jsx)(h.A,{variant:"outlined",startIcon:(0,N.jsx)(C.A,{}),onClick:()=>{W&&L(W)},disabled:!W||k,children:"Export CSV"})]}),(0,N.jsx)(u.A,{sx:{p:2,mb:3},children:(0,N.jsxs)(g.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsxs)(p.A,{fullWidth:!0,size:"small",children:[(0,N.jsx)(y.A,{children:"Report Type"}),(0,N.jsxs)(v.A,{value:e,label:"Report Type",onChange:e=>t(e.target.value),children:[(0,N.jsx)(b.A,{value:"acquisition",children:"Customer Acquisition"}),(0,N.jsx)(b.A,{value:"retention",children:"Retention Rate"}),(0,N.jsx)(b.A,{value:"lifetime-value",children:"Lifetime Value"}),(0,N.jsx)(b.A,{value:"demographics",children:"Demographics"}),(0,N.jsx)(b.A,{value:"inactive",children:"Inactive Customers"})]})]})}),("acquisition"===e||"retention"===e)&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsx)(f.A,{fullWidth:!0,size:"small",type:"date",label:"Start Date",value:n,onChange:e=>r(e.target.value),InputLabelProps:{shrink:!0}})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsx)(f.A,{fullWidth:!0,size:"small",type:"date",label:"End Date",value:s,onChange:e=>x(e.target.value),InputLabelProps:{shrink:!0}})})]}),"lifetime-value"===e&&(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsx)(f.A,{fullWidth:!0,size:"small",type:"number",label:"Top Customers",value:S,onChange:e=>w(parseInt(e.target.value)),InputLabelProps:{shrink:!0}})}),"inactive"===e&&(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsx)(f.A,{fullWidth:!0,size:"small",type:"number",label:"Inactive Days",value:j,onChange:e=>A(parseInt(e.target.value)),InputLabelProps:{shrink:!0}})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsx)(h.A,{fullWidth:!0,variant:"contained",onClick:async()=>{try{var t;let r;switch(R(!0),D(null),e){case"acquisition":r=await(async(e,t)=>(await G.dr.get("/api/reports/customers/acquisition?startDate=".concat(e,"&endDate=").concat(t))).data)(n,s);break;case"retention":r=await(async(e,t)=>(await G.dr.get("/api/reports/customers/retention?startDate=".concat(e,"&endDate=").concat(t))).data)(n,s);break;case"lifetime-value":r=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return(await G.dr.get("/api/reports/customers/lifetime-value?limit=".concat(e))).data}(S);break;case"demographics":r=await(async()=>(await G.dr.get("/api/reports/customers/demographics")).data)();break;case"inactive":r=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90;return(await G.dr.get("/api/reports/customers/inactive?days=".concat(e))).data}(j)}const a=(null===(t=r)||void 0===t?void 0:t.data)||r;q(a)}catch(i){var r,a;console.error("Error loading report:",i),D((null===(r=i.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"Failed to load report")}finally{R(!1)}},disabled:k,children:"Generate Report"})})]})}),T&&(0,N.jsx)(m.A,{severity:"error",sx:{mb:3},children:T}),k&&(0,N.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",my:4},children:(0,N.jsx)(B.A,{})}),!k&&W&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(g.Ay,{container:!0,spacing:2,sx:{mb:3},children:(()=>{if(null===W||void 0===W||!W.summary)return null;switch(e){case"acquisition":return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"New Customers"}),(0,N.jsx)(d.A,{variant:"h4",children:W.summary.newCustomers||0})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Total Customers"}),(0,N.jsx)(d.A,{variant:"h4",children:W.summary.totalCustomers||0})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Growth Rate"}),(0,N.jsx)(d.A,{variant:"h4",children:V(W.summary.growthRate||0)})]})})})]});case"retention":return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Retention Rate"}),(0,N.jsx)(d.A,{variant:"h4",children:V(W.summary.retentionRate||0)})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Returning Customers"}),(0,N.jsx)(d.A,{variant:"h4",children:W.summary.returningCustomers||0})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Churn Rate"}),(0,N.jsx)(d.A,{variant:"h4",children:V(W.summary.churnRate||0)})]})})})]});case"lifetime-value":return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Average LTV"}),(0,N.jsx)(d.A,{variant:"h4",children:O(W.summary.averageLifetimeValue||0)})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Total LTV"}),(0,N.jsx)(d.A,{variant:"h4",children:O(W.summary.totalLifetimeValue||0)})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Top Customers"}),(0,N.jsx)(d.A,{variant:"h4",children:W.summary.totalCustomers||0})]})})})]});case"inactive":return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Inactive Customers"}),(0,N.jsx)(d.A,{variant:"h4",children:W.summary.inactiveCount||0})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Days Threshold"}),(0,N.jsx)(d.A,{variant:"h4",children:j})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Potential Revenue at Risk"}),(0,N.jsx)(d.A,{variant:"h4",children:O(W.summary.potentialRevenue||0)})]})})})]});default:return(0,N.jsx)(g.Ay,{item:!0,xs:12,children:(0,N.jsx)(l.A,{children:(0,N.jsx)(c.A,{children:(0,N.jsx)(d.A,{color:"textSecondary",children:"Select a report type to view summary"})})})})}})()}),(0,N.jsx)(u.A,{children:(0,N.jsx)(P.A,{children:(0,N.jsxs)(I.A,{children:[(0,N.jsx)(z.A,{children:(0,N.jsxs)(F.A,{children:[(0,N.jsx)(E.A,{children:"Customer Name"}),(0,N.jsx)(E.A,{children:"Email"}),"lifetime-value"===e&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(E.A,{align:"right",children:"Total Spent"}),(0,N.jsx)(E.A,{align:"right",children:"Visits"}),(0,N.jsx)(E.A,{align:"right",children:"Avg Transaction"})]}),"inactive"===e&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(E.A,{align:"right",children:"Last Visit"}),(0,N.jsx)(E.A,{align:"right",children:"Days Inactive"}),(0,N.jsx)(E.A,{align:"right",children:"Total Spent"})]})]})}),(0,N.jsx)(M.A,{children:W.data&&W.data.length>0?W.data.map((t,n)=>(0,N.jsxs)(F.A,{children:[(0,N.jsx)(E.A,{children:t.customerName||"-"}),(0,N.jsx)(E.A,{children:t.email||"-"}),"lifetime-value"===e&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(E.A,{align:"right",children:O(t.totalSpent||0)}),(0,N.jsx)(E.A,{align:"right",children:t.visits||0}),(0,N.jsx)(E.A,{align:"right",children:O(t.avgTransaction||0)})]}),"inactive"===e&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(E.A,{align:"right",children:t.lastVisit||"-"}),(0,N.jsx)(E.A,{align:"right",children:(0,N.jsx)(o.A,{label:"".concat(t.daysInactive||0," days"),color:t.daysInactive>180?"error":"warning",size:"small"})}),(0,N.jsx)(E.A,{align:"right",children:O(t.totalSpent||0)})]})]},n)):(0,N.jsx)(F.A,{children:(0,N.jsx)(E.A,{colSpan:6,align:"center",children:(0,N.jsx)(d.A,{color:"textSecondary",children:"No data available for the selected period"})})})})]})})})]}),!k&&!W&&!T&&(0,N.jsxs)(u.A,{sx:{p:4,textAlign:"center"},children:[(0,N.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"Customer Reports"}),(0,N.jsx)(d.A,{color:"textSecondary",children:'Select a report type and parameters, then click "Generate Report" to view customer analytics.'})]})]})};var K=n(66699),X=n(72541);const Z=()=>{const[e,t]=(0,a.useState)("resources"),[n,r]=(0,a.useState)(new Date((new Date).setMonth((new Date).getMonth()-1)).toISOString().split("T")[0]),[s,o]=(0,a.useState)((new Date).toISOString().split("T")[0]),[x,j]=(0,a.useState)(!1),[A,S]=(0,a.useState)(null),[w,k]=(0,a.useState)(null);return(0,N.jsxs)(i.A,{children:[(0,N.jsxs)(i.A,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,N.jsxs)(d.A,{variant:"h5",children:[(0,N.jsx)(X.A,{sx:{mr:1,verticalAlign:"middle"}}),"Operational Reports"]}),(0,N.jsx)(h.A,{variant:"outlined",startIcon:(0,N.jsx)(C.A,{}),onClick:()=>{w&&L(w)},disabled:!w||x,children:"Export CSV"})]}),(0,N.jsx)(u.A,{sx:{p:2,mb:3},children:(0,N.jsxs)(g.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsxs)(p.A,{fullWidth:!0,size:"small",children:[(0,N.jsx)(y.A,{children:"Report Type"}),(0,N.jsxs)(v.A,{value:e,label:"Report Type",onChange:e=>t(e.target.value),children:[(0,N.jsx)(b.A,{value:"staff",children:"Staff Performance"}),(0,N.jsx)(b.A,{value:"resources",children:"Resource Utilization"}),(0,N.jsx)(b.A,{value:"bookings",children:"Booking Patterns"}),(0,N.jsx)(b.A,{value:"capacity",children:"Capacity Analysis"})]})]})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsx)(f.A,{fullWidth:!0,size:"small",type:"date",label:"Start Date",value:n,onChange:e=>r(e.target.value),InputLabelProps:{shrink:!0}})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsx)(f.A,{fullWidth:!0,size:"small",type:"date",label:"End Date",value:s,onChange:e=>o(e.target.value),InputLabelProps:{shrink:!0}})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsx)(h.A,{fullWidth:!0,variant:"contained",onClick:async()=>{try{var t;let r;switch(j(!0),S(null),e){case"staff":r=await(async(e,t)=>(await G.dr.get("/api/reports/operations/staff?startDate=".concat(e,"&endDate=").concat(t))).data)(n,s);break;case"resources":r=await(async(e,t)=>(await G.dr.get("/api/reports/operations/resources?startDate=".concat(e,"&endDate=").concat(t))).data)(n,s);break;case"bookings":r=await(async(e,t)=>(await G.dr.get("/api/reports/operations/bookings?startDate=".concat(e,"&endDate=").concat(t))).data)(n,s);break;case"capacity":r=await(async(e,t)=>(await G.dr.get("/api/reports/operations/capacity?startDate=".concat(e,"&endDate=").concat(t))).data)(n,s)}const a=(null===(t=r)||void 0===t?void 0:t.data)||r;k(a)}catch(i){var r,a;console.error("Error loading report:",i),S((null===(r=i.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"Failed to load report")}finally{j(!1)}},disabled:x,children:"Generate Report"})})]})}),A&&(0,N.jsx)(m.A,{severity:"error",sx:{mb:3},children:A}),x&&(0,N.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",my:4},children:(0,N.jsx)(B.A,{})}),!x&&w&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(g.Ay,{container:!0,spacing:2,sx:{mb:3},children:(()=>{if(null===w||void 0===w||!w.summary)return null;switch(e){case"staff":return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Total Staff"}),(0,N.jsx)(d.A,{variant:"h4",children:w.summary.totalStaff||0})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Total Revenue"}),(0,N.jsx)(d.A,{variant:"h4",children:O(w.summary.totalRevenue||0)})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Services Completed"}),(0,N.jsx)(d.A,{variant:"h4",children:w.summary.totalServices||0})]})})})]});case"resources":return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Total Resources"}),(0,N.jsx)(d.A,{variant:"h4",children:w.summary.totalResources||0})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Average Utilization"}),(0,N.jsx)(d.A,{variant:"h4",children:V(w.summary.averageUtilization||0)})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Total Revenue"}),(0,N.jsx)(d.A,{variant:"h4",children:O(w.summary.totalRevenue||0)})]})})})]});case"bookings":return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Total Bookings"}),(0,N.jsx)(d.A,{variant:"h4",children:w.summary.totalBookings||0})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Peak Day"}),(0,N.jsx)(d.A,{variant:"h4",children:w.summary.peakDay||"-"})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Avg Daily Bookings"}),(0,N.jsx)(d.A,{variant:"h4",children:w.summary.avgDailyBookings||0})]})})})]});case"capacity":return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Average Capacity"}),(0,N.jsx)(d.A,{variant:"h4",children:V(w.summary.averageCapacity||0)})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Peak Capacity"}),(0,N.jsx)(d.A,{variant:"h4",children:V(w.summary.peakCapacity||0)})]})})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:4,children:(0,N.jsx)(l.A,{children:(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{color:"textSecondary",gutterBottom:!0,children:"Periods Analyzed"}),(0,N.jsx)(d.A,{variant:"h4",children:w.summary.periodsAnalyzed||0})]})})})]});default:return null}})()}),(0,N.jsx)(u.A,{children:(0,N.jsx)(P.A,{children:(0,N.jsxs)(I.A,{children:[(0,N.jsx)(z.A,{children:(0,N.jsxs)(F.A,{children:["staff"===e&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(E.A,{children:"Staff Name"}),(0,N.jsx)(E.A,{children:"Role"}),(0,N.jsx)(E.A,{align:"right",children:"Services"}),(0,N.jsx)(E.A,{align:"right",children:"Revenue"}),(0,N.jsx)(E.A,{align:"right",children:"Efficiency"})]}),"resources"===e&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(E.A,{children:"Resource Name"}),(0,N.jsx)(E.A,{children:"Type"}),(0,N.jsx)(E.A,{align:"right",children:"Utilization"}),(0,N.jsx)(E.A,{align:"right",children:"Hours Booked"}),(0,N.jsx)(E.A,{align:"right",children:"Revenue"})]}),"bookings"===e&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(E.A,{children:"Date/Period"}),(0,N.jsx)(E.A,{align:"right",children:"Bookings"}),(0,N.jsx)(E.A,{align:"right",children:"Peak Time"}),(0,N.jsx)(E.A,{align:"right",children:"Avg Duration"})]}),"capacity"===e&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(E.A,{children:"Date/Period"}),(0,N.jsx)(E.A,{align:"right",children:"Capacity Used"}),(0,N.jsx)(E.A,{align:"right",children:"Available"}),(0,N.jsx)(E.A,{align:"right",children:"Utilization"})]})]})}),(0,N.jsx)(M.A,{children:w.data&&w.data.length>0?w.data.map((t,n)=>(0,N.jsxs)(F.A,{children:["staff"===e&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(E.A,{children:t.staffName||"-"}),(0,N.jsx)(E.A,{children:t.role||"-"}),(0,N.jsx)(E.A,{align:"right",children:t.services||0}),(0,N.jsx)(E.A,{align:"right",children:O(t.revenue||0)}),(0,N.jsx)(E.A,{align:"right",children:(0,N.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,N.jsx)(K.A,{variant:"determinate",value:t.efficiency||0,sx:{flexGrow:1,height:8,borderRadius:1}}),(0,N.jsx)(d.A,{variant:"body2",children:V(t.efficiency||0)})]})})]}),"resources"===e&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(E.A,{children:t.resourceName||"-"}),(0,N.jsx)(E.A,{children:t.resourceType||"-"}),(0,N.jsx)(E.A,{align:"right",children:(0,N.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,N.jsx)(K.A,{variant:"determinate",value:t.utilization||0,sx:{flexGrow:1,height:8,borderRadius:1}}),(0,N.jsx)(d.A,{variant:"body2",children:V(t.utilization||0)})]})}),(0,N.jsx)(E.A,{align:"right",children:t.hoursBooked||0}),(0,N.jsx)(E.A,{align:"right",children:O(t.revenue||0)})]}),"bookings"===e&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(E.A,{children:t.period||"-"}),(0,N.jsx)(E.A,{align:"right",children:t.bookings||0}),(0,N.jsx)(E.A,{align:"right",children:t.peakTime||"-"}),(0,N.jsx)(E.A,{align:"right",children:t.avgDuration||"-"})]}),"capacity"===e&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(E.A,{children:t.period||"-"}),(0,N.jsx)(E.A,{align:"right",children:t.capacityUsed||0}),(0,N.jsx)(E.A,{align:"right",children:t.available||0}),(0,N.jsx)(E.A,{align:"right",children:(0,N.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,N.jsx)(K.A,{variant:"determinate",value:t.utilization||0,sx:{flexGrow:1,height:8,borderRadius:1}}),(0,N.jsx)(d.A,{variant:"body2",children:V(t.utilization||0)})]})})]})]},n)):(0,N.jsx)(F.A,{children:(0,N.jsx)(E.A,{colSpan:5,align:"center",children:(0,N.jsx)(d.A,{color:"textSecondary",children:"No data available for the selected period"})})})})]})})})]}),!x&&!w&&!A&&(0,N.jsxs)(u.A,{sx:{p:4,textAlign:"center"},children:[(0,N.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"Operational Reports"}),(0,N.jsx)(d.A,{color:"textSecondary",children:'Select a report type and date range, then click "Generate Report" to view operational metrics.'})]})]})},$=["children","value","index"];function ee(e){const{children:t,value:n,index:a}=e,l=(0,s.A)(e,$);return(0,N.jsx)("div",(0,r.A)((0,r.A)({role:"tabpanel",hidden:n!==a,id:"reports-tabpanel-".concat(a),"aria-labelledby":"reports-tab-".concat(a)},l),{},{children:n===a&&(0,N.jsx)(i.A,{sx:{p:3},children:t})}))}const te=()=>{const[e,t]=(0,a.useState)(0),[n,r]=(0,a.useState)("month"),[s,B]=(0,a.useState)("pdf"),P=e=>{alert("Exporting ".concat(e," report as ").concat(s.toUpperCase(),"..."))},I=e=>{let{title:t,description:n,icon:r,status:s="planned",onGenerate:a,onExport:A}=e;return(0,N.jsxs)(l.A,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,N.jsxs)(c.A,{sx:{flexGrow:1},children:[(0,N.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[r,(0,N.jsx)(d.A,{variant:"h6",sx:{ml:1},children:t}),(0,N.jsx)(i.A,{sx:{ml:"auto"},children:(0,N.jsx)(o.A,{label:"available"===s?"Available":"planned"===s?"Planned":"Coming Soon",color:"available"===s?"success":"planned"===s?"warning":"default",size:"small"})})]}),(0,N.jsx)(d.A,{variant:"body2",color:"text.secondary",children:n})]}),(0,N.jsxs)(x.A,{children:[(0,N.jsx)(h.A,{size:"small",onClick:a,disabled:"available"!==s,children:"Generate Report"}),(0,N.jsx)(j.A,{size:"small",onClick:A,disabled:"available"!==s,title:"Export Report",children:(0,N.jsx)(C.A,{})})]})]})};return(0,N.jsx)(A.A,{maxWidth:"xl",children:(0,N.jsxs)(i.A,{sx:{mt:4,mb:4},children:[(0,N.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,N.jsx)(k.A,{sx:{fontSize:40,mr:2,color:"primary.main"}}),(0,N.jsx)(d.A,{variant:"h4",component:"h1",children:"Reports & Analytics"})]}),(0,N.jsx)(m.A,{severity:"info",sx:{mb:3},children:(0,N.jsxs)(d.A,{variant:"body2",children:[(0,N.jsx)("strong",{children:"Demo Mode:"})," This reports page shows the planned comprehensive reporting system. Most reports are currently in development. The Sales Dashboard and Customer Value reports are available in the Analytics section."]})}),(0,N.jsxs)(u.A,{sx:{p:3,mb:3},children:[(0,N.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"Report Settings"}),(0,N.jsxs)(g.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsxs)(p.A,{fullWidth:!0,size:"small",children:[(0,N.jsx)(y.A,{children:"Date Range"}),(0,N.jsxs)(v.A,{value:n,label:"Date Range",onChange:e=>r(e.target.value),children:[(0,N.jsx)(b.A,{value:"day",children:"Today"}),(0,N.jsx)(b.A,{value:"week",children:"This Week"}),(0,N.jsx)(b.A,{value:"month",children:"This Month"}),(0,N.jsx)(b.A,{value:"month-to-date",children:"Month to Date"}),(0,N.jsx)(b.A,{value:"year-to-date",children:"Year to Date"}),(0,N.jsx)(b.A,{value:"year",children:"This Year"}),(0,N.jsx)(b.A,{value:"custom",children:"Custom Range"})]})]})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsxs)(p.A,{fullWidth:!0,size:"small",children:[(0,N.jsx)(y.A,{children:"Export Format"}),(0,N.jsxs)(v.A,{value:s,label:"Export Format",onChange:e=>B(e.target.value),children:[(0,N.jsx)(b.A,{value:"pdf",children:"PDF"}),(0,N.jsx)(b.A,{value:"csv",children:"CSV"}),(0,N.jsx)(b.A,{value:"excel",children:"Excel"})]})]})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsx)(f.A,{fullWidth:!0,size:"small",label:"Start Date",type:"date",InputLabelProps:{shrink:!0},disabled:"custom"!==n})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,sm:3,children:(0,N.jsx)(f.A,{fullWidth:!0,size:"small",label:"End Date",type:"date",InputLabelProps:{shrink:!0},disabled:"custom"!==n})})]})]}),(0,N.jsx)(i.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,N.jsxs)(S.A,{value:e,onChange:(e,n)=>{t(n)},"aria-label":"report categories",variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,sx:{"& .MuiTab-root":{minWidth:100,fontSize:"0.8rem",padding:"6px 8px"},"& .MuiTabs-flexContainer":{gap:.5}},children:[(0,N.jsx)(w.A,{label:"Sales"}),(0,N.jsx)(w.A,{label:"Financial"}),(0,N.jsx)(w.A,{label:"Customer"}),(0,N.jsx)(w.A,{label:"Pet"}),(0,N.jsx)(w.A,{label:"Marketing"}),(0,N.jsx)(w.A,{label:"Operations"}),(0,N.jsx)(w.A,{label:"Service"}),(0,N.jsx)(w.A,{label:"Tax"})]})}),(0,N.jsx)(ee,{value:e,index:0,children:(0,N.jsx)(q,{})}),(0,N.jsx)(ee,{value:e,index:1,children:(0,N.jsx)(H,{})}),(0,N.jsx)(ee,{value:e,index:2,children:(0,N.jsx)(J,{})}),(0,N.jsx)(ee,{value:e,index:3,children:(0,N.jsxs)(g.Ay,{container:!0,spacing:3,children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(I,{title:"Pet Demographics",description:"Pet population analysis by breed, age, size, and type distribution.",icon:(0,N.jsx)(R.A,{color:"primary"}),status:"planned",onGenerate:()=>P("Pet Demographics"),onExport:()=>P("Pet Demographics")})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(I,{title:"Breed Analysis",description:"Popular breeds, breed-specific service preferences, and health trends.",icon:(0,N.jsx)(R.A,{color:"primary"}),status:"planned",onGenerate:()=>P("Breed Analysis"),onExport:()=>P("Breed Analysis")})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(I,{title:"Health & Vaccination Tracking",description:"Vaccination status, health records, and compliance reporting.",icon:(0,N.jsx)(R.A,{color:"primary"}),status:"planned",onGenerate:()=>P("Health Tracking"),onExport:()=>P("Health Tracking")})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(I,{title:"Service Preferences by Pet",description:"Service usage patterns based on pet characteristics and preferences.",icon:(0,N.jsx)(R.A,{color:"primary"}),status:"planned",onGenerate:()=>P("Service Preferences"),onExport:()=>P("Service Preferences")})})]})}),(0,N.jsx)(ee,{value:e,index:4,children:(0,N.jsxs)(g.Ay,{container:!0,spacing:3,children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(I,{title:"Campaign Effectiveness",description:"Marketing campaign performance, ROI analysis, and conversion tracking.",icon:(0,N.jsx)(T.A,{color:"primary"}),status:"planned",onGenerate:()=>P("Campaign Effectiveness"),onExport:()=>P("Campaign Effectiveness")})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(I,{title:"Referral Source Analysis",description:"Customer referral sources, referral program performance, and attribution.",icon:(0,N.jsx)(T.A,{color:"primary"}),status:"planned",onGenerate:()=>P("Referral Analysis"),onExport:()=>P("Referral Analysis")})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(I,{title:"Seasonal Trends",description:"Seasonal booking patterns, demand forecasting, and capacity planning.",icon:(0,N.jsx)(T.A,{color:"primary"}),status:"planned",onGenerate:()=>P("Seasonal Trends"),onExport:()=>P("Seasonal Trends")})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(I,{title:"Promotional Analysis",description:"Coupon usage, discount effectiveness, and promotional campaign results.",icon:(0,N.jsx)(T.A,{color:"primary"}),status:"planned",onGenerate:()=>P("Promotional Analysis"),onExport:()=>P("Promotional Analysis")})})]})}),(0,N.jsx)(ee,{value:e,index:5,children:(0,N.jsx)(Z,{})}),(0,N.jsx)(ee,{value:e,index:6,children:(0,N.jsxs)(g.Ay,{container:!0,spacing:3,children:[(0,N.jsx)(g.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(I,{title:"Popular Services",description:"Most requested services, service popularity trends, and demand analysis.",icon:(0,N.jsx)(D.A,{color:"primary"}),status:"planned",onGenerate:()=>P("Popular Services"),onExport:()=>P("Popular Services")})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(I,{title:"Add-On Performance",description:"Add-on service uptake, revenue contribution, and upselling effectiveness.",icon:(0,N.jsx)(D.A,{color:"primary"}),status:"planned",onGenerate:()=>P("Add-On Performance"),onExport:()=>P("Add-On Performance")})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(I,{title:"Pricing Analysis",description:"Service pricing optimization, price sensitivity analysis, and revenue per service.",icon:(0,N.jsx)(D.A,{color:"primary"}),status:"planned",onGenerate:()=>P("Pricing Analysis"),onExport:()=>P("Pricing Analysis")})}),(0,N.jsx)(g.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(I,{title:"Service Duration Trends",description:"Average service durations, efficiency metrics, and time optimization opportunities.",icon:(0,N.jsx)(D.A,{color:"primary"}),status:"planned",onGenerate:()=>P("Duration Trends"),onExport:()=>P("Duration Trends")})})]})}),(0,N.jsx)(ee,{value:e,index:7,children:(0,N.jsx)(Q,{})})]})})}}}]);