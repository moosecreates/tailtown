"use strict";(self.webpackChunktailtown_frontend=self.webpackChunktailtown_frontend||[]).push([[6899],{86899:(e,t,s)=>{s.r(t),s.d(t,{default:()=>K});var r=s(89379),a=s(80045),n=s(9950),i=s(78317),l=s(62999),o=s(82053),c=s(2235),d=s(69019),h=s(84142),p=s(93472),x=s(3474),A=s(21150),u=s(48215),j=s(48089),m=s(50704),b=s(81616),y=s(10226),v=s(65429),g=s(46639),C=s(1320),f=s(15769),S=s(69780),R=s(9213),I=s(21671),w=s(93038),k=s(34075),N=s(25277),D=s(28810),T=s(25333),z=s(96583),B=s(40033),E=s(28170),W=s(8145),P=s(23266),Y=s(79739),M=s(1673),_=s(11227),G=s(68179),L=s(40379),O=s(63479),F=s(44414);const J=()=>{const[e,t]=(0,n.useState)(!1),[s,r]=(0,n.useState)(null),[a,l]=(0,n.useState)(null),[d,h]=(0,n.useState)([]),[x,A]=(0,n.useState)(new Set),[u,J]=(0,n.useState)(!1),[V,H]=(0,n.useState)(!1),[K,Q]=(0,n.useState)("DAYCARE_DAILY"),[U,q]=(0,n.useState)(4),[X,Z]=(0,n.useState)(4),[$,ee]=(0,n.useState)(4),[te,se]=(0,n.useState)(4),[re,ae]=(0,n.useState)(["Morning playtime","Lunch","Afternoon nap","Evening play session"]);(0,n.useEffect)(()=>{ne()},[]);const ne=async()=>{try{t(!0);h([{petId:"1",petName:"Max",customerId:"c1",customerName:"John Smith",serviceType:"DAYCARE",photoCount:3,hasReport:!1},{petId:"2",petName:"Bella",customerId:"c2",customerName:"Jane Doe",serviceType:"DAYCARE",photoCount:2,hasReport:!1},{petId:"3",petName:"Charlie",customerId:"c3",customerName:"Bob Johnson",serviceType:"DAYCARE",photoCount:4,hasReport:!0,reportId:"r1"}])}catch(e){r(e.message)}finally{t(!1)}},ie=(x.size,d.filter(e=>x.has(e.petId)&&e.hasReport).length),le=d.filter(e=>x.has(e.petId)&&!e.hasReport).length;return(0,F.jsxs)(i.A,{children:[(0,F.jsx)(j.A,{children:(0,F.jsxs)(m.A,{children:[(0,F.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,F.jsxs)(i.A,{children:[(0,F.jsx)(o.A,{variant:"h5",children:"Bulk Report Cards"}),(0,F.jsxs)(o.A,{variant:"body2",color:"text.secondary",children:["Today's Daycare (",d.length," pets)"]})]}),(0,F.jsxs)(b.A,{direction:"row",spacing:2,children:[(0,F.jsxs)(y.A,{variant:"outlined",onClick:()=>J(!0),disabled:0===le,children:["Apply Template (",le,")"]}),(0,F.jsxs)(y.A,{variant:"contained",startIcon:(0,F.jsx)(M.A,{}),onClick:()=>H(!0),disabled:0===ie,children:["Send Selected (",ie,")"]})]})]}),s&&(0,F.jsx)(v.A,{severity:"error",sx:{mb:2},onClose:()=>r(null),children:s}),a&&(0,F.jsx)(v.A,{severity:"success",sx:{mb:2},onClose:()=>l(null),children:a}),e&&(0,F.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,F.jsx)(g.A,{})}),(0,F.jsx)(C.A,{component:c.A,variant:"outlined",children:(0,F.jsxs)(f.A,{children:[(0,F.jsx)(S.A,{children:(0,F.jsxs)(R.A,{children:[(0,F.jsx)(I.A,{padding:"checkbox",children:(0,F.jsx)(w.A,{checked:x.size>0&&x.size===d.filter(e=>!e.hasReport).length,indeterminate:x.size>0&&x.size<d.filter(e=>!e.hasReport).length,onChange:()=>{if(x.size===d.filter(e=>!e.hasReport).length)A(new Set);else{const e=d.filter(e=>!e.hasReport).map(e=>e.petId);A(new Set(e))}}})}),(0,F.jsx)(I.A,{children:"Pet"}),(0,F.jsx)(I.A,{children:"Customer"}),(0,F.jsx)(I.A,{children:"Service"}),(0,F.jsx)(I.A,{align:"center",children:"Photos"}),(0,F.jsx)(I.A,{children:"Status"}),(0,F.jsx)(I.A,{align:"right",children:"Actions"})]})}),(0,F.jsx)(k.A,{children:d.map(e=>(0,F.jsxs)(R.A,{hover:!0,children:[(0,F.jsx)(I.A,{padding:"checkbox",children:(0,F.jsx)(w.A,{checked:x.has(e.petId),onChange:()=>(e=>{const t=new Set(x);t.has(e)?t.delete(e):t.add(e),A(t)})(e.petId),disabled:e.hasReport})}),(0,F.jsx)(I.A,{children:(0,F.jsx)(o.A,{variant:"body1",fontWeight:"medium",children:e.petName})}),(0,F.jsx)(I.A,{children:(0,F.jsx)(o.A,{variant:"body2",children:e.customerName})}),(0,F.jsx)(I.A,{children:(0,F.jsx)(N.A,{label:O.G.formatServiceType(e.serviceType),size:"small",color:"primary",variant:"outlined"})}),(0,F.jsx)(I.A,{align:"center",children:(0,F.jsx)(D.A,{badgeContent:e.photoCount,color:"primary",children:(0,F.jsx)(p.A,{color:"action"})})}),(0,F.jsx)(I.A,{children:e.hasReport?(0,F.jsx)(N.A,{icon:(0,F.jsx)(_.A,{}),label:"Report Created",size:"small",color:"success"}):(0,F.jsx)(N.A,{label:"No Report",size:"small",color:"default"})}),(0,F.jsx)(I.A,{align:"right",children:e.hasReport?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(T.A,{size:"small",children:(0,F.jsx)(G.A,{})}),(0,F.jsx)(T.A,{size:"small",children:(0,F.jsx)(L.A,{})})]}):(0,F.jsx)(y.A,{size:"small",variant:"outlined",children:"Create"})})]},e.petId))})]})})]})}),(0,F.jsxs)(z.A,{open:u,onClose:()=>J(!1),maxWidth:"sm",fullWidth:!0,children:[(0,F.jsxs)(B.A,{children:["Apply Template to ",le," Reports"]}),(0,F.jsx)(E.A,{children:(0,F.jsxs)(b.A,{spacing:3,sx:{mt:2},children:[(0,F.jsxs)(W.A,{select:!0,label:"Template",value:K,onChange:e=>Q(e.target.value),fullWidth:!0,children:[(0,F.jsx)(P.A,{value:"DAYCARE_DAILY",children:"Daycare Daily"}),(0,F.jsx)(P.A,{value:"BOARDING_DAILY",children:"Boarding Daily"}),(0,F.jsx)(P.A,{value:"BOARDING_CHECKOUT",children:"Boarding Checkout"})]}),(0,F.jsxs)(i.A,{children:[(0,F.jsx)(o.A,{variant:"subtitle2",gutterBottom:!0,children:"Default Ratings"}),(0,F.jsxs)(b.A,{spacing:2,children:[(0,F.jsx)(W.A,{type:"number",label:"Mood",value:U,onChange:e=>q(Number(e.target.value)),inputProps:{min:1,max:5},fullWidth:!0}),(0,F.jsx)(W.A,{type:"number",label:"Energy",value:X,onChange:e=>Z(Number(e.target.value)),inputProps:{min:1,max:5},fullWidth:!0}),(0,F.jsx)(W.A,{type:"number",label:"Appetite",value:$,onChange:e=>ee(Number(e.target.value)),inputProps:{min:1,max:5},fullWidth:!0}),(0,F.jsx)(W.A,{type:"number",label:"Social",value:te,onChange:e=>se(Number(e.target.value)),inputProps:{min:1,max:5},fullWidth:!0})]})]}),(0,F.jsx)(v.A,{severity:"info",children:"This will create report cards with default values. You can edit individual reports before sending."})]})}),(0,F.jsxs)(Y.A,{children:[(0,F.jsx)(y.A,{onClick:()=>J(!1),children:"Cancel"}),(0,F.jsx)(y.A,{variant:"contained",onClick:async()=>{try{t(!0),r(null);const e=Array.from(x).map(e=>{const t=d.find(t=>t.petId===e);return{petId:t.petId,customerId:t.customerId,reservationId:t.reservationId,serviceType:t.serviceType,templateType:K,title:"".concat(t.petName,"'s Day at Tailtown"),summary:"".concat(t.petName," had a wonderful day!"),moodRating:U,energyRating:X,appetiteRating:$,socialRating:te,activities:re,highlights:["Had a great time!"]}}),s=await O.G.bulkCreateReportCards(e);l("Created ".concat(s.created," report cards successfully!")),J(!1),await ne()}catch(e){r(e.message||"Failed to create report cards")}finally{t(!1)}},disabled:e,children:e?(0,F.jsx)(g.A,{size:24}):"Apply Template"})]})]}),(0,F.jsxs)(z.A,{open:V,onClose:()=>H(!1),maxWidth:"sm",fullWidth:!0,children:[(0,F.jsxs)(B.A,{children:["Send ",ie," Report Cards"]}),(0,F.jsx)(E.A,{children:(0,F.jsxs)(b.A,{spacing:2,sx:{mt:2},children:[(0,F.jsx)(v.A,{severity:"info",children:"This will send report cards via email and SMS to all selected customers."}),(0,F.jsxs)(o.A,{variant:"body2",children:["Selected reports: ",ie]}),(0,F.jsxs)(o.A,{variant:"body2",color:"text.secondary",children:["\u2022 Email notifications will be sent",(0,F.jsx)("br",{}),"\u2022 SMS notifications will be sent (if phone number available)",(0,F.jsx)("br",{}),"\u2022 Customers can view full reports with photos"]})]})}),(0,F.jsxs)(Y.A,{children:[(0,F.jsx)(y.A,{onClick:()=>H(!1),children:"Cancel"}),(0,F.jsx)(y.A,{variant:"contained",color:"primary",onClick:async()=>{try{t(!0),r(null);const e=d.filter(e=>x.has(e.petId)&&e.reportId).map(e=>e.reportId);if(0===e.length)return void r("No reports to send. Create reports first.");const s=await O.G.bulkSendReportCards(e,{sendEmail:!0,sendSMS:!0});l("Sent ".concat(s.sent," report cards successfully!")),H(!1),A(new Set),await ne()}catch(e){r(e.message||"Failed to send report cards")}finally{t(!1)}},disabled:e,startIcon:e?(0,F.jsx)(g.A,{size:20}):(0,F.jsx)(M.A,{}),children:"Send Now"})]})]})]})},V=["children","value","index"];function H(e){const{children:t,value:s,index:n}=e,l=(0,a.A)(e,V);return(0,F.jsx)("div",(0,r.A)((0,r.A)({role:"tabpanel",hidden:s!==n,id:"report-card-tabpanel-".concat(n),"aria-labelledby":"report-card-tab-".concat(n)},l),{},{children:s===n&&(0,F.jsx)(i.A,{sx:{p:3},children:t})}))}const K=()=>{const[e,t]=(0,n.useState)(0);return(0,F.jsxs)(l.A,{maxWidth:"xl",children:[(0,F.jsxs)(i.A,{sx:{mb:3},children:[(0,F.jsx)(o.A,{variant:"h4",component:"h1",gutterBottom:!0,children:"Pet Report Cards"}),(0,F.jsx)(o.A,{variant:"body1",color:"text.secondary",children:"Create and manage photo-rich report cards for pet parents"})]}),(0,F.jsxs)(c.A,{children:[(0,F.jsxs)(d.A,{value:e,onChange:(e,s)=>{t(s)},"aria-label":"report card tabs",sx:{borderBottom:1,borderColor:"divider"},children:[(0,F.jsx)(h.A,{icon:(0,F.jsx)(p.A,{}),label:"Quick Create",iconPosition:"start",id:"report-card-tab-0","aria-controls":"report-card-tabpanel-0"}),(0,F.jsx)(h.A,{icon:(0,F.jsx)(x.A,{}),label:"Bulk Operations",iconPosition:"start",id:"report-card-tab-1","aria-controls":"report-card-tabpanel-1"}),(0,F.jsx)(h.A,{icon:(0,F.jsx)(A.A,{}),label:"View All",iconPosition:"start",id:"report-card-tab-2","aria-controls":"report-card-tabpanel-2"})]}),(0,F.jsx)(H,{value:e,index:0,children:(0,F.jsx)(u.A,{})}),(0,F.jsx)(H,{value:e,index:1,children:(0,F.jsx)(J,{})}),(0,F.jsx)(H,{value:e,index:2,children:(0,F.jsxs)(i.A,{sx:{textAlign:"center",py:8},children:[(0,F.jsx)(A.A,{sx:{fontSize:64,color:"text.secondary",mb:2}}),(0,F.jsx)(o.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"View All Reports"}),(0,F.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Coming soon - View and search all report cards"})]})})]})]})}}}]);