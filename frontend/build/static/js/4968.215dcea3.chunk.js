"use strict";(self.webpackChunktailtown_frontend=self.webpackChunktailtown_frontend||[]).push([[4968],{64968:(e,t,n)=>{n.r(t),n.d(t,{default:()=>H});var s=n(89379),l=n(9950),a=n(78317),r=n(46639),i=n(82053),o=n(10226),d=n(65429),c=n(2235),h=n(60899),u=n(8145),A=n(25979),m=n(19647),x=n(70006),p=n(23266),j=n(1320),g=n(15769),y=n(69780),D=n(9213),C=n(21671),v=n(34075),w=n(25277),f=n(83274),I=n(25333),S=n(96583),E=n(40033),k=n(28170),b=n(79739),N=n(53256),T=n(49885),L=n(11227),P=n(20760),F=n(40379),W=n(16724),U=n(95722),R=n(396),_=n(81831),z=n(43974),G=n(46001),O=n(44414);const H=()=>{const[e,t]=(0,l.useState)([]),[n,H]=(0,l.useState)(!0),[M,$]=(0,l.useState)(null),[q,B]=(0,l.useState)(!1),[J,K]=(0,l.useState)(null),[Q,V]=(0,l.useState)({groomerId:"",serviceId:"",petId:"",customerId:"",scheduledDate:new Date,scheduledTime:"09:00",duration:60,notes:""}),[X,Y]=(0,l.useState)({groomerId:"",status:"",startDate:"",endDate:""});(0,l.useEffect)(()=>{Z()},[X]);const Z=async()=>{try{H(!0);const e=await G.Ay.groomerAppointments.getAll(X);t(e),$(null)}catch(e){$(e.message||"Failed to load appointments"),console.error(e)}finally{H(!1)}},ee=e=>{e?(K(e),V({groomerId:e.groomerId,serviceId:e.serviceId,petId:e.petId,customerId:e.customerId,scheduledDate:new Date(e.scheduledDate),scheduledTime:e.scheduledTime,duration:e.duration,notes:e.notes||""})):(K(null),V({groomerId:"",serviceId:"",petId:"",customerId:"",scheduledDate:new Date,scheduledTime:"09:00",duration:60,notes:""})),B(!0)},te=()=>{B(!1),K(null)},ne=e=>{switch(e){case"SCHEDULED":return"primary";case"IN_PROGRESS":return"warning";case"COMPLETED":return"success";case"CANCELLED":return"error";default:return"default"}};return n&&0===e.length?(0,O.jsx)(a.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:(0,O.jsx)(r.A,{})}):(0,O.jsxs)(a.A,{children:[(0,O.jsxs)(a.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,O.jsx)(i.A,{variant:"h4",children:"Groomer Appointments"}),(0,O.jsx)(o.A,{variant:"contained",color:"primary",startIcon:(0,O.jsx)(N.A,{}),onClick:()=>ee(),children:"New Appointment"})]}),M&&(0,O.jsx)(d.A,{severity:"error",onClose:()=>$(null),sx:{mb:2},children:M}),(0,O.jsx)(c.A,{sx:{p:2,mb:2},children:(0,O.jsxs)(h.Ay,{container:!0,spacing:2,children:[(0,O.jsx)(h.Ay,{item:!0,xs:12,md:3,children:(0,O.jsx)(u.A,{label:"Start Date",type:"date",value:X.startDate,onChange:e=>Y((0,s.A)((0,s.A)({},X),{},{startDate:e.target.value})),InputLabelProps:{shrink:!0},fullWidth:!0})}),(0,O.jsx)(h.Ay,{item:!0,xs:12,md:3,children:(0,O.jsx)(u.A,{label:"End Date",type:"date",value:X.endDate,onChange:e=>Y((0,s.A)((0,s.A)({},X),{},{endDate:e.target.value})),InputLabelProps:{shrink:!0},fullWidth:!0})}),(0,O.jsx)(h.Ay,{item:!0,xs:12,md:3,children:(0,O.jsxs)(A.A,{fullWidth:!0,children:[(0,O.jsx)(m.A,{children:"Status"}),(0,O.jsxs)(x.A,{value:X.status,onChange:e=>Y((0,s.A)((0,s.A)({},X),{},{status:e.target.value})),label:"Status",children:[(0,O.jsx)(p.A,{value:"",children:"All"}),(0,O.jsx)(p.A,{value:"SCHEDULED",children:"Scheduled"}),(0,O.jsx)(p.A,{value:"IN_PROGRESS",children:"In Progress"}),(0,O.jsx)(p.A,{value:"COMPLETED",children:"Completed"}),(0,O.jsx)(p.A,{value:"CANCELLED",children:"Cancelled"})]})]})}),(0,O.jsx)(h.Ay,{item:!0,xs:12,md:3,children:(0,O.jsx)(o.A,{variant:"outlined",onClick:()=>Y({groomerId:"",status:"",startDate:"",endDate:""}),fullWidth:!0,sx:{height:"56px"},children:"Clear Filters"})})]})}),(0,O.jsx)(c.A,{children:(0,O.jsx)(j.A,{children:(0,O.jsxs)(g.A,{children:[(0,O.jsx)(y.A,{children:(0,O.jsxs)(D.A,{children:[(0,O.jsx)(C.A,{children:"Date & Time"}),(0,O.jsx)(C.A,{children:"Pet"}),(0,O.jsx)(C.A,{children:"Customer"}),(0,O.jsx)(C.A,{children:"Groomer"}),(0,O.jsx)(C.A,{children:"Service"}),(0,O.jsx)(C.A,{children:"Duration"}),(0,O.jsx)(C.A,{children:"Status"}),(0,O.jsx)(C.A,{align:"right",children:"Actions"})]})}),(0,O.jsx)(v.A,{children:0===e.length?(0,O.jsx)(D.A,{children:(0,O.jsx)(C.A,{colSpan:8,align:"center",children:(0,O.jsx)(i.A,{color:"textSecondary",py:4,children:'No appointments found. Click "New Appointment" to create one.'})})}):e.map(e=>{var t,n,s;return(0,O.jsxs)(D.A,{children:[(0,O.jsxs)(C.A,{children:[(0,O.jsx)(i.A,{variant:"body2",children:(0,z.A)(new Date(e.scheduledDate),"MMM dd, yyyy")}),(0,O.jsx)(i.A,{variant:"caption",color:"textSecondary",children:e.scheduledTime})]}),(0,O.jsx)(C.A,{children:(null===(t=e.pet)||void 0===t?void 0:t.name)||"Unknown"}),(0,O.jsx)(C.A,{children:e.customer?"".concat(e.customer.firstName," ").concat(e.customer.lastName):"Unknown"}),(0,O.jsx)(C.A,{children:e.groomer?"".concat(e.groomer.firstName," ").concat(e.groomer.lastName):"Unknown"}),(0,O.jsx)(C.A,{children:(null===(n=e.service)||void 0===n?void 0:n.name)||"Unknown"}),(0,O.jsxs)(C.A,{children:[e.duration," min"]}),(0,O.jsx)(C.A,{children:(0,O.jsx)(w.A,{label:(s=e.status,s.replace("_"," ")),color:ne(e.status),size:"small"})}),(0,O.jsxs)(C.A,{align:"right",children:["SCHEDULED"===e.status&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(f.A,{title:"Start",children:(0,O.jsx)(I.A,{size:"small",onClick:()=>(async e=>{try{await G.Ay.groomerAppointments.start(e),await Z()}catch(t){$(t.message||"Failed to start appointment")}})(e.id),color:"primary",children:(0,O.jsx)(W.A,{})})}),(0,O.jsx)(f.A,{title:"Edit",children:(0,O.jsx)(I.A,{size:"small",onClick:()=>ee(e),color:"primary",children:(0,O.jsx)(F.A,{})})})]}),"IN_PROGRESS"===e.status&&(0,O.jsx)(f.A,{title:"Complete",children:(0,O.jsx)(I.A,{size:"small",onClick:()=>(async e=>{try{await G.Ay.groomerAppointments.complete(e),await Z()}catch(t){$(t.message||"Failed to complete appointment")}})(e.id),color:"success",children:(0,O.jsx)(L.A,{})})}),("SCHEDULED"===e.status||"IN_PROGRESS"===e.status)&&(0,O.jsx)(f.A,{title:"Cancel",children:(0,O.jsx)(I.A,{size:"small",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to cancel this appointment?"))try{await G.Ay.groomerAppointments.cancel(e),await Z()}catch(t){$(t.message||"Failed to cancel appointment")}})(e.id),color:"error",children:(0,O.jsx)(T.A,{})})}),(0,O.jsx)(f.A,{title:"Delete",children:(0,O.jsx)(I.A,{size:"small",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this appointment?"))try{await G.Ay.groomerAppointments.delete(e),await Z()}catch(t){$(t.message||"Failed to delete appointment")}})(e.id),color:"error",children:(0,O.jsx)(P.A,{})})})]})]},e.id)})})]})})}),(0,O.jsxs)(S.A,{open:q,onClose:te,maxWidth:"md",fullWidth:!0,children:[(0,O.jsx)(E.A,{children:J?"Edit Appointment":"New Appointment"}),(0,O.jsx)(k.A,{children:(0,O.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[(0,O.jsx)(_.$,{dateAdapter:R.h,children:(0,O.jsx)(U.l,{label:"Date",value:Q.scheduledDate,onChange:e=>V((0,s.A)((0,s.A)({},Q),{},{scheduledDate:e||new Date})),slotProps:{textField:{fullWidth:!0}}})}),(0,O.jsx)(u.A,{label:"Time",type:"time",value:Q.scheduledTime,onChange:e=>V((0,s.A)((0,s.A)({},Q),{},{scheduledTime:e.target.value})),InputLabelProps:{shrink:!0},fullWidth:!0}),(0,O.jsx)(u.A,{label:"Duration (minutes)",type:"number",value:Q.duration,onChange:e=>V((0,s.A)((0,s.A)({},Q),{},{duration:parseInt(e.target.value)})),fullWidth:!0}),(0,O.jsx)(u.A,{label:"Notes",value:Q.notes,onChange:e=>V((0,s.A)((0,s.A)({},Q),{},{notes:e.target.value})),multiline:!0,rows:3,fullWidth:!0}),!J&&(0,O.jsx)(d.A,{severity:"info",children:"Note: For new appointments, you'll need to select groomer, service, pet, and customer. This simplified form allows editing existing appointments only."})]})}),(0,O.jsxs)(b.A,{children:[(0,O.jsx)(o.A,{onClick:te,children:"Cancel"}),(0,O.jsx)(o.A,{onClick:async()=>{try{J?await G.Ay.groomerAppointments.update(J.id,{scheduledDate:Q.scheduledDate,scheduledTime:Q.scheduledTime,duration:Q.duration,notes:Q.notes}):await G.Ay.groomerAppointments.create(Q),await Z(),te()}catch(e){$(e.message||"Failed to save appointment")}},variant:"contained",color:"primary",children:J?"Update":"Create"})]})]})]})}}}]);