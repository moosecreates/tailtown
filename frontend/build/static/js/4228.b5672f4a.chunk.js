"use strict";(self.webpackChunktailtown_frontend=self.webpackChunktailtown_frontend||[]).push([[4228],{34228:(e,i,r)=>{r.r(i),r.d(i,{default:()=>z});var l=r(89379),s=r(9950),n=r(78317),t=r(46639),a=r(82053),c=r(10226),d=r(65429),o=r(2235),A=r(1320),h=r(15769),u=r(69780),x=r(9213),v=r(21671),p=r(34075),y=r(83274),j=r(25277),m=r(25333),f=r(96583),g=r(40033),T=r(28170),C=r(8145),q=r(25979),b=r(19647),R=r(70006),w=r(23266),k=r(16497),S=r(37324),D=r(79739),P=r(53256),B=r(96132),W=r(40379),M=r(20760),O=r(96827);const I=["DOG","CAT"],N=["BOARDING","DAYCARE","GROOMING"];var V=r(44414);const z=()=>{var e;const[i,r]=(0,s.useState)([]),[z,E]=(0,s.useState)(!0),[F,G]=(0,s.useState)(null),[_,H]=(0,s.useState)(!1),[U,Y]=(0,s.useState)(null),[J,K]=(0,s.useState)({name:"",description:"",petType:void 0,serviceType:void 0,isRequired:!0,validityPeriodMonths:12,reminderDaysBefore:30,isActive:!0,displayOrder:0,notes:""});(0,s.useEffect)(()=>{L()},[]);const L=async()=>{try{E(!0);const e=await O.A.getAll();r(e),G(null)}catch(e){G("Failed to load vaccine requirements"),console.error(e)}finally{E(!1)}},Q=e=>{e?(Y(e),K({name:e.name,description:e.description||"",petType:null===e.petType?void 0:e.petType,serviceType:null===e.serviceType?void 0:e.serviceType,isRequired:e.isRequired,validityPeriodMonths:e.validityPeriodMonths,reminderDaysBefore:e.reminderDaysBefore,isActive:e.isActive,displayOrder:e.displayOrder,notes:e.notes||""})):(Y(null),K({name:"",description:"",petType:void 0,serviceType:void 0,isRequired:!0,validityPeriodMonths:12,reminderDaysBefore:30,isActive:!0,displayOrder:i.length,notes:""})),H(!0)},X=()=>{H(!1),Y(null)};return z?(0,V.jsx)(n.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:(0,V.jsx)(t.A,{})}):(0,V.jsxs)(n.A,{children:[(0,V.jsxs)(n.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,V.jsx)(a.A,{variant:"h4",children:"Vaccine Requirements"}),(0,V.jsx)(c.A,{variant:"contained",color:"primary",startIcon:(0,V.jsx)(P.A,{}),onClick:()=>Q(),children:"Add Requirement"})]}),F&&(0,V.jsx)(d.A,{severity:"error",onClose:()=>G(null),sx:{mb:2},children:F}),(0,V.jsx)(o.A,{children:(0,V.jsx)(A.A,{children:(0,V.jsxs)(h.A,{children:[(0,V.jsx)(u.A,{children:(0,V.jsxs)(x.A,{children:[(0,V.jsx)(v.A,{width:"40"}),(0,V.jsx)(v.A,{children:"Vaccine Name"}),(0,V.jsx)(v.A,{children:"Pet Type"}),(0,V.jsx)(v.A,{children:"Service Type"}),(0,V.jsx)(v.A,{children:"Required"}),(0,V.jsx)(v.A,{children:"Validity"}),(0,V.jsx)(v.A,{children:"Reminder"}),(0,V.jsx)(v.A,{children:"Status"}),(0,V.jsx)(v.A,{align:"right",children:"Actions"})]})}),(0,V.jsx)(p.A,{children:0===i.length?(0,V.jsx)(x.A,{children:(0,V.jsx)(v.A,{colSpan:9,align:"center",children:(0,V.jsx)(a.A,{color:"textSecondary",py:4,children:'No vaccine requirements found. Click "Add Requirement" to create one.'})})}):i.map(e=>{return(0,V.jsxs)(x.A,{children:[(0,V.jsx)(v.A,{children:(0,V.jsx)(y.A,{title:"Drag to reorder",children:(0,V.jsx)(B.A,{sx:{cursor:"move",color:"text.secondary"}})})}),(0,V.jsxs)(v.A,{children:[(0,V.jsx)(a.A,{variant:"body1",fontWeight:"medium",children:e.name}),e.description&&(0,V.jsx)(a.A,{variant:"caption",color:"textSecondary",children:e.description})]}),(0,V.jsx)(v.A,{children:(0,V.jsx)(j.A,{label:(r=e.petType,r||"All Pets"),size:"small",variant:"outlined"})}),(0,V.jsx)(v.A,{children:(0,V.jsx)(j.A,{label:(i=e.serviceType,i||"All Services"),size:"small",variant:"outlined"})}),(0,V.jsx)(v.A,{children:(0,V.jsx)(j.A,{label:e.isRequired?"Required":"Optional",color:e.isRequired?"error":"default",size:"small"})}),(0,V.jsx)(v.A,{children:e.validityPeriodMonths?"".concat(e.validityPeriodMonths," months"):"N/A"}),(0,V.jsx)(v.A,{children:e.reminderDaysBefore?"".concat(e.reminderDaysBefore," days"):"N/A"}),(0,V.jsx)(v.A,{children:(0,V.jsx)(j.A,{label:e.isActive?"Active":"Inactive",color:e.isActive?"success":"default",size:"small",onClick:()=>(async e=>{try{await O.A.update(e.id,{isActive:!e.isActive}),await L()}catch(i){G("Failed to update vaccine requirement")}})(e),sx:{cursor:"pointer"}})}),(0,V.jsxs)(v.A,{align:"right",children:[(0,V.jsx)(m.A,{size:"small",onClick:()=>Q(e),color:"primary",children:(0,V.jsx)(W.A,{})}),(0,V.jsx)(m.A,{size:"small",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this vaccine requirement?"))try{await O.A.delete(e),await L()}catch(i){G("Failed to delete vaccine requirement")}})(e.id),color:"error",children:(0,V.jsx)(M.A,{})})]})]},e.id);var i,r})})]})})}),(0,V.jsxs)(f.A,{open:_,onClose:X,maxWidth:"md",fullWidth:!0,children:[(0,V.jsx)(g.A,{children:U?"Edit Vaccine Requirement":"Add Vaccine Requirement"}),(0,V.jsx)(T.A,{children:(0,V.jsxs)(n.A,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[(0,V.jsx)(C.A,{label:"Vaccine Name",value:J.name,onChange:e=>K((0,l.A)((0,l.A)({},J),{},{name:e.target.value})),required:!0,fullWidth:!0}),(0,V.jsx)(C.A,{label:"Description",value:J.description,onChange:e=>K((0,l.A)((0,l.A)({},J),{},{description:e.target.value})),multiline:!0,rows:2,fullWidth:!0}),(0,V.jsxs)(n.A,{sx:{display:"flex",gap:2},children:[(0,V.jsxs)(q.A,{fullWidth:!0,children:[(0,V.jsx)(b.A,{children:"Pet Type"}),(0,V.jsxs)(R.A,{value:J.petType||"",onChange:e=>K((0,l.A)((0,l.A)({},J),{},{petType:e.target.value||void 0})),label:"Pet Type",children:[(0,V.jsx)(w.A,{value:"",children:"All Pets"}),I.map(e=>(0,V.jsx)(w.A,{value:e,children:e},e))]})]}),(0,V.jsxs)(q.A,{fullWidth:!0,children:[(0,V.jsx)(b.A,{shrink:!0,children:"Service Type"}),(0,V.jsxs)(R.A,{value:null!==(e=J.serviceType)&&void 0!==e?e:"",onChange:e=>K((0,l.A)((0,l.A)({},J),{},{serviceType:""===e.target.value?void 0:e.target.value})),label:"Service Type",displayEmpty:!0,notched:!0,renderValue:e=>e||"All Services",children:[(0,V.jsx)(w.A,{value:"",children:"All Services"}),N.map(e=>(0,V.jsx)(w.A,{value:e,children:e},e))]})]})]}),(0,V.jsxs)(n.A,{sx:{display:"flex",gap:2},children:[(0,V.jsx)(C.A,{label:"Validity Period (months)",type:"number",value:J.validityPeriodMonths||"",onChange:e=>K((0,l.A)((0,l.A)({},J),{},{validityPeriodMonths:e.target.value?parseInt(e.target.value):void 0})),fullWidth:!0}),(0,V.jsx)(C.A,{label:"Reminder Days Before",type:"number",value:J.reminderDaysBefore||"",onChange:e=>K((0,l.A)((0,l.A)({},J),{},{reminderDaysBefore:e.target.value?parseInt(e.target.value):void 0})),fullWidth:!0})]}),(0,V.jsxs)(n.A,{sx:{display:"flex",gap:2},children:[(0,V.jsx)(k.A,{control:(0,V.jsx)(S.A,{checked:J.isRequired,onChange:e=>K((0,l.A)((0,l.A)({},J),{},{isRequired:e.target.checked}))}),label:"Required"}),(0,V.jsx)(k.A,{control:(0,V.jsx)(S.A,{checked:J.isActive,onChange:e=>K((0,l.A)((0,l.A)({},J),{},{isActive:e.target.checked}))}),label:"Active"})]}),(0,V.jsx)(C.A,{label:"Notes",value:J.notes,onChange:e=>K((0,l.A)((0,l.A)({},J),{},{notes:e.target.value})),multiline:!0,rows:3,fullWidth:!0})]})}),(0,V.jsxs)(D.A,{children:[(0,V.jsx)(c.A,{onClick:X,children:"Cancel"}),(0,V.jsx)(c.A,{onClick:async()=>{try{const e=(0,l.A)((0,l.A)({},J),{},{petType:void 0===J.petType?null:J.petType,serviceType:void 0===J.serviceType?null:J.serviceType});U?await O.A.update(U.id,e):await O.A.create(e),await L(),X()}catch(e){G(e.message||"Failed to save vaccine requirement")}},variant:"contained",color:"primary",children:U?"Update":"Create"})]})]})]})}}}]);