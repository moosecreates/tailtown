"use strict";(self.webpackChunktailtown_frontend=self.webpackChunktailtown_frontend||[]).push([[3907],{13907:(e,s,i)=>{i.r(s),i.d(s,{default:()=>N});var t=i(9950),n=i(28429),a=i(78317),l=i(46639),r=i(65429),o=i(25277),d=i(82053),c=i(48089),x=i(50704),h=i(249),p=i(26050),y=i(38614),j=i(41413),m=i(83563),A=i(74745),g=i(11227),u=i(68476),b=i(73753),f=i(92974),v=i(424),k=i(31213),w=i(65833),C=i(91367),T=i(44414);const N=()=>{const{user:e}=(0,C.As)(),s=(0,n.Zp)(),[i,N]=(0,t.useState)(null),[P,I]=(0,t.useState)(!0),[S,z]=(0,t.useState)(null),D=async()=>{try{I(!0),z(null);const e=await w.A.getDashboardData();N(e)}catch(e){z("Failed to load dashboard data"),console.error("Dashboard error:",e)}finally{I(!1)}};(0,t.useEffect)(()=>{D()},[]);const F=()=>{D()};if(P&&!i)return(0,T.jsxs)(a.A,{children:[(0,T.jsx)(v.i,{title:"Dashboard",showNotifications:!0,userName:null===e||void 0===e?void 0:e.firstName}),(0,T.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:(0,T.jsx)(l.A,{})})]});if(S&&!i)return(0,T.jsxs)(a.A,{children:[(0,T.jsx)(v.i,{title:"Dashboard",showNotifications:!0,userName:null===e||void 0===e?void 0:e.firstName}),(0,T.jsx)(a.A,{sx:{p:2},children:(0,T.jsx)(r.A,{severity:"error",action:(0,T.jsx)(o.A,{label:"Retry",size:"small",onClick:F}),children:S})})]});const W=(null===i||void 0===i?void 0:i.stats)||{petsInFacility:0,tasksCompleted:0,totalTasks:0},M=(null===i||void 0===i?void 0:i.todaySchedule)||[],R=(null===i||void 0===i?void 0:i.pendingTasks)||[];return(0,T.jsxs)(a.A,{children:[(0,T.jsx)(v.i,{title:"Dashboard",showNotifications:!0,notificationCount:(null===i||void 0===i?void 0:i.unreadMessages)||0,userName:(null===e||void 0===e?void 0:e.firstName)||"Staff"}),(0,T.jsxs)(a.A,{sx:{p:2,pb:10},children:[(0,T.jsxs)(a.A,{sx:{mb:2,px:1,py:1,bgcolor:"background.paper",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,T.jsx)(b.A,{fontSize:"small",color:"action"}),(0,T.jsx)(d.A,{variant:"body2",color:"text.secondary",children:"Pets in Facility"})]}),(0,T.jsx)(d.A,{variant:"body2",fontWeight:"bold",children:W.petsInFacility})]}),(0,T.jsx)(c.A,{elevation:1,sx:{mb:3},children:(0,T.jsxs)(x.A,{sx:{py:2},children:[(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,T.jsx)(g.A,{sx:{mr:1,color:"warning.main"}}),(0,T.jsx)(d.A,{variant:"subtitle2",fontWeight:"bold",children:"Tasks Progress"})]}),(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,T.jsxs)(d.A,{variant:"h6",children:[W.tasksCompleted,"/",W.totalTasks]}),(0,T.jsx)(o.A,{label:"".concat(Math.round(W.tasksCompleted/W.totalTasks*100),"%"),size:"small",color:"warning"})]})]})}),(0,T.jsx)(c.A,{elevation:1,sx:{mb:3},children:(0,T.jsxs)(x.A,{children:[(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,T.jsx)(f.A,{sx:{mr:1,color:"primary.main"}}),(0,T.jsx)(d.A,{variant:"subtitle1",fontWeight:"bold",children:"Today's Schedule"})]}),0===M.length?(0,T.jsx)(d.A,{variant:"body2",color:"text.secondary",sx:{py:2,textAlign:"center"},children:"No scheduled shifts today"}):(0,T.jsx)(h.A,{disablePadding:!0,children:M.map((e,i)=>(0,T.jsxs)(t.Fragment,{children:[(0,T.jsxs)(p.Ay,{disablePadding:!0,sx:{py:1,cursor:"pointer","&:hover":{bgcolor:"action.hover"}},onClick:()=>s("/mobile/schedule"),children:[(0,T.jsx)(y.A,{children:(0,T.jsx)(j.A,{sx:{width:32,height:32,fontSize:"0.75rem",bgcolor:"primary.main"},children:e.time.split(":")[0]})}),(0,T.jsx)(m.A,{primary:e.title,secondary:e.location,primaryTypographyProps:{variant:"body2",fontWeight:500},secondaryTypographyProps:{variant:"caption"}}),(0,T.jsx)(u.A,{fontSize:"small",color:"action"})]}),i<M.length-1&&(0,T.jsx)(A.A,{})]},i))})]})}),(0,T.jsx)(c.A,{elevation:1,children:(0,T.jsxs)(x.A,{children:[(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,T.jsx)(g.A,{sx:{mr:1,color:"error.main"}}),(0,T.jsx)(d.A,{variant:"subtitle1",fontWeight:"bold",children:"Pending Tasks"})]}),0===R.length?(0,T.jsx)(d.A,{variant:"body2",color:"text.secondary",sx:{py:2,textAlign:"center"},children:"No pending tasks"}):(0,T.jsx)(h.A,{disablePadding:!0,children:R.map((e,i)=>(0,T.jsxs)(t.Fragment,{children:[(0,T.jsxs)(p.Ay,{disablePadding:!0,sx:{py:1,cursor:"pointer","&:hover":{bgcolor:"action.hover"}},onClick:()=>s("/mobile/checklists"),children:[(0,T.jsx)(m.A,{primary:e.title,secondary:"".concat(e.completed,"/").concat(e.total," completed"),primaryTypographyProps:{variant:"body2",fontWeight:500},secondaryTypographyProps:{variant:"caption"}}),(0,T.jsx)(o.A,{label:"View",size:"small",color:"primary",variant:"outlined",sx:{ml:1}})]}),i<R.length-1&&(0,T.jsx)(A.A,{})]},e.id))})]})})]}),(0,T.jsx)(k.l,{unreadMessages:(null===i||void 0===i?void 0:i.unreadMessages)||0,pendingTasks:R.length})]})}}}]);