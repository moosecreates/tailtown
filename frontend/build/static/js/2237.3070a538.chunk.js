"use strict";(self.webpackChunktailtown_frontend=self.webpackChunktailtown_frontend||[]).push([[2237],{32237:(e,t,s)=>{s.r(t),s.d(t,{default:()=>T});var n=s(89379),o=s(9950),i=s(62999),a=s(78317),r=s(82053),l=s(10226),c=s(65429),d=s(2235),u=s(60899),h=s(48089),m=s(50704),x=s(25277),p=s(25713),g=s(25333),A=s(96583),j=s(40033),y=s(28170),v=s(8145),f=s(25979),b=s(19647),C=s(70006),w=s(23266),I=s(79739),k=s(98785),S=s(53256),F=s(42647),U=s(20760),P=s(40379),E=s(44414);const T=()=>{const[e,t]=(0,o.useState)([]),[s,T]=(0,o.useState)(!1),[W,q]=(0,o.useState)(null),[z,D]=(0,o.useState)({name:"",label:"",description:"",category:"custom"}),[B,R]=(0,o.useState)(null),[L,_]=(0,o.useState)(null),[G,M]=(0,o.useState)({open:!1,message:"",severity:"success"}),N=()=>window.location.origin,H=async()=>{try{const e=await fetch("".concat(N(),"/api/custom-icons")),s=await e.json();"success"===s.status&&t(s.data)}catch(e){console.error("Error loading icons:",e)}};o.useEffect(()=>{H()},[]);const V=e=>{e?(q(e),D({name:e.name,label:e.label,description:e.description,category:e.category}),_(e.imageUrl)):(q(null),D({name:"",label:"",description:"",category:"custom"}),_(null),R(null)),T(!0)},Y=()=>{T(!1),q(null),D({name:"",label:"",description:"",category:"custom"}),R(null),_(null)};return(0,E.jsx)(i.A,{maxWidth:"lg",children:(0,E.jsxs)(a.A,{sx:{mt:4,mb:4},children:[(0,E.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,E.jsxs)(a.A,{children:[(0,E.jsx)(r.A,{variant:"h4",gutterBottom:!0,children:"Custom Icons"}),(0,E.jsx)(r.A,{variant:"body2",color:"text.secondary",children:"Upload and manage custom icons for customers and pets"})]}),(0,E.jsx)(l.A,{variant:"contained",startIcon:(0,E.jsx)(S.A,{}),onClick:()=>V(),children:"Upload Icon"})]}),(0,E.jsx)(c.A,{severity:"info",sx:{mb:3},children:(0,E.jsxs)(r.A,{variant:"body2",children:[(0,E.jsx)("strong",{children:"Image Requirements:"})," PNG, JPG, or SVG format \u2022 Maximum size: 1MB \u2022 Recommended size: 64x64px \u2022 Transparent background recommended"]})}),0===e.length?(0,E.jsxs)(d.A,{sx:{p:6,textAlign:"center"},children:[(0,E.jsx)(F.A,{sx:{fontSize:64,color:"text.secondary",mb:2}}),(0,E.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:"No Custom Icons Yet"}),(0,E.jsx)(r.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Upload your first custom icon to get started. Custom icons will appear alongside the built-in icons in the icon selector."}),(0,E.jsx)(l.A,{variant:"contained",startIcon:(0,E.jsx)(S.A,{}),onClick:()=>V(),children:"Upload Your First Icon"})]}):(0,E.jsx)(u.Ay,{container:!0,spacing:2,children:e.map(e=>(0,E.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,E.jsxs)(h.A,{children:[(0,E.jsxs)(m.A,{children:[(0,E.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",mb:2},children:(0,E.jsx)("img",{src:e.imageUrl,alt:e.label,style:{width:64,height:64,objectFit:"contain"}})}),(0,E.jsx)(r.A,{variant:"h6",align:"center",gutterBottom:!0,children:e.label}),(0,E.jsx)(r.A,{variant:"body2",color:"text.secondary",align:"center",paragraph:!0,children:e.description}),(0,E.jsx)(a.A,{sx:{display:"flex",justifyContent:"center"},children:(0,E.jsx)(x.A,{label:e.category,size:"small"})})]}),(0,E.jsxs)(p.A,{sx:{justifyContent:"center"},children:[(0,E.jsx)(g.A,{size:"small",onClick:()=>V(e),children:(0,E.jsx)(P.A,{})}),(0,E.jsx)(g.A,{size:"small",color:"error",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this custom icon?"))try{if(!(await fetch("".concat(N(),"/api/custom-icons/").concat(e),{method:"DELETE"})).ok)throw new Error("Failed to delete icon");M({open:!0,message:"Icon deleted successfully",severity:"success"}),H()}catch(t){console.error("Error deleting icon:",t),M({open:!0,message:"Failed to delete icon",severity:"error"})}})(e.id),children:(0,E.jsx)(U.A,{})})]})]})},e.id))}),(0,E.jsxs)(A.A,{open:s,onClose:Y,maxWidth:"sm",fullWidth:!0,children:[(0,E.jsx)(j.A,{children:W?"Edit Custom Icon":"Upload Custom Icon"}),(0,E.jsx)(y.A,{children:(0,E.jsxs)(a.A,{sx:{mt:2},children:[(0,E.jsxs)(a.A,{sx:{mb:3,textAlign:"center"},children:[(0,E.jsx)("input",{accept:"image/*",style:{display:"none"},id:"icon-file-upload",type:"file",onChange:e=>{var t;const s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){if(!s.type.startsWith("image/"))return void M({open:!0,message:"Please select an image file",severity:"error"});if(s.size>1048576)return void M({open:!0,message:"Image must be smaller than 1MB",severity:"error"});R(s);const e=new FileReader;e.onloadend=()=>{_(e.result)},e.readAsDataURL(s)}}}),(0,E.jsx)("label",{htmlFor:"icon-file-upload",children:(0,E.jsx)(l.A,{variant:"outlined",component:"span",startIcon:(0,E.jsx)(F.A,{}),fullWidth:!0,children:B?B.name:"Select Image File"})}),L&&(0,E.jsxs)(a.A,{sx:{mt:2,p:2,border:"1px dashed",borderColor:"divider",borderRadius:1},children:[(0,E.jsx)(r.A,{variant:"caption",color:"text.secondary",gutterBottom:!0,display:"block",children:"Preview:"}),(0,E.jsx)("img",{src:L,alt:"Preview",style:{width:64,height:64,objectFit:"contain"}})]})]}),(0,E.jsx)(v.A,{fullWidth:!0,label:"Icon Name (ID)",value:z.name,onChange:e=>D((0,n.A)((0,n.A)({},z),{},{name:e.target.value.toLowerCase().replace(/\s+/g,"_")})),placeholder:"e.g., custom_vip",helperText:"Unique identifier for this icon (lowercase, underscores only)",sx:{mb:2},required:!0}),(0,E.jsx)(v.A,{fullWidth:!0,label:"Display Label",value:z.label,onChange:e=>D((0,n.A)((0,n.A)({},z),{},{label:e.target.value})),placeholder:"e.g., VIP Customer",helperText:"Text shown in the icon selector",sx:{mb:2},required:!0}),(0,E.jsx)(v.A,{fullWidth:!0,label:"Description",value:z.description,onChange:e=>D((0,n.A)((0,n.A)({},z),{},{description:e.target.value})),placeholder:"e.g., High-value customer requiring special attention",helperText:"Tooltip text shown when hovering over the icon",multiline:!0,rows:2,sx:{mb:2},required:!0}),(0,E.jsxs)(f.A,{fullWidth:!0,sx:{mb:2},children:[(0,E.jsx)(b.A,{children:"Category"}),(0,E.jsxs)(C.A,{value:z.category,onChange:e=>D((0,n.A)((0,n.A)({},z),{},{category:e.target.value})),label:"Category",children:[(0,E.jsx)(w.A,{value:"status",children:"Status"}),(0,E.jsx)(w.A,{value:"payment",children:"Payment"}),(0,E.jsx)(w.A,{value:"communication",children:"Communication"}),(0,E.jsx)(w.A,{value:"service",children:"Service"}),(0,E.jsx)(w.A,{value:"flag",children:"Flag"}),(0,E.jsx)(w.A,{value:"custom",children:"Custom"})]})]})]})}),(0,E.jsxs)(I.A,{children:[(0,E.jsx)(l.A,{onClick:Y,children:"Cancel"}),(0,E.jsx)(l.A,{onClick:async()=>{if(z.name&&z.label&&z.description)if(W||B)try{const e=new FormData;e.append("name",z.name),e.append("label",z.label),e.append("description",z.description),e.append("category",z.category),B&&e.append("image",B);const t=W?"".concat(N(),"/api/custom-icons/").concat(W.id):"".concat(N(),"/api/custom-icons");if(!(await fetch(t,{method:W?"PUT":"POST",body:e})).ok)throw new Error("Failed to save icon");M({open:!0,message:W?"Icon updated successfully":"Icon uploaded successfully",severity:"success"}),Y(),H()}catch(e){console.error("Error saving icon:",e),M({open:!0,message:"Failed to save icon",severity:"error"})}else M({open:!0,message:"Please select an image file",severity:"error"});else M({open:!0,message:"Please fill in all required fields",severity:"error"})},variant:"contained",children:W?"Update":"Upload"})]})]}),(0,E.jsx)(k.A,{open:G.open,autoHideDuration:6e3,onClose:()=>M((0,n.A)((0,n.A)({},G),{},{open:!1})),children:(0,E.jsx)(c.A,{severity:G.severity,onClose:()=>M((0,n.A)((0,n.A)({},G),{},{open:!1})),children:G.message})})]})})}}}]);