"use strict";(self.webpackChunktailtown_frontend=self.webpackChunktailtown_frontend||[]).push([[1142],{81142:(e,a,s)=>{s.r(a),s.d(a,{default:()=>ne});var t=s(80045),l=s(89379),i=s(9950),n=s(62999),r=s(78317),d=s(10226),o=s(82053),c=s(2235),h=s(1320),m=s(15769),A=s(69780),x=s(9213),f=s(21671),u=s(34075),j=s(25277),p=s(25333),y=s(96583),v=s(40033),b=s(28170),g=s(69019),w=s(84142),C=s(60899),S=s(8145),D=s(74745),z=s(66699),P=s(25979),k=s(19647),T=s(70006),I=s(23266),W=s(79739),N=s(14801),E=s(53256),F=s(40379),O=s(20760),q=s(50294),R=s(92974),L=s(42074),B=s(8959),M=s(98785),U=s(65429),V=s(46639),G=s(44414);const Z=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_=e=>{var a;let{staffId:s,onSave:t}=e;const[n,y]=(0,i.useState)([]),[v,b]=(0,i.useState)(!1),[g,w]=(0,i.useState)(null),[D,z]=(0,i.useState)(null),[W,N]=(0,i.useState)({dayOfWeek:0,startTime:"09:00",endTime:"17:00",isAvailable:!0,effectiveFrom:null,effectiveUntil:null});(0,i.useEffect)(()=>{s&&E()},[s]);const E=async()=>{try{b(!0);const e=await B.Ay.getStaffAvailability(s);y(e),w(null)}catch(e){console.error("Failed to load staff availability:",e),w("Failed to load availability. Please try again.")}finally{b(!1)}},q=e=>{const{name:a,value:s}=e.target;N((0,l.A)((0,l.A)({},W),{},{[a]:s}))},R=e=>{const{name:a,value:s}=e.target;N((0,l.A)((0,l.A)({},W),{},{[a]:"dayOfWeek"===a?parseInt(s,10):"true"===s}))},L=()=>{z(null),N({dayOfWeek:0,startTime:"09:00",endTime:"17:00",isAvailable:!0,effectiveFrom:null,effectiveUntil:null})},M=async()=>{try{if(b(!0),W.startTime&&W.endTime&&W.startTime>=W.endTime)return w("End time must be after start time"),void b(!1);D&&D.id?await B.Ay.updateStaffAvailability(D.id,(0,l.A)((0,l.A)({},W),{},{staffId:s})):await B.Ay.createStaffAvailability(s,W),await E(),L(),t&&t()}catch(e){console.error("Failed to save staff availability:",e),w("Failed to save availability. Please try again.")}finally{b(!1)}};return(0,G.jsxs)(r.A,{sx:{mt:2},children:[g&&(0,G.jsx)(r.A,{sx:{mb:2},children:(0,G.jsx)(o.A,{color:"error",children:g})}),(0,G.jsxs)(c.A,{sx:{p:2,mb:3},children:[(0,G.jsx)(o.A,{variant:"subtitle1",gutterBottom:!0,children:D?"Edit Availability":"Add New Availability"}),(0,G.jsxs)(C.Ay,{container:!0,spacing:2,children:[(0,G.jsx)(C.Ay,{item:!0,xs:12,sm:6,children:(0,G.jsxs)(P.A,{fullWidth:!0,size:"small",children:[(0,G.jsx)(k.A,{children:"Day of Week"}),(0,G.jsx)(T.A,{name:"dayOfWeek",value:(null===(a=W.dayOfWeek)||void 0===a?void 0:a.toString())||"0",label:"Day of Week",onChange:R,children:Z.map((e,a)=>(0,G.jsx)(I.A,{value:a.toString(),children:e},e))})]})}),(0,G.jsx)(C.Ay,{item:!0,xs:12,sm:6,children:(0,G.jsxs)(P.A,{fullWidth:!0,size:"small",children:[(0,G.jsx)(k.A,{children:"Available"}),(0,G.jsxs)(T.A,{name:"isAvailable",value:W.isAvailable?"true":"false",label:"Available",onChange:R,children:[(0,G.jsx)(I.A,{value:"true",children:"Available"}),(0,G.jsx)(I.A,{value:"false",children:"Unavailable"})]})]})}),(0,G.jsx)(C.Ay,{item:!0,xs:12,sm:6,children:(0,G.jsx)(S.A,{name:"startTime",label:"Start Time",type:"time",value:W.startTime||"09:00",onChange:q,fullWidth:!0,size:"small",InputLabelProps:{shrink:!0},inputProps:{step:300}})}),(0,G.jsx)(C.Ay,{item:!0,xs:12,sm:6,children:(0,G.jsx)(S.A,{name:"endTime",label:"End Time",type:"time",value:W.endTime||"17:00",onChange:q,fullWidth:!0,size:"small",InputLabelProps:{shrink:!0},inputProps:{step:300}})}),(0,G.jsx)(C.Ay,{item:!0,xs:12,sm:6,children:(0,G.jsx)(S.A,{name:"effectiveFrom",label:"Effective From (Optional)",type:"date",value:W.effectiveFrom||"",onChange:q,fullWidth:!0,size:"small",InputLabelProps:{shrink:!0}})}),(0,G.jsx)(C.Ay,{item:!0,xs:12,sm:6,children:(0,G.jsx)(S.A,{name:"effectiveUntil",label:"Effective Until (Optional)",type:"date",value:W.effectiveUntil||"",onChange:q,fullWidth:!0,size:"small",InputLabelProps:{shrink:!0}})}),(0,G.jsx)(C.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:1},children:D?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(d.A,{variant:"outlined",onClick:L,size:"small",children:"Cancel"}),(0,G.jsx)(d.A,{variant:"contained",onClick:M,size:"small",disabled:v,children:v?(0,G.jsx)(V.A,{size:24}):"Save"})]}):(0,G.jsx)(d.A,{variant:"contained",onClick:M,size:"small",disabled:v,children:v?(0,G.jsx)(V.A,{size:24}):"Add"})})]})]}),(0,G.jsx)(o.A,{variant:"subtitle1",gutterBottom:!0,children:"Current Availability Schedule"}),v&&!D?(0,G.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",my:2},children:(0,G.jsx)(V.A,{})}):0===n.length?(0,G.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{my:2},children:"No availability records found. Add a new schedule above."}):(0,G.jsx)(h.A,{component:c.A,children:(0,G.jsxs)(m.A,{size:"small",children:[(0,G.jsx)(A.A,{children:(0,G.jsxs)(x.A,{children:[(0,G.jsx)(f.A,{children:"Day"}),(0,G.jsx)(f.A,{children:"Hours"}),(0,G.jsx)(f.A,{children:"Status"}),(0,G.jsx)(f.A,{children:"Effective Period"}),(0,G.jsx)(f.A,{align:"right",children:"Actions"})]})}),(0,G.jsx)(u.A,{children:n.map(e=>(0,G.jsxs)(x.A,{children:[(0,G.jsx)(f.A,{children:Z[e.dayOfWeek]}),(0,G.jsx)(f.A,{children:"".concat(e.startTime," - ").concat(e.endTime)}),(0,G.jsx)(f.A,{children:(0,G.jsx)(j.A,{label:e.isAvailable?"Available":"Unavailable",color:e.isAvailable?"success":"error",size:"small"})}),(0,G.jsx)(f.A,{children:e.effectiveFrom||e.effectiveUntil?(0,G.jsxs)(G.Fragment,{children:[e.effectiveFrom?new Date(e.effectiveFrom).toLocaleDateString():"Always"," - ",e.effectiveUntil?new Date(e.effectiveUntil).toLocaleDateString():"Forever"]}):"Always"}),(0,G.jsxs)(f.A,{align:"right",children:[(0,G.jsx)(p.A,{size:"small",onClick:()=>(e=>{z(e),N({dayOfWeek:e.dayOfWeek,startTime:e.startTime,endTime:e.endTime,isAvailable:e.isAvailable,effectiveFrom:e.effectiveFrom,effectiveUntil:e.effectiveUntil})})(e),"aria-label":"edit",children:(0,G.jsx)(F.A,{fontSize:"small"})}),(0,G.jsx)(p.A,{size:"small",onClick:()=>e.id?(async e=>{try{b(!0),await B.Ay.deleteStaffAvailability(e),await E(),D&&D.id===e&&L(),t&&t()}catch(a){console.error("Failed to delete staff availability:",a),w("Failed to delete availability. Please try again.")}finally{b(!1)}})(e.id):void 0,"aria-label":"delete",children:(0,G.jsx)(O.A,{fontSize:"small"})})]})]},e.id))})]})})]})},H=["VACATION","SICK","PERSONAL","BEREAVEMENT","JURY_DUTY","OTHER"],K=["PENDING","APPROVED","DENIED"],J=e=>{let{staffId:a,onSave:s}=e;const[t,n]=(0,i.useState)([]),[y,v]=(0,i.useState)(!1),[b,g]=(0,i.useState)(null),[w,D]=(0,i.useState)(null),[z,W]=(0,i.useState)({startDate:"",endDate:"",type:B.dq.VACATION,status:B.pR.PENDING,reason:"",approvedById:null,approvedDate:null}),N=(0,i.useCallback)(async()=>{try{v(!0);const e=await B.Ay.getStaffTimeOff(a);n(e),g(null)}catch(e){console.error("Failed to load staff time off:",e),g("Failed to load time off records. Please try again.")}finally{v(!1)}},[a]);(0,i.useEffect)(()=>{a&&N()},[a,N]);const E=e=>{const{name:a,value:s}=e.target;W((0,l.A)((0,l.A)({},z),{},{[a]:s}))},q=e=>{const{name:a,value:s}=e.target;W((0,l.A)((0,l.A)({},z),{},{[a]:s}))},R=e=>{if(!e)return"";return new Date(e).toISOString().split("T")[0]},L=()=>{D(null),W({startDate:"",endDate:"",type:B.dq.VACATION,status:B.pR.PENDING,reason:"",approvedById:null,approvedDate:""})},M=async()=>{try{if(v(!0),!z.startDate||!z.endDate)return g("Start date and end date are required"),void v(!1);const e=new Date(z.startDate);if(e>new Date(z.endDate))return g("End date must be after start date"),void v(!1);w&&w.id?await B.Ay.updateStaffTimeOff(w.id,(0,l.A)((0,l.A)({},z),{},{staffId:a})):await B.Ay.createStaffTimeOff(a,z),await N(),L(),s&&s()}catch(e){console.error("Failed to save staff time off:",e),g("Failed to save time off. Please try again.")}finally{v(!1)}},U=(e,a)=>{const s=new Date(e),t=new Date(a),l=Math.abs(t.getTime()-s.getTime());return Math.ceil(l/864e5)+1},Z=e=>new Date(e).toLocaleDateString();return(0,G.jsxs)(r.A,{sx:{mt:2},children:[b&&(0,G.jsx)(r.A,{sx:{mb:2},children:(0,G.jsx)(o.A,{color:"error",children:b})}),(0,G.jsxs)(c.A,{sx:{p:2,mb:3},children:[(0,G.jsx)(o.A,{variant:"subtitle1",gutterBottom:!0,children:w?"Edit Time Off Request":"Request Time Off"}),(0,G.jsxs)(C.Ay,{container:!0,spacing:2,children:[(0,G.jsx)(C.Ay,{item:!0,xs:12,sm:6,children:(0,G.jsx)(S.A,{name:"startDate",label:"Start Date",type:"date",value:z.startDate||"",onChange:E,fullWidth:!0,size:"small",required:!0,InputLabelProps:{shrink:!0}})}),(0,G.jsx)(C.Ay,{item:!0,xs:12,sm:6,children:(0,G.jsx)(S.A,{name:"endDate",label:"End Date",type:"date",value:z.endDate||"",onChange:E,fullWidth:!0,size:"small",required:!0,InputLabelProps:{shrink:!0}})}),(0,G.jsx)(C.Ay,{item:!0,xs:12,sm:6,children:(0,G.jsxs)(P.A,{fullWidth:!0,size:"small",children:[(0,G.jsx)(k.A,{children:"Type"}),(0,G.jsx)(T.A,{name:"type",value:z.type||"VACATION",label:"Type",onChange:q,required:!0,children:H.map(e=>(0,G.jsx)(I.A,{value:e,children:e.charAt(0)+e.slice(1).toLowerCase().replace("_"," ")},e))})]})}),(0,G.jsx)(C.Ay,{item:!0,xs:12,sm:6,children:(0,G.jsxs)(P.A,{fullWidth:!0,size:"small",children:[(0,G.jsx)(k.A,{children:"Status"}),(0,G.jsx)(T.A,{name:"status",value:z.status||"PENDING",label:"Status",onChange:q,required:!0,children:K.map(e=>(0,G.jsx)(I.A,{value:e,children:e.charAt(0)+e.slice(1).toLowerCase()},e))})]})}),(0,G.jsx)(C.Ay,{item:!0,xs:12,children:(0,G.jsx)(S.A,{name:"reason",label:"Reason (Optional)",value:z.reason||"",onChange:E,fullWidth:!0,size:"small",multiline:!0,rows:2})}),"APPROVED"===z.status&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(C.Ay,{item:!0,xs:12,sm:6,children:(0,G.jsx)(S.A,{name:"approvedById",label:"Approved By ID",value:z.approvedById||"",onChange:E,disabled:z.status!==B.pR.APPROVED,fullWidth:!0,size:"small"})}),(0,G.jsx)(C.Ay,{item:!0,xs:12,sm:6,children:(0,G.jsx)(S.A,{name:"approvedDate",label:"Approved Date",type:"date",value:z.approvedDate||"",onChange:E,fullWidth:!0,size:"small",InputLabelProps:{shrink:!0}})})]}),(0,G.jsx)(C.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:1},children:w?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(d.A,{variant:"outlined",onClick:L,size:"small",children:"Cancel"}),(0,G.jsx)(d.A,{variant:"contained",onClick:M,size:"small",disabled:y,children:y?(0,G.jsx)(V.A,{size:24}):"Save"})]}):(0,G.jsx)(d.A,{variant:"contained",onClick:M,size:"small",disabled:y,children:y?(0,G.jsx)(V.A,{size:24}):"Request"})})]})]}),(0,G.jsx)(o.A,{variant:"subtitle1",gutterBottom:!0,children:"Time Off Requests"}),y&&!w?(0,G.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",my:2},children:(0,G.jsx)(V.A,{})}):0===t.length?(0,G.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{my:2},children:"No time off requests found."}):(0,G.jsx)(h.A,{component:c.A,children:(0,G.jsxs)(m.A,{size:"small",children:[(0,G.jsx)(A.A,{children:(0,G.jsxs)(x.A,{children:[(0,G.jsx)(f.A,{children:"Dates"}),(0,G.jsx)(f.A,{children:"Days"}),(0,G.jsx)(f.A,{children:"Type"}),(0,G.jsx)(f.A,{children:"Status"}),(0,G.jsx)(f.A,{children:"Reason"}),(0,G.jsx)(f.A,{children:"Approval"}),(0,G.jsx)(f.A,{align:"right",children:"Actions"})]})}),(0,G.jsx)(u.A,{children:t.map(e=>(0,G.jsxs)(x.A,{children:[(0,G.jsx)(f.A,{children:"".concat(Z(e.startDate)," - ").concat(Z(e.endDate))}),(0,G.jsx)(f.A,{children:U(e.startDate,e.endDate)}),(0,G.jsx)(f.A,{children:e.type.charAt(0)+e.type.slice(1).toLowerCase().replace("_"," ")}),(0,G.jsx)(f.A,{children:(0,G.jsx)(j.A,{label:e.status.charAt(0)+e.status.slice(1).toLowerCase(),color:"APPROVED"===e.status?"success":"DENIED"===e.status?"error":"warning",size:"small"})}),(0,G.jsx)(f.A,{children:e.reason||"-"}),(0,G.jsx)(f.A,{children:e.approvedById?(0,G.jsxs)(G.Fragment,{children:[e.approvedById,e.approvedDate&&(0,G.jsx)(o.A,{variant:"caption",display:"block",color:"text.secondary",children:new Date(e.approvedDate).toLocaleDateString()})]}):"-"}),(0,G.jsxs)(f.A,{align:"right",children:[(0,G.jsx)(p.A,{size:"small",onClick:()=>(e=>{D(e),W({startDate:R(e.startDate),endDate:R(e.endDate),type:e.type,status:e.status,reason:e.reason||"",approvedById:e.approvedById,approvedDate:R(e.approvedDate)})})(e),"aria-label":"edit",children:(0,G.jsx)(F.A,{fontSize:"small"})}),(0,G.jsx)(p.A,{size:"small",onClick:()=>e.id?(async e=>{try{v(!0),await B.Ay.deleteStaffTimeOff(e),await N(),w&&w.id===e&&L(),s&&s()}catch(a){console.error("Failed to delete staff time off:",a),g("Failed to delete time off. Please try again.")}finally{v(!1)}})(e.id):void 0,"aria-label":"delete",children:(0,G.jsx)(O.A,{fontSize:"small"})})]})]},e.id))})]})})]})},Y=["children","value","index"];function $(e){const{children:a,value:s,index:i}=e,n=(0,t.A)(e,Y);return(0,G.jsx)("div",(0,l.A)((0,l.A)({role:"tabpanel",hidden:s!==i,id:"staff-scheduling-tabpanel-".concat(i),"aria-labelledby":"staff-scheduling-tab-".concat(i)},n),{},{children:s===i&&(0,G.jsx)(r.A,{sx:{pt:2},children:a})}))}function Q(e){return{id:"staff-scheduling-tab-".concat(e),"aria-controls":"staff-scheduling-tabpanel-".concat(e)}}const X=e=>{let{staffId:a,onSave:s}=e;const[t,n]=(0,i.useState)(0);return(0,G.jsxs)(r.A,{sx:{width:"100%"},children:[(0,G.jsx)(r.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,G.jsxs)(g.A,{value:t,onChange:(e,a)=>{n(a)},"aria-label":"staff scheduling tabs",variant:"fullWidth",children:[(0,G.jsx)(w.A,(0,l.A)({label:"Regular Availability"},Q(0))),(0,G.jsx)(w.A,(0,l.A)({label:"Time Off Requests"},Q(1)))]})}),(0,G.jsx)($,{value:t,index:0,children:(0,G.jsx)(_,{staffId:a,onSave:s})}),(0,G.jsx)($,{value:t,index:1,children:(0,G.jsx)(J,{staffId:a,onSave:s})})]})};function ee(e){const a=[];return(!e||e.length<8)&&a.push("Password must be at least 8 characters long"),e&&e.length>128&&a.push("Password must not exceed 128 characters"),/[A-Z]/.test(e)||a.push("Must contain at least one uppercase letter"),/[a-z]/.test(e)||a.push("Must contain at least one lowercase letter"),/[0-9]/.test(e)||a.push("Must contain at least one number"),/[^a-zA-Z0-9]/.test(e)||a.push('Must contain at least one special character (!@#$%^&*(),.?":{}|<>)'),/(?:abc|bcd|cde|def|efg|fgh|ghi|hij|ijk|jkl|klm|lmn|mno|nop|opq|pqr|qrs|rst|stu|tuv|uvw|vwx|wxy|xyz|012|123|234|345|456|567|678|789)/i.test(e)&&a.push("Should not contain sequential characters (abc, 123, etc.)"),/(.)\1{2,}/.test(e)&&a.push("Should not contain repeated characters (aaa, 111, etc.)"),{isValid:0===a.length,errors:a}}function ae(e){if(!e)return{strength:"weak",color:"#d32f2f",label:"Too weak"};let a=0;e.length>=12?a+=2:e.length>=10&&(a+=1),/[A-Z]/.test(e)&&(a+=1),/[a-z]/.test(e)&&(a+=1),/[0-9]/.test(e)&&(a+=1),/[^a-zA-Z0-9]/.test(e)&&(a+=1);return(e.match(/[^a-zA-Z0-9]/g)||[]).length>=2&&(a+=1),a>=7?{strength:"strong",color:"#2e7d32",label:"Strong"}:a>=5?{strength:"medium",color:"#ed6c02",label:"Medium"}:{strength:"weak",color:"#d32f2f",label:"Weak"}}const se=["confirmPassword"],te=["Administrator","Manager","Staff","Instructor"],le=["Management","Front Desk","Grooming","Training","Kennel","Veterinary"],ie=["General Manager","Front Desk Manager","Front Desk Associate","Lead Groomer","Groomer","Dog Trainer","Instructor","Kennel Manager","Kennel Technician","Veterinarian","Vet Technician"],ne=()=>{const[e,a]=(0,i.useState)([]),[s,Z]=(0,i.useState)(!0),[_,H]=(0,i.useState)(null),[K,J]=(0,i.useState)(!1),[Y,$]=(0,i.useState)(null),[Q,ne]=(0,i.useState)({open:!1,message:"",severity:"success"}),[re,de]=(0,i.useState)(0),[oe,ce]=(0,i.useState)([]),[he,me]=(0,i.useState)({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:"",department:"",position:"",status:"Active",hireDate:"",phone:"",address:"",city:"",state:"",zipCode:""}),Ae=e=>{e?($(e),me({firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",password:e.password||"",confirmPassword:e.password||"",role:e.role||"",department:e.department||"",position:e.position||"",status:e.status||"Active",hireDate:e.hireDate||"",phone:e.phone||"",address:e.address||"",city:e.city||"",state:e.state||"",zipCode:e.zipCode||""})):($(null),me({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:"",department:"",position:"",status:"Active",hireDate:(new Date).toISOString().split("T")[0],phone:"",address:"",city:"",state:"",zipCode:""})),J(!0)},xe=()=>{J(!1),de(0)},fe=e=>{const{name:a,value:s}=e.target;if(me((0,l.A)((0,l.A)({},he),{},{[a]:s})),"password"===a&&s){const e=ee(s);ce(e.errors)}else"password"!==a||s||ce([])},ue=e=>{const{name:a,value:s}=e.target;me((0,l.A)((0,l.A)({},he),{},{[a]:s}))},je=(0,i.useCallback)(async()=>{try{Z(!0);const e=await B.Ay.getAllStaff();a(e),H(null)}catch(e){console.error("Failed to load staff members:",e),H("Failed to load staff members. Please try again.")}finally{Z(!1)}},[]);(0,i.useEffect)(()=>{je()},[je]);const pe=(e,a)=>{ne({open:!0,message:e,severity:a})},ye=()=>{ne((0,l.A)((0,l.A)({},Q),{},{open:!1}))};return(0,G.jsxs)(n.A,{maxWidth:"lg",children:[(0,G.jsxs)(r.A,{sx:{mt:4,mb:4},children:[(0,G.jsx)(M.A,{open:Q.open,autoHideDuration:6e3,onClose:ye,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,G.jsx)(U.A,{onClose:ye,severity:Q.severity,sx:{width:"100%"},children:Q.message})}),(0,G.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,G.jsx)(d.A,{component:L.N_,to:"/settings",startIcon:(0,G.jsx)(N.A,{}),sx:{mr:2},children:"Back to Settings"}),(0,G.jsx)(o.A,{variant:"h4",component:"h1",children:"User Management"})]}),(0,G.jsxs)(c.A,{sx:{p:3,mb:3},children:[(0,G.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,G.jsx)(o.A,{variant:"h6",children:"Employees"}),(0,G.jsx)(d.A,{variant:"contained",startIcon:(0,G.jsx)(E.A,{}),onClick:()=>Ae(),children:"Add Employee"})]}),s?(0,G.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",my:4},children:(0,G.jsx)(V.A,{})}):_?(0,G.jsx)(U.A,{severity:"error",sx:{my:2},children:_}):(0,G.jsx)(h.A,{children:(0,G.jsxs)(m.A,{children:[(0,G.jsx)(A.A,{children:(0,G.jsxs)(x.A,{children:[(0,G.jsx)(f.A,{children:"Name"}),(0,G.jsx)(f.A,{children:"Email"}),(0,G.jsx)(f.A,{children:"Phone"}),(0,G.jsx)(f.A,{children:"Role"}),(0,G.jsx)(f.A,{children:"Department"}),(0,G.jsx)(f.A,{children:"Position"}),(0,G.jsx)(f.A,{children:"Status"}),(0,G.jsx)(f.A,{children:"Actions"})]})}),(0,G.jsx)(u.A,{children:0===e.length?(0,G.jsx)(x.A,{children:(0,G.jsx)(f.A,{colSpan:7,align:"center",children:"No staff members found"})}):e.map(e=>(0,G.jsxs)(x.A,{children:[(0,G.jsxs)(f.A,{children:[e.firstName," ",e.lastName]}),(0,G.jsx)(f.A,{children:e.email}),(0,G.jsx)(f.A,{children:e.phone||"-"}),(0,G.jsx)(f.A,{children:(0,G.jsx)(j.A,{label:e.role,color:"Administrator"===e.role?"primary":"Manager"===e.role?"secondary":"default",size:"small"})}),(0,G.jsx)(f.A,{children:e.department}),(0,G.jsx)(f.A,{children:e.position}),(0,G.jsx)(f.A,{children:(0,G.jsx)(j.A,{label:e.status,color:"Active"===e.status?"success":"error",size:"small"})}),(0,G.jsxs)(f.A,{children:[(0,G.jsx)(p.A,{size:"small",color:"primary",onClick:()=>Ae(e),children:(0,G.jsx)(F.A,{fontSize:"small"})}),(0,G.jsx)(p.A,{size:"small",color:"error",onClick:()=>e.id?(async e=>{try{await B.Ay.deleteStaff(e),pe("Staff member deleted successfully","success"),await je()}catch(a){console.error("Error deleting staff member:",a),pe("Failed to delete staff member. Please try again.","error")}})(e.id):void 0,children:(0,G.jsx)(O.A,{fontSize:"small"})})]})]},e.id))})]})})]})]}),(0,G.jsxs)(y.A,{open:K,onClose:xe,maxWidth:0===re?"xs":"md",fullWidth:!0,children:[(0,G.jsx)(v.A,{sx:{pb:1},children:Y?"Edit Employee: ".concat(Y.firstName," ").concat(Y.lastName):"Add New Employee"}),(0,G.jsxs)(b.A,{sx:{pt:1},children:[Y&&(0,G.jsx)(r.A,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,G.jsxs)(g.A,{value:re,onChange:(e,a)=>{de(a)},"aria-label":"staff dialog tabs",children:[(0,G.jsx)(w.A,{icon:(0,G.jsx)(q.A,{fontSize:"small"}),label:"Basic Information",id:"staff-tab-0","aria-controls":"staff-tabpanel-0",iconPosition:"start"}),(0,G.jsx)(w.A,{icon:(0,G.jsx)(R.A,{fontSize:"small"}),label:"Availability",id:"staff-tab-1","aria-controls":"staff-tabpanel-1",iconPosition:"start"})]})}),(0,G.jsx)(r.A,{role:"tabpanel",hidden:0!==re,id:"staff-tabpanel-0","aria-labelledby":"staff-tab-0",children:0===re&&(0,G.jsxs)(r.A,{children:[(0,G.jsxs)(C.Ay,{container:!0,spacing:1,children:[(0,G.jsx)(C.Ay,{item:!0,xs:6,children:(0,G.jsx)(S.A,{name:"firstName",label:"First Name",value:he.firstName,onChange:fe,fullWidth:!0,size:"small",margin:"dense",required:!0})}),(0,G.jsx)(C.Ay,{item:!0,xs:6,children:(0,G.jsx)(S.A,{name:"lastName",label:"Last Name",value:he.lastName,onChange:fe,fullWidth:!0,size:"small",margin:"dense",required:!0})})]}),(0,G.jsx)(S.A,{name:"email",label:"Email",type:"email",value:he.email,onChange:fe,fullWidth:!0,size:"small",margin:"dense",required:!0}),(0,G.jsxs)(C.Ay,{container:!0,spacing:1,children:[(0,G.jsx)(C.Ay,{item:!0,xs:6,children:(0,G.jsx)(S.A,{name:"phone",label:"Phone Number",value:he.phone,onChange:fe,fullWidth:!0,size:"small",margin:"dense"})}),(0,G.jsx)(C.Ay,{item:!0,xs:6,children:(0,G.jsx)(S.A,{name:"address",label:"Address",value:he.address,onChange:fe,fullWidth:!0,size:"small",margin:"dense"})})]}),(0,G.jsxs)(C.Ay,{container:!0,spacing:1,children:[(0,G.jsx)(C.Ay,{item:!0,xs:4,children:(0,G.jsx)(S.A,{name:"city",label:"City",value:he.city,onChange:fe,fullWidth:!0,size:"small",margin:"dense"})}),(0,G.jsx)(C.Ay,{item:!0,xs:4,children:(0,G.jsx)(S.A,{name:"state",label:"State",value:he.state,onChange:fe,fullWidth:!0,size:"small",margin:"dense"})}),(0,G.jsx)(C.Ay,{item:!0,xs:4,children:(0,G.jsx)(S.A,{name:"zipCode",label:"Zip Code",value:he.zipCode,onChange:fe,fullWidth:!0,size:"small",margin:"dense"})})]}),(0,G.jsx)(D.A,{sx:{my:1}}),(0,G.jsx)(o.A,{variant:"subtitle2",sx:{mt:1,mb:.5},children:"Security"}),(0,G.jsxs)(C.Ay,{container:!0,spacing:1,children:[(0,G.jsxs)(C.Ay,{item:!0,xs:6,children:[(0,G.jsx)(S.A,{name:"password",label:Y?"New Password":"Password",type:"password",value:he.password,onChange:fe,fullWidth:!0,size:"small",margin:"dense",required:!Y,error:oe.length>0,helperText:Y?"Leave blank to keep current":""}),he.password&&(0,G.jsx)(r.A,{sx:{mt:.5},children:oe.length>0?(0,G.jsx)(r.A,{children:oe.map((e,a)=>(0,G.jsxs)(o.A,{variant:"caption",color:"error",display:"block",children:["\u2022 ",e]},a))}):(0,G.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,G.jsx)(z.A,{variant:"determinate",value:100,sx:{flexGrow:1,height:4,borderRadius:2,backgroundColor:"#e0e0e0","& .MuiLinearProgress-bar":{backgroundColor:ae(he.password).color}}}),(0,G.jsx)(o.A,{variant:"caption",sx:{color:ae(he.password).color,fontWeight:"bold"},children:ae(he.password).label})]})})]}),(0,G.jsx)(C.Ay,{item:!0,xs:6,children:(0,G.jsx)(S.A,{name:"confirmPassword",label:"Confirm Password",type:"password",value:he.confirmPassword,onChange:fe,fullWidth:!0,size:"small",margin:"dense",required:!Y,error:""!==he.confirmPassword&&he.password!==he.confirmPassword,helperText:""!==he.confirmPassword&&he.password!==he.confirmPassword?"Passwords do not match":""})})]}),(0,G.jsx)(D.A,{sx:{my:1}}),(0,G.jsx)(o.A,{variant:"subtitle2",sx:{mt:1,mb:.5},children:"Job Information"}),(0,G.jsxs)(C.Ay,{container:!0,spacing:1,children:[(0,G.jsx)(C.Ay,{item:!0,xs:6,children:(0,G.jsxs)(P.A,{fullWidth:!0,size:"small",margin:"dense",children:[(0,G.jsx)(k.A,{children:"Role"}),(0,G.jsx)(T.A,{name:"role",value:he.role,label:"Role",onChange:ue,required:!0,children:te.map(e=>(0,G.jsx)(I.A,{value:e,children:e},e))})]})}),(0,G.jsx)(C.Ay,{item:!0,xs:6,children:(0,G.jsxs)(P.A,{fullWidth:!0,size:"small",margin:"dense",children:[(0,G.jsx)(k.A,{children:"Department"}),(0,G.jsx)(T.A,{name:"department",value:he.department,label:"Department",onChange:ue,required:!0,children:le.map(e=>(0,G.jsx)(I.A,{value:e,children:e},e))})]})}),(0,G.jsx)(C.Ay,{item:!0,xs:12,children:(0,G.jsxs)(P.A,{fullWidth:!0,size:"small",margin:"dense",children:[(0,G.jsx)(k.A,{children:"Position"}),(0,G.jsx)(T.A,{name:"position",value:he.position,label:"Position",onChange:ue,required:!0,children:ie.map(e=>(0,G.jsx)(I.A,{value:e,children:e},e))})]})}),(0,G.jsx)(C.Ay,{item:!0,xs:6,children:(0,G.jsxs)(P.A,{fullWidth:!0,size:"small",margin:"dense",children:[(0,G.jsx)(k.A,{children:"Status"}),(0,G.jsxs)(T.A,{name:"status",value:he.status,label:"Status",onChange:ue,required:!0,children:[(0,G.jsx)(I.A,{value:"Active",children:"Active"}),(0,G.jsx)(I.A,{value:"Inactive",children:"Inactive"})]})]})}),(0,G.jsx)(C.Ay,{item:!0,xs:6,children:(0,G.jsx)(S.A,{name:"hireDate",label:"Hire Date",type:"date",value:he.hireDate,onChange:fe,fullWidth:!0,size:"small",margin:"dense",InputLabelProps:{shrink:!0}})})]})]})}),Y&&(0,G.jsx)(r.A,{role:"tabpanel",hidden:1!==re,id:"staff-tabpanel-1","aria-labelledby":"staff-tab-1",children:1===re&&Y.id&&(0,G.jsx)(X,{staffId:Y.id,onSave:je})})]}),(0,G.jsxs)(W.A,{sx:{px:3,pb:2},children:[(0,G.jsx)(d.A,{onClick:xe,size:"small",children:"Close"}),0===re&&(0,G.jsx)(d.A,{onClick:async()=>{if(!Y&&he.password){const e=ee(he.password);if(!e.isValid)return void pe("Password validation failed: ".concat(e.errors.join(", ")),"error")}if(!Y&&he.password!==he.confirmPassword)return void pe("Passwords do not match","error");const{confirmPassword:e}=he,a=(0,t.A)(he,se);try{if(Y&&Y.id){const e=(0,l.A)({},a);e.password||delete e.password,await B.Ay.updateStaff(Y.id,e),pe("Staff member updated successfully","success")}else await B.Ay.createStaff(a),pe("Staff member added successfully","success");await je(),xe()}catch(s){console.error("Error saving staff member:",s),pe("Failed to save staff member. Please try again.","error")}},variant:"contained",color:"primary",size:"small",children:Y?"Update":"Add"})]})]})]})}}}]);