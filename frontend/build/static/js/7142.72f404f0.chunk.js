"use strict";(self.webpackChunktailtown_frontend=self.webpackChunktailtown_frontend||[]).push([[7142],{67142:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Y});var i=n(89379),l=n(9950),a=n(28429),s=n(78317),r=n(2235),o=n(82053),c=n(60899),d=n(8145),u=n(25979),h=n(19647),x=n(70006),A=n(23266),g=n(74745),p=n(62999),m=n(46639),j=n(58535),v=n(43754),y=n(37885),b=n(65429),f=n(10226),C=n(63189),T=n(66677),I=n(4983),q=n(37736),S=n(69179),k=n(25333),w=n(16497),D=n(93038),E=n(57988),W=n(99532),R=n(44414);const M=[{value:"ORAL",label:"Oral"},{value:"TOPICAL",label:"Topical"},{value:"INJECTION",label:"Injection"},{value:"EYE_DROPS",label:"Eye Drops"},{value:"EAR_DROPS",label:"Ear Drops"},{value:"OTHER",label:"Other"}],N=e=>{let{medications:t,onChange:n}=e;const[a,p]=(0,l.useState)(null),m=(e,l,a)=>{const s=[...t];s[e]=(0,i.A)((0,i.A)({},s[e]),{},{[l]:a}),n(s)};return(0,R.jsxs)(s.A,{children:[(0,R.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,R.jsx)(o.A,{variant:"h6",children:"Medications"}),(0,R.jsx)(f.A,{variant:"contained",startIcon:(0,R.jsx)(W.A,{}),onClick:()=>{n([...t,{medicationName:"",dosage:"",frequency:"",administrationMethod:"ORAL_PILL",withFood:!1}]),p(t.length)},children:"Add Medication"})]}),0===t.length&&(0,R.jsx)(r.A,{sx:{p:3,textAlign:"center",bgcolor:"grey.50"},children:(0,R.jsx)(o.A,{color:"text.secondary",children:'No medications added. Click "Add Medication" to add one.'})}),t.map((e,i)=>(0,R.jsxs)(r.A,{sx:{p:3,mb:2},children:[(0,R.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,R.jsxs)(o.A,{variant:"subtitle1",fontWeight:"bold",children:["Medication ",i+1,e.medicationName&&": ".concat(e.medicationName)]}),(0,R.jsx)(k.A,{color:"error",onClick:()=>(e=>{const i=t.filter((t,n)=>n!==e);n(i),a===e&&p(null)})(i),size:"small",children:(0,R.jsx)(E.A,{})})]}),(0,R.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,R.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,R.jsx)(d.A,{fullWidth:!0,label:"Medication Name *",value:e.medicationName,onChange:e=>m(i,"medicationName",e.target.value),placeholder:"e.g., Prednisone, Rimadyl",required:!0})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,R.jsx)(d.A,{fullWidth:!0,label:"Dosage *",value:e.dosage,onChange:e=>m(i,"dosage",e.target.value),placeholder:"e.g., 10mg, 1 tablet, 2 drops",required:!0})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,R.jsx)(d.A,{fullWidth:!0,label:"Frequency *",value:e.frequency,onChange:e=>m(i,"frequency",e.target.value),placeholder:"e.g., Twice daily, Every 8 hours",required:!0})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,R.jsxs)(u.A,{fullWidth:!0,required:!0,children:[(0,R.jsx)(h.A,{children:"Administration Method"}),(0,R.jsx)(x.A,{value:e.administrationMethod,onChange:e=>m(i,"administrationMethod",e.target.value),label:"Administration Method",children:M.map(e=>(0,R.jsx)(A.A,{value:e.value,children:e.label},e.value))})]})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,R.jsx)(d.A,{fullWidth:!0,label:"Time(s) of Day",value:e.timeOfDay||"",onChange:e=>m(i,"timeOfDay",e.target.value),placeholder:"e.g., 8:00 AM, 8:00 PM",helperText:"When should this medication be given?"})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,R.jsx)(w.A,{control:(0,R.jsx)(D.A,{checked:e.withFood,onChange:e=>m(i,"withFood",e.target.checked)}),label:"Give with food"})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,children:(0,R.jsx)(g.A,{sx:{my:1}})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,R.jsx)(d.A,{fullWidth:!0,label:"Prescribing Veterinarian",value:e.prescribingVet||"",onChange:e=>m(i,"prescribingVet",e.target.value),placeholder:"Dr. Smith, ABC Veterinary Clinic"})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,R.jsxs)(s.A,{sx:{display:"flex",gap:2},children:[(0,R.jsx)(d.A,{fullWidth:!0,type:"date",label:"Start Date",value:e.startDate||"",onChange:e=>m(i,"startDate",e.target.value),InputLabelProps:{shrink:!0}}),(0,R.jsx)(d.A,{fullWidth:!0,type:"date",label:"End Date",value:e.endDate||"",onChange:e=>m(i,"endDate",e.target.value),InputLabelProps:{shrink:!0}})]})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,children:(0,R.jsx)(d.A,{fullWidth:!0,multiline:!0,rows:2,label:"Special Instructions",value:e.specialInstructions||"",onChange:e=>m(i,"specialInstructions",e.target.value),placeholder:"Any special instructions for administering this medication"})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,children:(0,R.jsx)(d.A,{fullWidth:!0,multiline:!0,rows:2,label:"Additional Notes",value:e.notes||"",onChange:e=>m(i,"notes",e.target.value),placeholder:"Any other information about this medication"})})]})]},i))]})};var B=n(25277);const L=[{type:"Collar",icon:"\ud83d\udd17"},{type:"Leash",icon:"\ud83e\uddae"},{type:"Toy",icon:"\ud83c\udfbe"},{type:"Bedding",icon:"\ud83d\udecf\ufe0f"},{type:"Food",icon:"\ud83c\udf56"},{type:"Bowl",icon:"\ud83e\udd63"},{type:"Medication",icon:"\ud83d\udc8a"},{type:"Treats",icon:"\ud83e\uddb4"}],O=e=>{let{belongings:t,onChange:n}=e;const l=(e,l,a)=>{const s=[...t];s[e]=(0,i.A)((0,i.A)({},s[e]),{},{[l]:a}),n(s)};return(0,R.jsxs)(s.A,{children:[(0,R.jsx)(o.A,{variant:"h6",gutterBottom:!0,children:"Belongings Inventory"}),(0,R.jsxs)(r.A,{sx:{p:2,mb:3,bgcolor:"grey.50"},children:[(0,R.jsx)(o.A,{variant:"subtitle2",gutterBottom:!0,children:"Quick Add Common Items:"}),(0,R.jsxs)(s.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[L.map(e=>(0,R.jsx)(B.A,{label:"".concat(e.icon," ").concat(e.type),onClick:()=>(e=>{const i={itemType:e,description:"",quantity:1};n([...t,i])})(e.type),clickable:!0,color:"primary",variant:"outlined"},e.type)),(0,R.jsx)(B.A,{label:"+ Custom Item",onClick:()=>{n([...t,{itemType:"Other",description:"",quantity:1}])},clickable:!0,color:"secondary",variant:"outlined"})]})]}),0===t.length&&(0,R.jsx)(r.A,{sx:{p:3,textAlign:"center",bgcolor:"grey.50"},children:(0,R.jsx)(o.A,{color:"text.secondary",children:"No belongings added. Click a quick-add button above or add a custom item."})}),t.map((e,i)=>(0,R.jsxs)(r.A,{sx:{p:2,mb:2},children:[(0,R.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,R.jsxs)(o.A,{variant:"subtitle1",fontWeight:"bold",children:[e.itemType,e.description&&" - ".concat(e.description)]}),(0,R.jsx)(k.A,{color:"error",onClick:()=>(e=>{const i=t.filter((t,n)=>n!==e);n(i)})(i),size:"small",children:(0,R.jsx)(E.A,{})})]}),(0,R.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,R.jsx)(c.Ay,{item:!0,xs:12,md:4,children:(0,R.jsx)(d.A,{fullWidth:!0,label:"Item Type *",value:e.itemType,onChange:e=>l(i,"itemType",e.target.value),placeholder:"e.g., Collar, Toy, Bedding",required:!0})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,md:8,children:(0,R.jsx)(d.A,{fullWidth:!0,label:"Description *",value:e.description,onChange:e=>l(i,"description",e.target.value),placeholder:"e.g., Blue nylon collar with tags, Red squeaky ball",required:!0})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,md:3,children:(0,R.jsx)(d.A,{fullWidth:!0,type:"number",label:"Quantity",value:e.quantity,onChange:e=>l(i,"quantity",parseInt(e.target.value)||1),inputProps:{min:1}})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,md:9,children:(0,R.jsx)(d.A,{fullWidth:!0,label:"Notes",value:e.notes||"",onChange:e=>l(i,"notes",e.target.value),placeholder:"Any additional notes"})})]})]},i)),t.length>0&&(0,R.jsx)(s.A,{sx:{mt:2,p:2,bgcolor:"info.light",borderRadius:1},children:(0,R.jsxs)(o.A,{variant:"body2",color:"info.dark",children:[(0,R.jsx)("strong",{children:"Total Items:"})," ",t.reduce((e,t)=>e+t.quantity,0)," items across ",t.length," categories"]})})]})};var P=n(7762);const _=e=>{let{onSignature:t,label:n="Signature"}=e;const i=(0,l.useRef)(null),[a,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)(!1);(0,l.useEffect)(()=>{const e=i.current;if(!e)return;const t=e.getContext("2d");if(!t)return;const n=e.getBoundingClientRect();e.width=2*n.width,e.height=2*n.height,t.scale(2,2),t.strokeStyle="#000000",t.lineWidth=2,t.lineCap="round",t.lineJoin="round"},[]);const h=e=>{const t=i.current;if(!t)return;const n=t.getContext("2d");if(!n)return;c(!0);const l=t.getBoundingClientRect();let a,s;"touches"in e?(a=e.touches[0].clientX-l.left,s=e.touches[0].clientY-l.top):(a=e.clientX-l.left,s=e.clientY-l.top),n.beginPath(),n.moveTo(a,s)},x=e=>{if(!a)return;const t=i.current;if(!t)return;const n=t.getContext("2d");if(!n)return;const l=t.getBoundingClientRect();let s,r;"touches"in e?(e.preventDefault(),s=e.touches[0].clientX-l.left,r=e.touches[0].clientY-l.top):(s=e.clientX-l.left,r=e.clientY-l.top),n.lineTo(s,r),n.stroke(),u(!0)},A=()=>{if(!a)return;c(!1);const e=i.current;if(!e)return;const n=e.toDataURL("image/png");t(n)};return(0,R.jsxs)(s.A,{children:[(0,R.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[(0,R.jsx)(o.A,{variant:"subtitle1",fontWeight:"bold",children:n}),d&&(0,R.jsx)(f.A,{size:"small",startIcon:(0,R.jsx)(P.A,{}),onClick:()=>{const e=i.current;if(!e)return;const n=e.getContext("2d");n&&(n.clearRect(0,0,e.width,e.height),u(!1),t(""))},color:"error",children:"Clear"})]}),(0,R.jsx)(r.A,{sx:{border:"2px solid",borderColor:"grey.300",borderRadius:1,overflow:"hidden",cursor:"crosshair",bgcolor:"white"},children:(0,R.jsx)("canvas",{ref:i,onMouseDown:h,onMouseMove:x,onMouseUp:A,onMouseLeave:A,onTouchStart:h,onTouchMove:x,onTouchEnd:A,style:{width:"100%",height:"200px",display:"block",touchAction:"none"}})}),(0,R.jsx)(o.A,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:"Sign above using your mouse or touch screen"})]})},F=["Questionnaire","Medications","Belongings","Service Agreement","Review & Complete"],Y=()=>{var e;const{reservationId:t}=(0,a.g)(),n=(0,a.Zp)(),[k,w]=(0,l.useState)(0),[D,E]=(0,l.useState)(!0),[W,M]=(0,l.useState)(!1),[B,L]=(0,l.useState)(null),[P,Y]=(0,l.useState)(null),[H,U]=(0,l.useState)(null),[X,z]=(0,l.useState)(null),[V,G]=(0,l.useState)({}),[K,Q]=(0,l.useState)([]),[J,Z]=(0,l.useState)([]),[$,ee]=(0,l.useState)(""),[te,ne]=(0,l.useState)(""),[ie,le]=(0,l.useState)({});(0,l.useEffect)(()=>{ae()},[t]);const ae=async()=>{try{var e,n;E(!0),L(null);const i=await S.u.getReservationById(t);Y(i),ne("".concat(null===(e=i.customer)||void 0===e?void 0:e.firstName," ").concat(null===(n=i.customer)||void 0===n?void 0:n.lastName));const l=await q.A.getDefaultTemplate();U(l.data);const a=await q.A.getDefaultAgreementTemplate();z(a.data)}catch(a){var i,l;console.error("Error loading check-in data:",a),L((null===(i=a.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.message)||"Failed to load check-in data")}finally{E(!1)}},se=()=>{if(!H)return!1;for(const e of H.sections)for(const t of e.questions)if(t.isRequired&&!V[t.id])return!1;return!0},re=()=>$&&te,oe=e=>{var t,n;const l=V[e.id]||"";switch(e.questionType){case"TEXT":return(0,R.jsx)(d.A,{fullWidth:!0,label:e.questionText,value:l,onChange:t=>G((0,i.A)((0,i.A)({},V),{},{[e.id]:t.target.value})),placeholder:e.placeholder,helperText:e.helpText,required:e.isRequired});case"LONG_TEXT":return(0,R.jsx)(d.A,{fullWidth:!0,multiline:!0,rows:3,label:e.questionText,value:l,onChange:t=>G((0,i.A)((0,i.A)({},V),{},{[e.id]:t.target.value})),placeholder:e.placeholder,helperText:e.helpText,required:e.isRequired});case"NUMBER":return(0,R.jsx)(d.A,{fullWidth:!0,type:"number",label:e.questionText,value:l,onChange:t=>G((0,i.A)((0,i.A)({},V),{},{[e.id]:t.target.value})),placeholder:e.placeholder,helperText:e.helpText,required:e.isRequired});case"YES_NO":return(0,R.jsxs)(u.A,{fullWidth:!0,required:e.isRequired,children:[(0,R.jsx)(h.A,{children:e.questionText}),(0,R.jsxs)(x.A,{value:l,onChange:t=>G((0,i.A)((0,i.A)({},V),{},{[e.id]:t.target.value})),label:e.questionText,children:[(0,R.jsx)(A.A,{value:"yes",children:"Yes"}),(0,R.jsx)(A.A,{value:"no",children:"No"})]}),e.helpText&&(0,R.jsx)(o.A,{variant:"caption",color:"text.secondary",sx:{mt:.5},children:e.helpText})]});case"MULTIPLE_CHOICE":return(0,R.jsxs)(u.A,{fullWidth:!0,required:e.isRequired,children:[(0,R.jsx)(h.A,{children:e.questionText}),(0,R.jsx)(x.A,{value:l,onChange:t=>G((0,i.A)((0,i.A)({},V),{},{[e.id]:t.target.value})),label:e.questionText,children:null===(t=e.options)||void 0===t||null===(n=t.choices)||void 0===n?void 0:n.map(e=>(0,R.jsx)(A.A,{value:e,children:e},e))}),e.helpText&&(0,R.jsx)(o.A,{variant:"caption",color:"text.secondary",sx:{mt:.5},children:e.helpText})]});case"TIME":return(0,R.jsx)(d.A,{fullWidth:!0,type:"time",label:e.questionText,value:l,onChange:t=>G((0,i.A)((0,i.A)({},V),{},{[e.id]:t.target.value})),helperText:e.helpText,required:e.isRequired,InputLabelProps:{shrink:!0}});case"DATE":return(0,R.jsx)(d.A,{fullWidth:!0,type:"date",label:e.questionText,value:l,onChange:t=>G((0,i.A)((0,i.A)({},V),{},{[e.id]:t.target.value})),helperText:e.helpText,required:e.isRequired,InputLabelProps:{shrink:!0}});default:return null}};return D?(0,R.jsx)(p.A,{children:(0,R.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:(0,R.jsx)(m.A,{})})}):(0,R.jsx)(p.A,{maxWidth:"lg",children:(0,R.jsxs)(s.A,{sx:{py:4},children:[(0,R.jsx)(o.A,{variant:"h4",gutterBottom:!0,children:"Pet Check-In"}),(0,R.jsxs)(o.A,{variant:"subtitle1",color:"text.secondary",paragraph:!0,children:[null===P||void 0===P||null===(e=P.pet)||void 0===e?void 0:e.name," - ",te]}),(0,R.jsx)(r.A,{sx:{p:3,mb:3},children:(0,R.jsx)(j.A,{activeStep:k,children:F.map(e=>(0,R.jsx)(v.A,{children:(0,R.jsx)(y.A,{children:e})},e))})}),B&&(0,R.jsx)(b.A,{severity:"error",sx:{mb:3},onClose:()=>L(null),children:B}),0===k&&(H?(0,R.jsx)(s.A,{children:H.sections.map(e=>(0,R.jsxs)(r.A,{sx:{p:3,mb:3},children:[(0,R.jsx)(o.A,{variant:"h6",gutterBottom:!0,children:e.title}),e.description&&(0,R.jsx)(o.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:e.description}),(0,R.jsx)(c.Ay,{container:!0,spacing:2,children:e.questions.map(e=>(0,R.jsx)(c.Ay,{item:!0,xs:12,children:oe(e)},e.id))})]},e.id))}):null),1===k&&(0,R.jsx)(N,{medications:K,onChange:Q}),2===k&&(0,R.jsx)(O,{belongings:J,onChange:Z}),3===k&&(()=>{var e;return X?(0,R.jsxs)(s.A,{children:[(0,R.jsx)(r.A,{sx:{p:3,mb:3,maxHeight:"400px",overflow:"auto"},children:(0,R.jsx)(o.A,{variant:"body1",sx:{whiteSpace:"pre-line"},children:X.content.replace(/{{CUSTOMER_NAME}}/g,te).replace(/{{PET_NAME}}/g,(null===P||void 0===P||null===(e=P.pet)||void 0===e?void 0:e.name)||"").replace(/{{DATE}}/g,(new Date).toLocaleDateString()).replace(/{{CHECKIN_DATE}}/g,new Date(null===P||void 0===P?void 0:P.startDate).toLocaleDateString()).replace(/{{CHECKOUT_DATE}}/g,new Date(null===P||void 0===P?void 0:P.endDate).toLocaleDateString()).replace(/{{INITIAL_\d+}}/g,"[_____]").replace(/{{SIGNATURE}}/g,"")})}),(0,R.jsxs)(r.A,{sx:{p:3,mb:3},children:[(0,R.jsx)(d.A,{fullWidth:!0,label:"Your Full Name *",value:te,onChange:e=>ne(e.target.value),required:!0,sx:{mb:3}}),(0,R.jsx)(_,{onSignature:ee,label:"Sign Below *"})]})]}):null})(),4===k&&(()=>{var e;return(0,R.jsxs)(s.A,{children:[(0,R.jsxs)(r.A,{sx:{p:3,mb:2},children:[(0,R.jsx)(o.A,{variant:"h6",gutterBottom:!0,children:"Check-In Summary"}),(0,R.jsx)(g.A,{sx:{my:2}}),(0,R.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,R.jsxs)(c.Ay,{item:!0,xs:6,children:[(0,R.jsx)(o.A,{variant:"subtitle2",color:"text.secondary",children:"Pet"}),(0,R.jsx)(o.A,{children:null===P||void 0===P||null===(e=P.pet)||void 0===e?void 0:e.name})]}),(0,R.jsxs)(c.Ay,{item:!0,xs:6,children:[(0,R.jsx)(o.A,{variant:"subtitle2",color:"text.secondary",children:"Customer"}),(0,R.jsx)(o.A,{children:te})]}),(0,R.jsxs)(c.Ay,{item:!0,xs:6,children:[(0,R.jsx)(o.A,{variant:"subtitle2",color:"text.secondary",children:"Check-In Date"}),(0,R.jsx)(o.A,{children:new Date(null===P||void 0===P?void 0:P.startDate).toLocaleDateString()})]}),(0,R.jsxs)(c.Ay,{item:!0,xs:6,children:[(0,R.jsx)(o.A,{variant:"subtitle2",color:"text.secondary",children:"Check-Out Date"}),(0,R.jsx)(o.A,{children:new Date(null===P||void 0===P?void 0:P.endDate).toLocaleDateString()})]})]})]}),(0,R.jsxs)(r.A,{sx:{p:3,mb:2},children:[(0,R.jsxs)(o.A,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:["Medications: ",K.length]}),K.map((e,t)=>(0,R.jsxs)(o.A,{variant:"body2",children:["\u2022 ",e.medicationName," - ",e.dosage," - ",e.frequency]},t))]}),(0,R.jsxs)(r.A,{sx:{p:3,mb:2},children:[(0,R.jsxs)(o.A,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:["Belongings: ",J.length]}),J.map((e,t)=>(0,R.jsxs)(o.A,{variant:"body2",children:["\u2022 ",e.quantity,"x ",e.itemType," - ",e.description]},t))]}),(0,R.jsxs)(r.A,{sx:{p:3},children:[(0,R.jsx)(o.A,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Service Agreement"}),(0,R.jsxs)(o.A,{variant:"body2",color:"text.secondary",children:["Signed by: ",te]}),(0,R.jsxs)(o.A,{variant:"body2",color:"text.secondary",children:["Signature: ",$?"\u2713 Captured":"\u2717 Missing"]})]})]})})(),(0,R.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",mt:3},children:[(0,R.jsx)(f.A,{disabled:0===k,onClick:()=>{L(null),w(e=>e-1)},startIcon:(0,R.jsx)(C.A,{}),children:"Back"}),k<F.length-1?(0,R.jsx)(f.A,{variant:"contained",onClick:()=>{0!==k||se()?3!==k||re()?(L(null),w(e=>e+1)):L("Please complete the service agreement"):L("Please answer all required questions")},endIcon:(0,R.jsx)(T.A,{}),children:"Next"}):(0,R.jsx)(f.A,{variant:"contained",color:"success",onClick:async()=>{try{M(!0),L(null);const e=Object.entries(V).map(e=>{let[t,n]=e;return{questionId:t,response:n}}),i={petId:P.petId,customerId:P.customerId,reservationId:P.id,templateId:null===H||void 0===H?void 0:H.id,checkInBy:"staff",responses:e,medications:K,belongings:J},l=await q.A.createCheckIn(i),a={checkInId:l.data.id,agreementText:X.content,initials:Object.entries(ie).map(e=>{let[t,n]=e;return{section:t,initials:n,timestamp:(new Date).toISOString()}}),signature:$,signedBy:te};await q.A.createServiceAgreement(a),await S.u.updateReservation(t,{status:"CHECKED_IN"}),n("/check-in/".concat(l.data.id,"/complete"))}catch(l){var e,i;console.error("Error creating check-in:",l),L((null===(e=l.response)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.message)||"Failed to create check-in")}finally{M(!1)}},disabled:W,startIcon:W?(0,R.jsx)(m.A,{size:20}):(0,R.jsx)(I.A,{}),children:W?"Completing...":"Complete Check-In"})]})]})})}}}]);