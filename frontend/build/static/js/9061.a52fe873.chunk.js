"use strict";(self.webpackChunktailtown_frontend=self.webpackChunktailtown_frontend||[]).push([[9061],{99061:(a,t,o)=>{o.d(t,{U:()=>n});var e=o(82932);const n={getAllCoupons:async a=>{const t=await e.dr.get("/api/coupons",{params:a});return{data:t.data.data||[],totalPages:t.data.totalPages||1,currentPage:t.data.currentPage||1}},getCouponById:async a=>(await e.dr.get("/api/coupons/".concat(a))).data,getCouponByCode:async a=>{const t=await e.dr.get("/api/coupons/code/".concat(a));return t.data.data||t.data},createCoupon:async a=>(await e.dr.post("/api/coupons",a)).data,updateCoupon:async(a,t)=>(await e.dr.put("/api/coupons/".concat(a),t)).data,deleteCoupon:async a=>{await e.dr.delete("/api/coupons/".concat(a))},validateCoupon:async a=>{try{return(await e.dr.post("/api/coupons/validate",a)).data}catch(n){var t,o;return{isValid:!1,error:(null===(t=n.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message)||"Invalid coupon code"}}},applyCoupon:async(a,t,o,n)=>(await e.dr.post("/api/coupons/apply",{code:a,customerId:t,reservationId:o,subtotal:n})).data,getCouponUsage:async a=>(await e.dr.get("/api/coupons/".concat(a,"/usage"))).data,getCustomerCouponUsage:async a=>(await e.dr.get("/api/customers/".concat(a,"/coupons"))).data,generateBulkCoupons:async a=>(await e.dr.post("/api/coupons/bulk",a)).data,getCouponStats:async()=>(await e.dr.get("/api/coupons/stats")).data,checkFirstTimeCustomer:async a=>(await e.dr.get("/api/customers/".concat(a,"/first-time"))).data.isFirstTime,generateReferralCoupon:async(a,t)=>(await e.dr.post("/api/coupons/referral",{customerId:a,discountValue:t})).data,calculateDiscount:(a,t)=>{let o=0;"PERCENTAGE"===a.type?o=t*a.discountValue/100:"FIXED_AMOUNT"===a.type&&(o=Math.min(a.discountValue,t)),o=Math.round(100*o)/100;const e=Math.max(0,t-o);return{discountAmount:o,finalPrice:Math.round(100*e)/100}},validateCouponCode:a=>a&&0!==a.trim().length?a.length<3?{isValid:!1,error:"Coupon code must be at least 3 characters"}:a.length>50?{isValid:!1,error:"Coupon code must be less than 50 characters"}:/^[A-Z0-9-]+$/i.test(a)?{isValid:!0}:{isValid:!1,error:"Coupon code can only contain letters, numbers, and hyphens"}:{isValid:!1,error:"Coupon code is required"},isCouponExpired:a=>new Date>new Date(a.validUntil),isCouponNotYetValid:a=>new Date<new Date(a.validFrom),isCouponDepleted:a=>!!a.maxTotalUses&&a.currentUses>=a.maxTotalUses,formatCouponDiscount:a=>"PERCENTAGE"===a.type?"".concat(a.discountValue,"% off"):"$".concat(a.discountValue.toFixed(2)," off")}}}]);